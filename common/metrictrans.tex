%============================================================================
% LaTeX File
% Daniel J. Greenhoe
%============================================================================

%======================================
\chapter{Metric Transforms}
\label{chp:metrictrans}
%======================================
%=======================================
\section{Introduction}
%=======================================
If we know that a functions is a \fncte{metric} \xref{def:metric}, then we can use it 
to generate one or more other metrics. 
This is demonstrated by the following theorems:
\\\indentx\begin{tabular}{cl>{\footnotesize(}l<{):}>{\footnotesize}l}
    \imark&\pref{thm:isometry_inv}& \prefpo{thm:isometry_inv}& generate a metric using an isometry.
  \\\imark&\pref{thm:met_sumpf}   & \prefpo{thm:met_sumpf}   & generate a metric using a monotone function.
  \\\imark&\pref{thm:met_fod}     & \prefpo{thm:met_fod}     & generate a metric using a \fncte{metric preserving function}.
  \\\imark&\pref{thm:met_d=sumpi} & \prefpo{thm:met_d=sumpi} & generate a metric from a linear combination of metrics.
  \\\imark&\pref{thm:met_power}   & \prefpo{thm:met_power}   & generate an $\xN$-dimensional metric from weighted $1$-dimensional metrics.
 %\\\imark&\pref{prop:p==>d}      & \prefpo{prop:p==>d}      & generate a metric from another metric.
 %\\\imark&\pref{prop:p==>dn}     & \prefpo{prop:p==>dn}     & generate a multi-dimensional metric from a primitive metric.
\end{tabular}


%%---------------------------------------
%\begin{definition}
%\footnote{
%  \citerpgc{recasens2010}{83}{3642162215}{Definition 4.3}
%  }
%\label{def:metric_transform}
%%---------------------------------------
%\defbox{\brbr{\begin{array}{DlCDD}
%  \mc{5}{M}{A function $\fphi$ is a \hid{metric transform} if}
%    \\
%    \cnto & x\ge y \implies \fphi(x) \ge \fphi(y)                &\forall x,y\in\R   & (\prope{nondecreasing})    & and 
%    \cntn & \fphi(0) = 0                                         &                   &                             & and 
%    \cntn & \fphi(x) \ge 0                                       &\forall x  \in\R   & (\prope{positive definite}) & and 
%    \cntn & \fphi(x+y) \le \fphi(x) + \fphi(y)                   &\forall x,y\in\Rnn & (\prope{subadditive}).      & 
%  \end{array}}
%  }
%\end{definition}


%\pref{thm:met_sumpf} (next) shows that we can construct a large number
%of metrics from an existing metric $\metrican$ and the family $\setn{\ff}$
%of strictly increasing or strictly decreasing functions.
%Examples of such constructs include the following:\\
%\begin{tabular}{>{\imark}llll}
%  & Exponential metric  & \pref{ex:ms_32x} & \prefpo{ex:ms_32x},
%  & Tangential metric   & \pref{ex:ms_tan} & \prefpo{ex:ms_tan} 
%\end{tabular}

%=======================================
\section{Metric transforms on the domains of metrics}
%=======================================
%--------------------------------------
\begin{definition}
\footnote{
  \citerpc{thron1966}{153}{definition 19.4},
  \citerpgc{giles1987}{124}{0521359287}{Definition 6.22},
  \citerpgc{khamsi2001}{15}{0471418250}{Definition 2.4},
  \citerpg{kubrusly2001}{110}{0817641742}
  }
\label{def:isometry}
%--------------------------------------
Let $\metspaceX$ and $\opair{\setY}{\metrican}$ be \structe{metric space}s \xref{def:metric}.
\defbox{\begin{array}{M}
  The function $\ff\in\clFxy$ is an \hid{isometry} on $\clF{\metspaceX}{\opair{\setY}{\metrican}}$ if
    \\\qquad$\ds\metric{x}{y}= \metrica{\ff(x)}{\ff(y)} \qquad\scy \forall x,y\in\setX$
    \\
  The spaces $\metspaceX$ and $\opair{\setY}{\metrican}$ are \hid{isometric} if there exists an isometry on $\clF{\metspaceX}{\opair{\setY}{\metrican}}$.
\end{array}}
\end{definition}

%--------------------------------------
\begin{theorem}
\footnote{
  \citerpc{thron1966}{153}{theorem 19.5}
  }
\label{thm:isometry_inv}
%--------------------------------------
Let $\metspaceX$ and $\opair{\setY}{\metrican}$ be \structe{metric space}s.
Let $\ff$ be a function in $\clFxy$ and $\ffi$ its inverse in $\clFyx$.
\thmbox{
  \brb{\text{$\ff$ is an \hid{isometry} on $\clF{\metspaceX}{\opair{\setY}{\metrican}}$}}
  \qquad\iff\qquad
  \brb{\text{$\ffi$ is an \hid{isometry} on $\clF{\opair{\setY}{\metrican}}{\metspaceX}$}}
  }
\end{theorem}


If a function $\metrican$ is a \structe{metric} and a function $\fg$ is \prope{injective}, then 
the function $\metric{x}{y}\eqd\metrica{\fg(x)}{\fg(y)}$ is also a \structe{metric} (next theorem).
For an example of this with $\metrica{x}{y}\eqd\abs{x-y}$ and $\fg\eqd\arctan(x)$, see \prefpp{ex:ms_atan}.

%---------------------------------------
\begin{theorem}[\thm{Pullback metric}/\thm{$\fg$-transform metric}]
\label{thm:met_sumpf}
\footnote{
  \citerpg{deza2009}{81}{3642002331}
  %\url{http://groups.google.com/group/sci.math/msg/6d091dfa5061cc08}
  }
%---------------------------------------
Let $\setX$ and $\setY$ be sets.
Let $\fg$ be a function in $\clFxy$.
\thmbox{
  \brb{\begin{array}{FMD}
      1. & $\metrican$ is a metric on $\setY$ & and 
    \\2. & $\fg$ is \prope{injective}
   %\\3. & \mcom{\fphi(x)=\fphi(y)\iff x=y \quad\scriptstyle\forall x,y\in\setX}{$\fphi$ is strictly increasing or strictly decreasing}
  \end{array}}
%  \qquad\implies\qquad
  \implies
  \brb{\begin{array}{>{\ds}l}
    \metric{x}{y} =  \metrica{\fg(x)}{\fg(y)} \quad\scriptstyle\forall x,y\in\setX
    \\\qquad\text{is a metric on $\setY$}
  \end{array}}
  }
\end{theorem}
\begin{proof}
\begin{align*}
  \intertext{1. Proof that ${x}={y}\implies\metric{x}{y}=0$:}
  \metric{x}{y}
    &\eqd \metrica{\fphi(x)}{\fphi(y)}
    &&    \text{by definition of $\metricn$}
  \\&=    \metrica{\fphi(x)}{\fphi(x)}
    &&    \text{by ${x}={y}$ hypothesis}
  \\&=    0
    &&    \text{by \prope{nondegenerate} property of metric $\metrican$ \xref{def:metric}}
  \\&=    0
  \\
  \intertext{2. Proof that ${x}={y}\impliedby\metric{x}{y}=0$:}
  0
    &=    \metric{x}{y}
    &&    \text{by right hypothesis}
  \\&\eqd  \metrica{\fphi(x)}{\fphi(y)}
    &&    \text{by definition of $\metricn$}
  \\\implies \metrica{\fphi(x)}{\fphi(y)}&=0 \text{ for $n=1,2,\ldots,\xN$}
    &&    \text{because $\metrican$ is non-negative}
  \\\implies {x}&={y}
    &&    \text{by left hypothesis 2}
  \\
  \intertext{3. Proof that $\metric{x}{y}\le\metric{z}{x}+\metric{z}{y}$:}
  \metric{x}{y}
    &\eqd  \metrica{\fphi(x)}{\fphi(y)}
    &&    \text{by definition of $\metricn$}
  \\&\le   \big( \metrica{\fphi(x)}{\fphi(z)} + \metric{\fphi(z)}{\fphi(y)} \big)
    &&    \text{by \prope{subadditive} property of $\metrican$ \xref{def:metric}}
  \\&=     \metrica{\fphi(z)}{\fphi(x)} +  \metrica{\fphi(z)}{\fphi(y)} 
    &&    \text{by \prope{symmetry} property of metric $\metrican$ \xref{def:metric}}
  \\&\eqd \metric{z}{x} + \metric{z}{y}
    &&    \text{by definition of $\metricn$}
\end{align*}
\end{proof}




%=======================================
\section{Metric preserving functions}
%=======================================

%---------------------------------------
\begin{definition}
\footnote{
  \citerpc{vallin1999}{849}{Definition 1.1},
  \citerp{corazza1999}{309},
  \citerpg{deza2009}{80}{3642002331}
  }
\label{def:metpreserv}
\label{def:mpf}
%---------------------------------------
Let $\sssetM$ be the set of all \structe{metric space}s on a set $\setX$.
\defbox{\begin{array}{M}
  A \structe{function} $\fphi\in\clFrnrn$ is \propd{metric preserving} if
    \\\qquad$\metric{x}{y}\eqd\fphi\circ\metrica{x}{y}$ is a metric on $\setX$ for all $\opair{\setX}{\metrican}\in\sssetM$
\end{array}}
\end{definition}


\pref{thm:mpf_necessary} (next theorem) presents some necessary conditions for a function $\fphi$ to be \prope{metric preserving}.
\prefpp{thm:met_fod} presents some sufficient conditions.
But first some conditions that are \emph{not} necessary:
\\\begin{tabular}{>{\qquad\scs}rll}
    1. & It is \emph{not} necessary for $\fphi$ to be \prope{continuous}   & (see \prefp{ex:mpf_01}).
  \\2. & It is \emph{not} necessary for $\fphi$ to be \prope{nondecreasing}& (see \prefp{ex:mpf_11x1}).
  \\3. & It is \emph{not} necessary for $\fphi$ to be \prope{monotonic}    & (see \prefp{ex:mpf_nonmonotonic}).
\end{tabular}

%---------------------------------------
\begin{theorem}[necessary conditions]
\footnote{
  \citerpc{corazza1999}{310}{Proposition 2.1},
  \citerpg{deza2009}{80}{3642002331}
  }
\label{thm:mpf_necessary}
%---------------------------------------
Let $\oppR\ff$ be the \structe{range} of a function $\ff$.
\thmbox{
  \brb{\begin{array}{M}
    $\fphi$ is a metric\\ 
    preserving function
  \end{array}}
  \quad\implies\quad
  \brb{\begin{array}{FlD}
      1. & \fphi^{-1}(0) = \setn{0}             &  and
    \\2. & \oppR\fphi \subseteq \Rnn            &  and
    \\3. & \fphi(x+y) \leq \fphi(x) + \fphi(y)  & ($\fphi$ is \prope{subadditive})
  \end{array}}
  }
\end{theorem}
\begin{proof}
\begin{enumerate}
  \item Proof that $\fphi$ is a \structe{metric preserving function} $\implies$ $\fphi^{-1}(0) = \setn{0}$:
    \begin{enumerate}
      \item Suppose that the statement is not true and $\fphi^{-1}(0) = \setn{0,a}$.
      \item Then $\fphi(a)=0$ and for some $x,y$ such that $x\neq y$ and $\metric{x}{y}=a$ we have
        \begin{align*}
          \fphi\circ\metric{x}{y}
            &= \fphi(a)
          \\&= 0
          \\&\implies \text{$\fphi\circ\metricn$ is \emph{not} a metric}
          \\&\implies \text{$\fphi$ is \emph{not} a metric preserving function}
        \end{align*}
      \item But this contradicts the original hypothesis, and so it must be that $\fphi^{-1}(0) = \setn{0}$.
    \end{enumerate}

  \item Proof that $\oppR\fphi \subseteq \Rnn$:
    \begin{align*}
      \oppR\fphi\circ\metricn
        &\subseteq \oppR\metricn
      \\&\subseteq \Rnn
    \end{align*}

  \item Proof that $\fphi$ is a metric preserving function $\implies$ $\fphi$ is \prope{subadditive}:
    \begin{enumerate}
      \item For $\fphi$ to be a \structe{metric preserving function}, 
            by definition it must work with \emph{all} \structe{metric space}s.
      
      \item So to develop necessary conditions, we can pick any metric space we want
            (because it is necessary that $\fphi$ preserves it as a metric space).
      
      \item For this proof we choose the metric space $\opair{\R}{\metricn}$ where $\metric{x}{y}\eqd\abs{x-y}$ for all $x,y\in\Rnn$:
        \begin{align*}
          \fphi(x) + \fphi(y)
            &=   \fphi\brp{\abs{(x+y)-x}} + \fphi\brp{\abs{x-0}} 
            &&   \text{by definition of $\abs{\cdot}$}
          \\&=   \brp{\fphi\circ\metricn}(x+y,x) + \brp{\fphi\circ\metricn}(x,0)
            &&   \text{by definition of $\metricn$}
          \\&\ge \brp{\fphi\circ\metricn}(x+y,0)
            &&   \text{by left hypothesis and \prefp{def:metric}}
          \\&=   \fphi\brp{\abs{(x+y)-0}}
            &&   \text{by definition of $\metricn$}
          \\&=   \fphi(x+y)
            &&   \text{because $x,y\in\Rnn$}
        \end{align*}
    \end{enumerate}
\end{enumerate}
\end{proof}

%\pref{thm:met_fod} (next theorem) presents some sufficient conditions for a function to be metric preserving.
%---------------------------------------
\begin{theorem}[sufficient conditions]
\footnote{
  \citerc{corazza1999}{Proposition 2.3},
  \citerpg{deza2009}{80}{3642002331},
  \citerpgc{kelley1955}{131}{0387901256}{Problem C}
  %\citerpp{carothers2000}{38}{39}
  }
\label{thm:met_fod}
%---------------------------------------
%Let $\metrican$ be a metric in $\clFxxr$. 
Let $\fphi$ be a function in $\clFrr$.
\thmbox{
  %\text{$\fphi$ is a \structe{metric transform}}
  %\qquad\implies\qquad
  \brbr{\begin{array}{DlCDD}
      1. & x\ge y \implies \fphi(x) \ge \fphi(y)                &\forall x,y\in\Rnn   & (\prope{nondecreasing})     & and 
    \\2. & \fphi(0) = 0                                         &                   &                             & and 
    \\3. & \fphi(x+y) \le \fphi(x) + \fphi(y)                   &\forall x,y\in\Rnn & (\prope{subadditive}).      & 
   %\\4. & \fphi(x) \ge 0                                       &\forall x  \in\R   & (\prope{positive definite}) & and 
  \end{array}}
  \implies
  \begin{array}{M}
    $\fphi$ is a \emph{metric}\\
    \emph{preserving function}
  \end{array}
  }
\end{theorem}
\begin{proof}
\begin{enumerate}
  \item Proof that $\fphi\circ\metric{x}{y}=0 \implies x=y$:
    \begin{align*}
      \fphi\circ\metric{x}{y}=0
        &\implies \metric{x}{y}=0
        && \text{by $\fphi$ hypothesis 2}
      \\&\implies x=y
        && \text{by \prope{nondegenerate} property \prefpo{def:metric}}
    \end{align*}

  \item Proof that $\fphi\circ\metric{x}{y}=0 \impliedby x=y$:
    \begin{align*}
      \fphi\circ\metric{x}{y}
        &= \fphi\circ\metric{x}{x}
        && \text{by $x=y$ hypothesis}
      \\&= \fphi(0)
        && \text{by \prope{nondegenerate} property \prefpo{def:metric}}
      \\&= 0
        && \text{by $\fphi$ hypothesis 2}
    \end{align*}

  \item Proof that $\fphi\circ\metric{x}{y}\le\fphi\circ\metric{z}{x}+\fphi\circ\metric{z}{y}$:
    \begin{align*}
      \fphi\circ\metric{x}{y}
        &\le \fphi\brp{\metric{x}{z} + \metric{z}{y}}
        && \text{by $\fphi$ hypothesis 1 and triangle inequality \prefpo{def:metric}}
      \\&\le \fphi\brp{\metric{z}{x} + \metric{z}{y}}
        && \text{by symmetric property of $\metricn$ \prefpo{def:metric}}
      \\&\le \fphi\circ\metric{z}{x} + \fphi\circ\metric{z}{y}
        && \text{by $\fphi$ hypothesis 3}
    \end{align*}
\end{enumerate}
\end{proof}

\begin{figure}[h]
  \gsize%
  \centering%
  \psset{unit=8mm}
  \begin{tabstr}{0.75}%
  \begin{tabular}{ccc}%
     \includegraphics{../common/math/graphics/pdfs/mpf_ascaled.pdf}%
    &\includegraphics{../common/math/graphics/pdfs/mpf_snowflake.pdf}%
    &\includegraphics{../common/math/graphics/pdfs/mpf_truncated.pdf}%
    % {\input{../common/math/graphics/metric/mpf_ascaled}}%
    %&{\input{../common/math/graphics/metric/mpf_snowflake}}%
    %&{\input{../common/math/graphics/metric/mpf_truncated}}%
    \\
     (A) \exm{$\alpha$-scaled}/\exm{dilated}
    &(B) \exm{power transform}/\exm{snowflake}
    &(C) \exm{$\alpha$-truncated}/\exmd{radar screen}
    \\
     \xref{ex:mpf_ascaled}
    &\xref{ex:mpf_snowflake}
    &\xref{ex:mpf_atrun}
    \\
     \includegraphics{../common/math/graphics/pdfs/mpf_bounded.pdf}%
    &\includegraphics{../common/math/graphics/pdfs/mpf_discrete.pdf}%
    &\includegraphics{../common/math/graphics/pdfs/mpf_x1x2.pdf}%
    % {\input{../common/math/graphics/metric/mpf_bounded}}%
    %&{\input{../common/math/graphics/metric/mpf_discrete}}%
    %&{\input{../common/math/graphics/metric/mpf_x1x2}}%
    \\
     (D) \exm{bounded}
    &(E) \exm{discrete}
    &(F)
    \\
     \xref{ex:mpf_bounded}
    &\xref{ex:mpf_discrete}
    &\xref{ex:mpf_x1x2}
    \\
  \end{tabular}
  \end{tabstr}
  \caption{metric preserving functions\label{fig:mpf}}
\end{figure}

%---------------------------------------
\begin{example}[\exm{$\alpha$-scaled metric}/\exm{dilated metric}]
\footnote{
  \citerpg{deza2006}{44}{0444520872}
  }
\index{metrics!$\alpha$-scaled metric}
\index{metrics!dilated metric}
\label{ex:mpf_ascaled}
%---------------------------------------
Let $\metspaceX$ be a \structe{metric space} \xref{def:metric}.
\exbox{
  \text{$\ds\fphi(x)\eqd\alpha x,\,\alpha\in\Rp$,
    is \prope{metric preserving}
    }
  \qquad
  \brb{\begin{array}{M}
    $\ds\metrica{x}{y} \eqd \alpha\metric{x}{y}$ is a metric on $\setX$\\ 
    (see \prefp{fig:mpf} (A))
  \end{array}}
  }
\end{example}
\begin{proof}
\begin{enumerate}
  \item Note that $\fphi$ satisfies the conditions of \prefpp{thm:met_fod}.
  \item Therefore, by \prefpp{thm:met_fod}, $\metric{x}{y}$ is a metric on $\setX$.
\end{enumerate}
\end{proof}

%---------------------------------------
\begin{example}[\exm{power transform metric}/\exm{snowflake transform metric}]
\footnote{
  \citerpg{deza2009}{81}{3642002331},
  \citerpg{deza2006}{45}{0444520872}
  }
\index{metrics!power transform metric}
\label{ex:mpf_snowflake}
%---------------------------------------
Let $\metspaceX$ be a \structe{metric space} \xref{def:metric}.
\exbox{
  \text{$\ds\fphi(x)\eqd x^\alpha,\,\alpha\in\intoc{0}{1}$,
    is \prope{metric preserving}
    }
  \qquad
  \brp{\begin{array}{M}
    $\ds\metrica{x}{y} \eqd \brs{\metric{x}{y}}^\alpha$, is a metric on $\setX$\\
    (see \prefp{fig:mpf} (B))
  \end{array}}
  }
\end{example}
\begin{proof}
\begin{enumerate}
  \item Note that $\fphi$ satisfies the conditions of \prefpp{thm:met_fod} for $0<\alpha\le 1$.
  \item Therefore, by \prefpp{thm:met_fod}, $\metric{x}{y}$ is a metric on $\setX$.
\end{enumerate}
\end{proof}

%---------------------------------------
\begin{example}[\exmd{$\alpha$-truncated metric}/\exmd{radar screen metric}]
\footnote{
  \citerpg{giles1987}{33}{0521359287},
  \citerppg{deza2006}{242}{243}{0444520872}
  }
\index{metrics!radar screen}
\index{metrics!$\alpha$-truncated metric}
\label{ex:mpf_atrun}
%---------------------------------------
Let $\metspaceX$ be a \structe{metric space} \xref{def:metric}.
\exbox{
  \text{$\ds\fphi(x)\eqd \min\setn{\alpha,\,x},\,\alpha\in\Rp$,
    is \prope{metric preserving}
    }
  \qquad
  \brp{\begin{array}{M}
    $\ds\metrica{x}{y} \eqd \min\setn{\alpha,\,\metric{x}{y}}$\\
    is a metric on $\setX$\\
    (see \prefp{fig:mpf} (C))
  \end{array}}
  }
\end{example}
\begin{proof}
\begin{enumerate}
  \item Note that $\fphi$ satisfies the conditions of \prefpp{thm:met_fod}.
  \item $\ds\metric{x}{y}\eqd \min\setn{\alpha,\metrica{x}{y}}=\fphi\circ\metrica{x}{y}$
  \item Therefore, by \prefpp{thm:met_fod}, $\metric{x}{y}$ is a metric.
\end{enumerate}

%\begin{align*}
%  \intertext{\imark Proof that $ x= y\implies\metricn_r( x, y)=0$:}
%  \metricn_r( x, y)
%    &\eqd \min\setn{1,\metrica{x}{y}}
%    &&    \text{by definition of $\metricn_r$}
%  \\&=    \min\setn{1,\metrica{x}{x}}
%    &&    \text{by $ x= y$ hypothesis}
%  \\&=    \min\setn{1,0}
%    &&    \text{because $\metrican$ is \prope{nondegenerate}}
%  \\&=    0
%  \\
%  \intertext{\imark Proof that $ x= y\impliedby\metricn_r( x, y)=0$:}
%  0
%    &=    \metricn_r( x, y)
%    &&    \text{by $\metricn_r( x, y)=0$ hypothesis}
%  \\&\eqd \min\setn{1,\metrica{x}{y}}
%    &&    \text{by definition of $\metricn_r$}
%  \\\implies \metrica{x}{y}&=0
%  \\\implies  x&= y
%    &&    \text{because $\metrican$ is \prope{nondegenerate}}
%  \\
%  \intertext{\imark Proof that $\metricn_r(x,y)\le\metricn_r(z,x)+\metricn_r(z,y)$:}
%  \metricn_r( x, y)
%    &\eqd \min\setn{1,\metrica{x}{y}}
%    &&    \text{by definition of $\metricn_r$}
%  \\&\le  \min\setn{1,\metrica{x}{z}+\metrica{z}{y}}
%    &&    \text{because $\metrican$ satisfies the triangle inequality property}
%  \\&\le  \min\setn{1,\metrica{x}{z}} + \min\setn{1,\metrica{z}{y}}
%    &&    \text{because $\metrican$ is non-negative}
%  \\&=    \min\setn{1,\metrica{z}{x}} + \min\setn{1,\metrica{z}{y}}
%    &&    \text{by symmetry property of metric $\metrican$ \xref{def:metric}}
%  \\&\eqd \metricn_r( z, x) + \metricn_r( z, y)
%    &&    \text{by definition of $\metricn_r$}
%\end{align*}
\end{proof}

%---------------------------------------
\begin{example}[\exm{bounded metric}]
\footnote{
  \citerp{vallin1999}{849},
  \citerpg{ab}{39}{0120502577} 
  }
\index{metrics!bounded}
\label{ex:mpf_bounded}
%---------------------------------------
Let $\metspaceX$ be a \structe{metric space} \xref{def:metric}.
\exboxt{
  $\ds\fphi(x)\eqd \frac{x}{1+x}$ is \prope{metric preserving} (see \prefp{fig:mpf} (D))
  \\
  $\brp{ 
    \text{$\ds\metrica{x}{y} \eqd \frac{\metric{x}{y}}{1+\metric{x}{y}}$ is also a metric on $\setX$}
  }$}
\end{example}
\begin{proof}
\begin{enumerate}
  \item Note that $\fphi$ satisfies the conditions of \prefpp{thm:met_fod}.
  \item $\ds\metric{x}{y}\eqd \frac{\metrica{x}{y}}{1+\metrica{x}{y}}=\fphi\circ\metrica{x}{y}$
  \item Therefore, by \prefpp{thm:met_fod}, $\metric{x}{y}$ is a metric.
\end{enumerate}

%\begin{align*}
%  \intertext{\imark Proof that $x=y\implies\metricn_b(x,y)=0$:}
%  \metricn_b(x,y)
%    &\eqd \frac{\metrica{x}{y}}{1+\metrica{x}{y}}
%    &&    \text{by definition of $\metricn_b$}
%  \\&=    \frac{\metrica{x}{x}}{1+\metrica{x}{x}}
%    &&    \text{by $x=y$ hypothesis}
%  \\&= 0
%    &&    \text{because $\metrican$ is \prope{nondegenerate}}
%  \\
%  \intertext{\imark Proof that $x=y\impliedby\metricn_b(x,y)=0$:}
%  0
%    &=    \metricn_b(x,y)
%    &&    \text{by $\metricn_b(x,y)=0$ hypothesis}
%  \\&\eqd \frac{\metrica{x}{y}}{1+\metrica{x}{y}}
%    &&    \text{by definition of $\metricn_b$}
%  \\\implies \metrica{x}{y}&=0
%  \\\implies x&=y
%    &&    \text{because $\metrican$ is \prope{nondegenerate}}
%  \\
%  \intertext{\imark Proof that $\metricn_b(x,y)\le\metricn_b(z,x)+\metricn_b(z,y)$:}
%  \metricn_b(x,y)
%    &\eqd \frac{\metrica{x}{y}}{1+\metrica{x}{y}}
%    &&    \text{by definition of $\metricn_b$}
%  \\&\le  \frac{\metrica{x}{z}+\metrica{z}{y}}{1+\metrica{x}{z}+\metrica{z}{y}}
%    &&    \text{because $\metrican$ satisfies the triangle inequality property}
%  \\&=    \frac{\metrica{x}{z}}{1+\metrica{x}{z}+\metrica{z}{y}}
%     +    \frac{\metrica{z}{y}}{1+\metrica{x}{z}+\metrica{z}{y}}
%  \\&\le  \frac{\metrica{x}{z}}{1+\metrica{x}{z}}
%     +    \frac{\metrica{z}{y}}{1+\metrica{z}{y}}
%  \\&=    \frac{\metrica{z}{x}}{1+\metrica{z}{x}}
%     +    \frac{\metrica{z}{y}}{1+\metrica{z}{y}}
%    &&    \text{by symmetry property of metric $\metrican$ \xref{def:metric}}
%  \\&\eqd \metricn_b(z,x) + \metricn_b(z,y)
%    &&    \text{by definition of $\metricn_b$}
%\end{align*}
\end{proof}

%---------------------------------------
\begin{example}
\footnote{
  \citerp{corazza1999}{311}
  }
\label{ex:mpf_01}
\label{ex:mpf_discrete}
%---------------------------------------
Let $\fphi$ be a function in $\clFrr$.
\exbox{
  \fphi(x)\eqd\brbl{\begin{array}{cM}
    0 & for $x\leq0$\\
    1 & for $x>0$
  \end{array}}
  \qquad
  \begin{array}{M}
    is a \prope{discontinuous} \fncte{metric preserving function}\\
    (see \prefp{fig:mpf} (E)).
  \end{array}
  }
\end{example}
\begin{proof}
  This result follows directly from \prefp{thm:met_fod}.
\end{proof}

%---------------------------------------
\begin{example}
\label{ex:mpf_x1x2}
%---------------------------------------
Let $\fphi$ be a function in $\clFrr$.
\exbox{
  \fphi(x)\eqd\brb{\begin{array}{cM@{\qquad}cM}
    x   & for $0\le x<1$,  &   1   & for $1\leq x\leq2$,\\  
    x-1 & for $2<x<3$,     &   2   & for $x\ge3$
  \end{array}}
  \qquad
  \begin{array}{M}
    is a \fncte{metric preserving function}\\  
    (see \prefp{fig:mpf} (F)).
  \end{array}
  }
\end{example}
%\begin{proof}
%  by \prefp{thm:met_fod}.
%\end{proof}


\begin{figure}[h]
  \centering%
  \begin{tabular}{ccc}
     \includegraphics{../common/math/graphics/pdfs/mpf_11x1.pdf}%
    &\includegraphics{../common/math/graphics/pdfs/mpf_x11x1.pdf}%
    &\includegraphics{../common/math/graphics/pdfs/mpf_0121.pdf}%
    \\
     (A) \xref{ex:mpf_11x1}
    &(B) \xref{ex:mpf_x11x1}
    &(C) \xref{ex:mpf_0121}
  \end{tabular}
  \caption{\prope{non-monotone} \fncte{metric preserving function}s\label{fig:mpf_nonmono}}
\end{figure}
%---------------------------------------
\begin{example}
%\footnote{
  %\citerp{corazza1999}{309}
%  }
\label{ex:mpf_11x1}
%---------------------------------------
Let $\fphi$ be a function in $\clFrr$.
\exbox{
  \fphi(x)\eqd\brbl{\begin{array}{lM}
    0               & for $x=0$\\
    1+\frac{1}{x+1} & for $x>0$
  \end{array}}
  \qquad
  \text{is a \struct{metric preserving function}}
  }
{\\\psset{unit=8mm}
  \begin{pspicture}(-1,-0.5)(9.5,2.5)
    \psaxes[linecolor=green,labels=all,ticks=all,showorigin=true]{->}(0,0)(0,0)(8.5,2.5)
    \psdot[dotstyle=*](0,0)
    \psplot[plotpoints=128,linecolor=blue]{0}{8}{1 x 1 add div 1 add}% x>0
    \psdot[dotstyle=o](0,2)
    \psline[linestyle=dotted,dotsep=2pt,linecolor=red](0,1)(8,1)
    \uput[0]{0}(8.5,0){$x$}
  \end{pspicture}
}
\end{example}
\begin{proof}
\begin{enumerate}
  \item Note that $\fphi\circ\metric{x}{x}=0 \iff x=0$.

  \item Lemma: $\frac{1}{a+b} \le \frac{1}{a} + \frac{1}{b}$ for $a,b\in\Rp$:\label{ex:mpf_11x1_lem}
    \begin{align*}
      \frac{1}{a+b}
        &\le \frac{1}{a}
      \\&\le \frac{1}{a} + \frac{1}{b}
    \end{align*}

  \item Proof that $\fphi\circ\metricn$ is \prope{subadditive}:
    \begin{align*}
      \fphi\circ\metric{x}{y}
        &= 1 + \frac{1}{1+\metric{x}{y}}
        && \text{by definition of $\fphi$}
      \\&\le 1 + \frac{1}{1+\metric{x}{z}+\metric{z}{y}}
        &&   \text{by \prope{subadditive} property of metric $\metricn$}
      \\&\le 1 + \frac{1}{1+\metric{x}{z}+1+\metric{z}{y}}
      \\&\le 1 + \frac{1}{1+\metric{x}{z}} + \frac{1}{1+\metric{z}{y}}
        &&   \text{by \pref{ex:mpf_11x1_lem}}
      \\&\le 1 + \frac{1}{1+\metric{x}{z}} + 1+\frac{1}{1+\metric{z}{y}}
      \\&=   \fphi\circ\metric{x}{z} + \fphi\circ\metric{z}{y}
        && \text{by definition of $\fphi$}
    \end{align*}

  \item Therefore, by \prefpp{thm:metric_equiv}, $\fphi\circ\metric{x}{y}$ is a \structe{metric} 
        and $\fphi$ is a \structe{metric preserving function}.
\end{enumerate}
%
\end{proof}

%---------------------------------------
\begin{example}
\footnote{
  \citerp{corazza1999}{309},
  \citerpc{dobos1998}{25}{Example~1},
  \citer{juza1956}
  }
\label{ex:mpf_nonmonotonic}
%---------------------------------------
Let $\fphi$ be a function in $\clFrr$.
\exbox{
  \fphi(x)\eqd\brbl{\begin{array}{lM}
    x                 & for $x\leq2$\\
    1 + \frac{1}{x-1} & for $x>2$
  \end{array}}
  \qquad
  \text{is a \prope{nonmonotonic} \struct{metric preserving function}}
  }
{\\\psset{unit=8mm}
  \begin{pspicture}(-1,-0.5)(9.5,2.5)
    \psaxes[linecolor=green,labels=all,ticks=all,showorigin=true]{->}(0,0)(0,0)(8.5,2.5)
    \psplot[plotpoints=128,linecolor=blue]{0}{2}{x}% 0 <= x <= 2
    \psplot[plotpoints=128,linecolor=blue]{2}{8}{1 x 1 sub div 1 add}% 2 <= x 
    \psline[linestyle=dotted,dotsep=2pt,linecolor=red](0,2)(2,2)
    \psline[linestyle=dotted,dotsep=2pt,linecolor=red](0,1)(8,1)
    \psline[linestyle=dotted,dotsep=2pt,linecolor=red](2,2)(2,0)
    \uput[0]{0}(8.5,0){$x$}
  \end{pspicture}
}
\end{example}
%\begin{proof}
%
%\end{proof}

%---------------------------------------
\begin{example}
\footnote{
  \citerp{corazza1999}{309},
  \citerpc{dobos1998}{25}{Example~1},
  \citer{juza1956}
  }
\label{ex:mpf_x11x1}
%---------------------------------------
Let $\fphi$ be a function in $\clFrr$.
\exbox{
  \fphi(x)\eqd\brb{\begin{array}{lM}
    x                 & for $x\leq2$\\
    1 + \frac{1}{x-1} & for $x>2$
  \end{array}}
  \qquad
  \text{is a \fncte{metric preserving function} (see \prefp{fig:mpf_nonmono} (B)).}
  %\text{is a \prope{nonmonotonic} \struct{metric preserving function} (\prefp{fig:mpf_nonmono} (B))}
  }
\end{example}
%\begin{proof}
%
%\end{proof}

%---------------------------------------
\begin{example}
\label{ex:mpf_0121}
%---------------------------------------
Let $\fphi$ be a function in $\clFrr$.
\exbox{
  \fphi(x)\eqd\brb{\begin{array}{lM}
    x                 & for $0\leq x\leq2$\\
    -x+4              & for $2<x<3$\\
    1                 & for $x \geq3$
  \end{array}}
  \qquad
  \text{is a \fncte{metric preserving function} (see \prefp{fig:mpf_nonmono} (C)).}
  %\text{is a \prope{nonmonotonic} \struct{metric preserving function} (\prefp{fig:mpf_nonmono} (C))}
  }
\end{example}
%\begin{proof}
%
%\end{proof}

%=======================================
\section{Product metrics}
%=======================================


%---------------------------------------
\begin{theorem}[Fr{\'e}chet product metric]
\footnote{
  \citerpg{deza2006}{47}{0444520872},
  \citerpg{deza2009}{84}{3642002331},
  \citerppgc{steen1978}{64}{65}{0387903127}{Example 37.7},
  \citerpg{isham1999}{10}{9810235623}
  }
\label{thm:met_d=sumpi}
%---------------------------------------
Let $\setX$ be a set.
%Let $\tuplexn{\opair{\setX}{\metrican_n}}$ be an $\xN$-tuple of metric spaces on a set $\setX$.
%Let $\tuplexn{\alpha_n\in\Rnn}$ be an $\xN$-tuple of real values with $\max\tuplen{\alpha_n}>0$.
\thmbox{
  \brb{\begin{array}{FMD}
      1. & $\tuplen{\metrican_n}$ are \structe{metrics} on $\setX$ & and
    \\2. & $\alpha_n\ge0\quad\forall n=1,2,\ldots,\xN$               & and
    \\3. & $\max\setxn{\alpha_n}>0$ 
  \end{array}}
  \quad\implies\quad
  \brb{\begin{array}{M}
    $\ds\metric{x}{y} = \sum_{n=1}^\xN \alpha_n \metricasub{n}{x}{y}$\\
    \qquad is a \structe{metric} on $\setX$
  \end{array}}
  }
\end{theorem}
\begin{proof}
\begin{align*}
  \intertext{1. Proof that $x=y\implies\metric{x}{y}=0$:}
  \metric{x}{y}
    &= \sum_{n=1}^\xN \alpha_n\, \metricasub{n}{x}{y}
    && \text{by definition of $\metricn$}
  \\&= \sum_{n=1}^\xN \alpha_n\, \metricasub{n}{x}{x}
    && \text{by left hypothesis}
  \\&= \sum_{n=1}^\xN 0
    && \text{by \prope{nondegenerate} property of metrics \xref{def:metric}}
  \\&= 0
  \\
  \intertext{2. Proof that $x=y\impliedby\metric{x}{y}=0$:}
  0
    &= \metric{x}{y}
    && \text{by right hypothesis}
  \\&= \sum_{n=1}^\xN \alpha_n\, \metricasub{n}{x}{y}
    && \text{by definition of $\metricn$}
  \\\implies & \metricasub{n}{x}{y}=0 \qquad \forall x,y\in\spX
    && \text{by metric properties \prefpo{def:metric}}
  \\\implies & x=y \qquad \forall x,y\in\spX
    && \text{by non-degenerate property of metrics \prefpo{def:metric}}
  \\
  \intertext{3. Proof that $\metric{x}{y}\le\metric{z}{x}+\metric{z}{y}$:}
  \metric{x}{y}
    &= \sum_{n=1}^\xN \alpha_n\, \metricasub{n}{x}{y}
    && \text{by definition of $\metricn$}
  \\&\le \sum_{n=1}^\xN \alpha_n\,\Big[ \metricasub{n}{x}{z} + \metricasub{n}{z}{y} \Big]
    && \text{by \prope{subadditive} property \xref{def:metric}}
  \\&= \sum_{n=1}^\xN \alpha_n\,\Big[ \metricasub{n}{z}{x} + \metricasub{n}{z}{y} \Big]
    && \text{by \prope{symmetry} property \xref{def:metric}}
  \\&= \sum_{n=1}^\xN \alpha_n\,\metricasub{n}{z}{x} +  \sum_{n=1}^\xN \alpha_n\, \metricasub{n}{z}{y} 
  \\&= \metric{z}{x} + \metric{z}{y}
    && \text{by definition of $\metricn$}
\end{align*}
\end{proof}



%---------------------------------------
\begin{theorem}[\thm{Power mean metrics}]
\label{thm:met_power}
%\footnote{
%  }
%---------------------------------------
Let $\setX$ be a set. % and $\metrican\in\clFxxr$ be a function.
Let $\tuplexn{x_n\in\setX}$ and $\tuplexn{y_n\in\setX}$ be $\xN$-tuples on $\setX$.
\thmbox{\begin{array}{>{\ds}l}
  \brbr{\begin{array}{FMD}
      1. & \text{$\metrican$ is a \structe{metric} on $\setX$} & and
    \\2. & $\ds\sum_{n=1}^\xN \lambda_n = 1$
  \end{array}}
  \implies
  \brbl{\begin{array}{M}
    $\ds\metric{\tuplen{x_n}}{\tuplen{y_n}}\eqd \brp{\sum_{n=1}^\xN \lambda_n \metrican^r(x_n,y_n)}^\frac{1}{r}$,\\
    \qquad$r\in\intcc{1}{\infty}$,
    \quad is a \structe{metric} on $\setX$
  \end{array}}
\\
\text{Moreover, if $r=\infty$, then $\ds\metric{\tuplen{x_n}}{\tuplen{y_n}} = \max_{n=1,\ldots,\xN}\metrica{x_n}{y_n}$.}
\end{array}}
\end{theorem}
\begin{proof}
\begin{enumerate}
  \item Proof that $\tuplen{x_n}=\tuplen{y_n}\implies\metric{\tuplen{x_n}}{\tuplen{y_n}}=0$ for $r\in\intco{1}{\infty}$:
    \begin{align*}
      \metricn(\tuplen{x_n},\tuplen{y_n})
        &\eqd \brp{\sum_{n=1}^\xN \lambda_n \metrican^r(x_n,y_n)}^\frac{1}{r}
        &&    \text{by definition of $\metricn$}
      \\&=    \brp{\sum_{n=1}^\xN \lambda_n \metrican^r(x_n,x_n)}^\frac{1}{r}
        &&    \text{by $\tuplen{x_n}=\tuplen{y_n}$ hypothesis}
      \\&=    \brp{\sum_{n=1}^\xN 0}^\frac{1}{r}
        &&    \text{because $\metrican$ is \prope{nondegenerate}}
      \\&=    0
    \end{align*}

  \item Proof that $\tuplen{x_n}=\tuplen{y_n}\impliedby\metric{\tuplen{x_n}}{\tuplen{y_n}}=0$ for $r\in\intco{1}{\infty}$:
     \begin{align*}
      0
        &=    \metric{\tuplen{x_n}}{\tuplen{y_n}}
        &&    \text{by $\metric{\tuplen{x_n}}{\tuplen{y_n}}=0$ hypothesis}
      \\&\eqd \brp{\sum_{n=1}^\xN \lambda_n \metrican^r(x_n,y_n)}^\frac{1}{r}
        &&    \text{by definition of $\metricn$}
      \\\implies \brp{\metrica{x_n}{y_n}}^\frac{1}{r} &= 0 \text{ for } n=1,2,\ldots,\xN
        &&    \text{because $\metrican$ is \prope{non-negative}}
      \\\implies \tuplen{x_n}&=\tuplen{y_n}
        &&    \text{because $\metrican$ is \prope{nondegenerate}}
    \end{align*}
  
  \item Proof that $\metricn$ satisfies the triangle inequality property  for $r=1$:
    \begin{align*}
      \metric{\tuplen{x_n}}{\tuplen{y_n}}
        &\eqd \brp{\sum_{n=1}^\xN \lambda_n \metrican^r(x_n,y_n)}^\frac{1}{r}
        &&    \text{by definition of $\metricn$}
      \\&=    \sum_{n=1}^\xN \lambda_n \metrica{x_n}{y_n}
        &&    \text{by $r=1$ hypothesis}
      \\&\leq \sum_{n=1}^\xN \lambda_n \brs{\metrica{z_n}{x_n}+\metrica{z_n}{y_n}}
        &&    \text{by \prope{triangle inequality}}
      \\&=    \sum_{n=1}^\xN \lambda_n \metrica{z_n}{x_n} + \sum_{n=1}^\xN \lambda_n \metrica{z_n}{y_n}
      \\&=    \brp{\sum_{n=1}^\xN \lambda_n \metrican^r(z_n,x_n)}^\frac{1}{r} + \brp{\sum_{n=1}^\xN \lambda_n \metrican^r(z_n,y_n)}^\frac{1}{r}
        &&    \text{by $r=1$ hypothesis}
      \\&\eqd \metric{\tuplen{z_n}}{\tuplen{x_n}} + \metric{\tuplen{z_n}}{\tuplen{y_n}}
        &&    \text{by definition of $\metricn$}
    \end{align*}

  \item Proof that $\metricn$ satisfies the triangle inequality property  for $r\in\intoo{1}{\infty}$:
    \begin{align*}
      &\metric{\tuplen{x_n}}{\tuplen{y_n}}
      \\&\eqd \brp{\sum_{n=1}^\xN \lambda_n \metrican^r(x_n,y_n)}^\frac{1}{r}
        &&    \text{by definition of $\metricn$}
      \\&\leq \brp{\sum_{n=1}^\xN \lambda_n \brs{\metrican(z_n,x_n)+\metrican(z_n,y_n)}^r}^\frac{1}{r}
        &&    \text{by \prope{subadditive} property \xref{def:metric}}
      \\&=    \brp{\sum_{n=1}^\xN \brs{\lambda_n^\frac{1}{r} \metrican(z_n,x_n)+\lambda_n^\frac{1}{r}\metrican(z_n,y_n)}^r}^\frac{1}{r}
        &&    \text{by \prope{subadditive} property \xref{def:metric}}
      \\&\leq \brp{\sum_{n=1}^\xN \brs{\lambda_n^\frac{1}{r}\metrican(z_n,x_n)}^r}^\frac{1}{r} 
            + \brp{\sum_{n=1}^\xN \brs{\lambda_n^\frac{1}{r}\metrican(z_n,y_n)}^r}^\frac{1}{r}
        &&    \text{by \thme{Minkowski's inequality} \xref{thm:lp_minkowski}}
      \\&\leq \brp{\sum_{n=1}^\xN \lambda_n \metrican^r(z_n,x_n)}^\frac{1}{r} 
            + \brp{\sum_{n=1}^\xN \lambda_n \metrican^r(z_n,y_n)}^\frac{1}{r}
      \\&\eqd \metric{\tuplen{z_n}}{\tuplen{x_n}} + \metric{\tuplen{z_n}}{\tuplen{y_n}}
        &&    \text{by definition of $\metricn$}
    \end{align*}

  \item Proof for the $r=\infty$ case:
    \begin{enumerate}
      \item Proof that $\metric{\tuplen{x_n}}{\tuplen{y_n}} = \max\tuplen{x_n}$: by \prefp{thm:seq_Mr}
      
      


    %\begin{align*}
    %  \metricn^2(\tuplen{x_n},\tuplen{y_n})
    %    &\eqd \sum_{n=1}^\xN \metrican^2(x_n,y_n)
    %    \qquad\text{by definition of $\metricn$}
    %  \\&\le  \sum_{n=1}^\xN \big[ \metrica{x_n}{z_n} + \metrica{z_n}{y_n} \big]^2
    %    \qquad\text{because $\metrican$ satisfies the triangle inequality property}
    %  \\&=    \sum_{n=1}^\xN \metrican^2(z_n,x_n)
    %     +    \sum_{n=1}^\xN \metrican^2(z_n,y_n)
    %     +    2\sum_{n=1}^\xN \metrica{x_n}{z_n}\metrica{z_n}{y_n}
    %   \qquad \text{by symmetry property} % \xref{def:metric}}
    %  \\&=    \metricn^2(\tuplen{z_n},\tuplen{x_n}) + \metricn^2(\tuplen{z_n},\tuplen{y_n}) 
    %     +    2\sum_{n=1}^\xN \metrica{x_n}{z_n}\metrica{z_n}{y_n}
    %    \qquad \text{by definition of $\metricn$}
    %  \\&=    \brs{\metricn(\tuplen{z_n},\tuplen{x_n}) + \metricn(\tuplen{z_n},\tuplen{y_n})}^2 - 2\metricn(\tuplen{z_n},\tuplen{x_n})\metricn(\tuplen{z_n},\tuplen{y_n})
    %  \\&\qquad +    2\sum_{n=1}^\xN \metrica{x_n}{z_n}\metrica{z_n}{y_n}
    %  \\&=    \brs{\metricn(\tuplen{z_n},\tuplen{x_n}) + \metricn(\tuplen{z_n},\tuplen{y_n})}^2 
    %  \\&\qquad -    2 \mcom{\sqrt{\sum_{n=1}^\xN \metrican^2(z_n,x_n)}}{$\norm{\metrica{z_n}{x_n}}$} 
    %            \mcom{\sqrt{\sum_{n=1}^\xN \metrican^2(z_n,y_n)}}{$\norm{\metrica{z_n}{y_n}}$}
    %      +    2 \mcom{\sum_{n=1}^\xN \metrica{x_n}{z_n}\metrica{z_n}{y_n}}{$\inprod{\metrica{x_n}{z_n}}{\metrica{z_n}{y_n}}$}
    %    %&& \text{by definition of $\metricn$}
    %  \\&\le \brs{\metricn(\tuplen{z_n},\tuplen{x_n}) + \metricn(\tuplen{z_n},\tuplen{y_n})}^2 
    %    \qquad \text{by Cauchy-Schwarz inequality \prefpo{thm:cs}}
    %\end{align*}
%\end{enumerate}
%\end{proof}
%
%%---------------------------------------
%\begin{proposition}[\thm{sup metric}]
%\label{prop:p==>dn}
%\footnote{
%  \citerpg{ab}{39}{0120502577}
%  }
%\index{metrics!sup}
%%---------------------------------------
%Let $\setX$ be a set and $\metrican\in\clFxxr$ be a function.
%Let $\tuplexn{x_n\in\setX}$ and $\tuplexn{y_n\in\setX}$ be $\xN$-tuples on $\setX$.
%\propbox{
%  \text{$\metrican$ is a \structe{metric}}
%  \quad\implies\quad
%  \brb{
%    \metric{\tuplen{x_n}}{\tuplen{y_n}} \eqd \max\set{\metrica{x_n}{y_n}}{n=1,2,\ldots,\xN}
%    \text{ is a \structe{metric}}
%    }
%  }
%\end{proposition}
%\begin{proof}
%\begin{enumerate}
  \item Proof that $\tuplen{x_n}=\tuplen{y_n}\implies\metric{\tuplen{x_n}}{\tuplen{y_n}}=0$:
    \begin{align*}
      \metric{\tuplen{x_n}}{\tuplen{y_n}}
        &\eqd \max\set{\metrica{x_n}{y_n}}{n=1,2,\ldots,\xN}
        &&    \text{by definition of $\metricn$}
      \\&=    \max\set{\metrica{x_n}{x_n}}{n=1,2,\ldots,\xN}
        &&    \text{by $\tuplen{x_n}=\tuplen{y_n}$ hypothesis}
      \\&=    0
        &&    \text{because $\metrican$ is \prope{nondegenerate}}
      \\
    \end{align*}
  \item Proof that $\tuplen{x_n}=\tuplen{y_n}\impliedby\metric{\tuplen{x_n}}{\tuplen{y_n}}=0$:
    \begin{align*}
      0
        &=    \metric{\tuplen{x_n}}{\tuplen{y_n}}
        &&    \text{by $\metric{\tuplen{x_n}}{\tuplen{y_n}}=0$ hypothesis}
      \\&\eqd \max\set{\metrica{x_n}{y_n}}{n=1,2,\ldots,\xN}
        &&    \text{by definition of $\metricn$}
      \\\implies \metrica{x_n}{y_n}&=0 \text{ for } n=1,2,\ldots,\xN
      \\\implies \tuplen{x_n}&=\tuplen{y_n}
        &&    \text{because $\metrican$ is \prope{nondegenerate}}
      \\
    \end{align*}
  \item Proof that $\metricn$ satisfies the triangle inequality property:
    \begin{align*}
      &\metric{\tuplen{x_n}}{\tuplen{y_n}}
      \\&\eqd \max\set{\metrica{x_n}{y_n}}{n=1,2,\ldots,\xN}
        &&    \text{by definition of $\metricn$}
      \\&\le  \max\set{\metrica{x_n}{z_n}+\metrica{z_n}{y_n}}{n=1,2,\ldots,\xN}
        %&&    \text{because $\metrican$ satisfies the triangle inequality property}
        &&    \text{by \prope{subadditive} property}
      \\&\le  \max\set{\metrica{x_n}{z_n}}{n=1,2,\ldots,\xN}
          +   \max\set{\metrica{z_n}{y_n}}{n=1,2,\ldots,\xN}
        &&    \text{by \prope{non-negative} property}
      \\&=    \max\set{\metrica{z_n}{x_n}}{n=1,2,\ldots,\xN}
          +   \max\set{\metrica{z_n}{y_n}}{n=1,2,\ldots,\xN}
        &&    \text{by \prope{symmetry} property}
      \\&\eqd \metricn(\tuplen{z_n},\tuplen{x_n}) + \metricn(\tuplen{z_n},\tuplen{y_n})
        &&    \text{by definition of $\metricn$}
    \end{align*}
  \end{enumerate}
\end{enumerate}
\end{proof}












%An example of linear construction \xref{thm:met_d=sumpi} are the \hie{taxi-cab metrics} 
%(\pref{exm:gtaxi} and \prefp{ex:ms_taxi}).
%---------------------------------------
\begin{example}[\exmd{Generalized Taxi-Cab Metric}]
%\footnote{
%  \citerpg{ab}{39}{0120502577}
%  }
\label{ex:gtaxi}
%---------------------------------------
Let $\setX$ be a set.
%Let $\opair{\setX}{\metrican}$ be a metric space over a set $\setX$.
Let $\tuplexn{x_n\in\setX}$ and $\tuplexn{y_n\in\setX}$ be $\xN$-tuples on $\setX$.
\exbox{
  \brb{\text{$\metrican$ is a metric on $\setX$}}
  \implies
  \begin{array}{LCM}
    \metric{\tuplen{x_n}}{\tuplen{y_n}} \eqd \sum_{n=1}^\xN \metrica{x_n}{y_n} &\forall x_n,y_n\in\setX & is a metric on $\setX$
  \end{array}}
\end{example}
\begin{proof}
\begin{align*}
  \metric{\tuplen{x_n}}{\tuplen{y_n}} 
    &=  \sum_{n=1}^\xN \metrica{x_n}{y_n} 
  \\&=  \mcom{\brp{\xN^r}\mcom{\brp{\sum_{n=1}^\xN \frac{1}{\xN}\metrican^r\opair{x_n}{y_n}}^\frac{1}{r}}{metric by \prefp{thm:met_power}}}{metric by \prefp{thm:met_fod} (see also \prefp{ex:mpf_ascaled})}
    &&  \text{where $r\eqd1$}
  \\&\implies \quad \text{$\metric{\tuplen{x_n}}{\tuplen{y_n}}$ is a metric}
\end{align*}

%This is a special case of \prefpp{thm:met_sumpf}
%with $\ff(x)\eqd x$.
%\begin{align*}
%  \intertext{\imark Proof that $\vx=\vy\implies\metric{\vx}{\vy}=0$:}
%  \metric{\vx}{\vy}
%    &\eqd \sum_{i=1}^n \metrica{x_i}{y_i}
%    &&    \text{by definition of $\metricn$}
%  \\&=    \sum_{i=1}^n \metrica{x_i}{x_i}
%    &&    \text{by left hypothesis}
%  \\&=    \sum_{i=1}^n 0
%    &&    \text{by \prope{nondegenerate} property of metric $\metrican$ (\prefpo{def:metric})}
%  \\&=    0
%  \\
%  \intertext{\imark Proof that $\vx=\vy\impliedby\metric{\vx}{\vy}=0$:}
%  0
%    &=    \metric{\vx}{\vy}
%    &&    \text{by right hypothesis}
%  \\&\eqd \sum_{i=1}^n \metrica{x_i}{y_i}
%    &&    \text{by definition of $\metricn$}
%  \\\implies \metrica{x_i}{y_i}&=0 \text{ for i=1,2,\ldots,\xN}
%    &&    \text{because $\metrican$ is non-negative}
%  \\\implies \vx&=\vy
%    &&    \text{because $\metrican$ is \prope{nondegenerate}}
%  \\
%  \intertext{\imark Proof that $\metric{x}{y}\le\metric{z}{x}+\metric{z}{y}$:}
%  \metric{\vx}{\vy}
%    &\eqd \sum_{i=1}^n \metrica{x_i}{y_i}
%    &&    \text{by definition of $\metricn$}
%  \\&\le  \sum_{i=1}^n \big[ \metrica{x_i}{z_i} + \metrica{z_i}{y_i} \big]
%    &&    \text{by triangle inequality property of metric $\metrican$ (\prefpo{def:metric})}
%  \\&=    \sum_{i=1}^n \metrica{z_i}{x_i} + \sum_{i=1}^n \metrica{z_i}{y_i}
%    &&    \text{by symmetry property of metric $\metrican$ (\prefp{def:metric})}
%  \\&\eqd \metric{z}{x} + \metric{z}{y}
%    &&    \text{by definition of $\metricn$}
%\end{align*}
\end{proof}



%\begin{minipage}{\textwidth/2}%
%\begin{center}%
%\includegraphics[width=7\tw/8, clip=]{../common/sncf.eps}
%\footnotemark
%\end{center}
%\end{minipage}%
%\footnotetext{\url{http://www.bueker.net/trainspotting/map.php?file=maps/french-network/french-network.gif}}%
%\begin{minipage}{\tw/2}
%---------------------------------------
%\begin{remark}
%\footnote{\citerp{runde}{25}}
%\label{ex:d_frm}
%---------------------------------------
In the French railway system, a large number of railway lines go through Paris.
%(see railway map to the left).
This means that often the distance from city $x$ to city $y$ is
$\metric{x}{p} + \metric{p}{y}$ where $p$ represents Paris.
This situation gives motivation for the \fncte{French Railroad Metric} (next).
%\[\begin{array}{>{\ds}l}
%  \text{\parbox{\tw}{The \hid{French railway metric} $\metricn[f]$ with respect to parameter $p$ and arbitrary metric $\metricn$ is}},
%  \metricsub{f}{x}{y;p} =
%  \left\{\begin{array}{lll}
%    0 & \text{for} & x=y \\
%    \metricn(x,p) + \metricn(p,y) & \text{for} & x\ne y
%  \end{array}\right.
%\end{array}\]
%\end{remark}
%\end{minipage}




%---------------------------------------
\begin{proposition}
\label{prop:p==>d}
\footnote{
  \citerps{giles1987}{17,34},
  \citerp{runde}{25}
  }
%---------------------------------------
Let $\setX$ be a set and $\metrican\in\clF{\setX\times\setX}{\R}$ be a function.
\propbox{\begin{array}{llrc>{\ds}lD}
  \mc{6}{l}{\text{If $\metrican$ is a metric, then the following functions are also metrics:}}
    \\& 1. & \metricsub{f}{x}{y;z}  &=& \brb{\begin{array}{lll}
                                               0                               & \text{for} & x=y \\
                                               \metrica{x}{z} + \metrica{z}{y} & \text{for} & x\ne y
                                             \end{array}}
           & (\fncte{French railway metric}) \index{metrics!French railway}
    \\& 2. & \metricsub{\metrican}{x}{y}  &=& \brb{\begin{array}{lll}
                                                     0 & \text{for}                               & x=y \\
                                                     \metrica{0}{x} + \metrica{0}{y} & \text{for} & x\ne y
                                                   \end{array}}
           & (\fncte{post office metric}) \index{metrics!post office}
\end{array}}
\end{proposition}
\begin{proof}
\begin{enumerate}
  \item Proof the $\metricsub{f}{x}{y;z}$ is a metric:
    \begin{align*}
    \intertext{\imark Proof that $x=y\implies\metricn_f(x,y;z)=0$:}
      \metricsub{f}{x}{y;z}
        &= \metricn_f(x,x)
        && \text{by left hypothesis}
      \\&= 0
        && \text{by definition of $\metricn_f$}
      \\
    \intertext{\imark Proof that $x=y\impliedby\metricn_f(x,y;z)=0$:}
      0
        &=    \metricn_f(x,y;z)
        &&    \text{by right hypothesis}
      \\&\eqd \left\{\begin{array}{ll}
                0                 &\text{for } x=y \\
                \metrica{x}{z}+\metrica{z}{y} &\text{for } x\ne y
              \end{array} \right.
        &&    \text{by definition of $\metricn_f$}
      \\&\ge  \left\{\begin{array}{ll}
                0                 &\text{for } x=y \\
                \metricn_f(x,y;z)          &\text{for } x\ne y
              \end{array} \right.
        &&    \text{by \pref{def:metric}}
      \\&\ge  0
        &&    \text{by \pref{def:metric}}
      \\\implies \metricn_f(x,y;z) &= 0 \qquad \forall x,y\in\spX
      \\\implies x&=y
        && \text{by \pref{def:metric}}
      \\
    \intertext{\imark Proof that $\metricn_f(x,y;z)\le\metricn_f(u,x)+\metricn_f(u,y)$:}
      \metricn_f(x,y;z)
        &\eqd \left\{\begin{array}{ll}
                0                 &\text{for } x=y \\
                \metrica{x}{z}+\metrica{z}{y} &\text{for } x\ne y
              \end{array} \right.
        &&    \text{by definition of $\metricn_f$}
      \\&\le  \left\{\begin{array}{ll}
                0                 &\text{for } x=y \\
                \metrica{u}{z}+\metrica{z}{x} &\text{for } x\ne y
              \end{array} \right.
     \\&\qquad+    \left\{\begin{array}{ll}
                0                 &\text{for } x=y \\
                \metrica{u}{z}+\metrica{z}{y} &\text{for } x\ne y
              \end{array} \right.
        &&    \text{by \pref{def:metric}}
      \\&=    \metricn_f(u,x) + \metricn_f(u,y)
        &&    \text{by definition of $\metricn_f$}
    \end{align*}

  \item Proof for Post Office Metric: this is a special case
        of the French Railroad metric (with $z=0$).



\end{enumerate}
\end{proof}


%\prefpp{prop:p==>d} demonstrated that we can generate new metrics from old ones.
%But these new metrics are essentially in the same form as the old metrics used to generate them 
%in the sense that both have the same domain.
%\pref{prop:p==>dn} (next) demonstrates that it is also possible to construct 
%a metric $\metricn$ over 
%\emph{sequences} of elements (or over vector spaces) using a metric $\metrican$ over 
%pairs of elements. Examples of such constructions include the following:\\
%\begin{tabular}{>{\imark}llll}
%  & Hamming distance  & \pref{ex:d_hamming}     & \prefpo{ex:d_hamming},
%  & Taxi-cab metric   & \pref{ex:ms_taxi}      & \prefpo{ex:ms_taxi},
%  & Euclidean metric  & \pref{ex:ms_euclidean} & \prefpo{ex:ms_euclidean},
%  & Sup metric        & \pref{ex:ms_sup}       & \prefpo{ex:ms_sup},
%  & Parabolic metric  & \pref{ex:ms_parabolic} & \prefpo{ex:ms_parabolic},
%  & Tangential metric & \pref{ex:ms_tan}        & \prefpo{ex:ms_tan}
%\end{tabular}
