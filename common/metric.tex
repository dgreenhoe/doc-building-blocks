%============================================================================
% LaTeX File
% Daniel J. Greenhoe
%============================================================================

%======================================
\chapter{Metric spaces}
\label{chp:metric}
%======================================

%  \begin{figure}[t]
%  \[\begin{array}{*{5}{>{\ds}c}}
%       && \fcolorbox{blue}{bg_blue}{\parbox[c]{3\tw/16}{\centering topological space}}
%    \\ && \\setUparrow & \Nwarrow
%    \\ \fcolorbox{blue}{bg_blue}{\parbox[c]{3\tw/16}{\centering vector space}}
%       && \fcolorbox{red}{bg_red}{\parbox[c]{3\tw/16}{\centering metric space}}
%       && \fcolorbox{blue}{bg_blue}{\parbox[c]{3\tw/16}{\centering measure space}}
%    \\ & \Nwarrow & \\setUparrow && \\setUparrow
%    \\ && \fcolorbox{blue}{bg_blue}{\parbox[c]{3\tw/16}{\centering normed linear space}}
%       && \fcolorbox{blue}{bg_blue}{\parbox[c]{3\tw/16}{\centering probability space}}
%    \\ &  \Nearrow  & & \Nwarrow
%    \\ \fcolorbox{blue}{bg_blue}{\parbox[c]{3\tw/16}{\centering inner-product space}}
%       &&&&
%       \fcolorbox{blue}{bg_blue}{\parbox[c]{3\tw/16}{\centering Banach space}}
%    \\ & \Nwarrow && \Nearrow
%    \\ && \fcolorbox{blue}{bg_blue}{\parbox[c]{3\tw/16}{\centering Hilbert space}}
%    \\ &\Nearrow & & \Nwarrow
%    \\ \fcolorbox{blue}{bg_blue}{\parbox[c]{3\tw/16}{\centering$\spII$}}
%       &&&&
%       \fcolorbox{blue}{bg_blue}{\parbox[c]{3\tw/16}{\centering$\spLL$}}
%    \\ & \Nwarrow && \Nearrow
%    \\ && \fcolorbox{blue}{bg_blue}{\parbox[c]{3\tw/16}{\centering$0$}}
%  \end{array}\]
%  \end{figure}


%\qboxnps
%  {
%    \href{http://en.wikipedia.org/wiki/Eric_Temple_Bell}{Eric Temple Bell}
%    (\href{http://www-history.mcs.st-andrews.ac.uk/Timelines/TimelineG.html}{1883--1960}),
%    mathematician and author
%    \index{Bell, Eric Temple}
%    \footnotemark
%  }
%  {../common/people/bell.jpg}
%  {The cowboys have a way of trussing up a steer or a pugnacious bronco
%    which fixes the brute so that it can neither move nor think.
%    This is the hog-tie, and it is what Euclid did to geometry.}
%  \footnotetext{\begin{tabular}[t]{ll}
%    quote: & \citerp{crayshaw}{191},
%           & \url{http://www-groups.dcs.st-and.ac.uk/~history/Quotations/Bell.html},
%    image: & \url{http://www-history.mcs.st-andrews.ac.uk/PictDisplay/Bell.html}
%  \end{tabular}}



%======================================
\section{Algebraic structure}
\label{sec:d_def}
%======================================
\qboxns
  {
    \href{http://en.wikipedia.org/wiki/Proclus}{Proclus Lycaeus}
    (\href{http://www-history.mcs.st-andrews.ac.uk/Timelines/TimelineA.html}{412 -- 485 AD}),
    Greek philosopher,
    commenting on the 
    \href{http://en.wikipedia.org/wiki/Epicureans}{Epicureans} 
    opinion regarding the \prope{triangle inequality} property.
    \index{Proclus}
    \index{quotes!Proclus}
    \footnotemark
  }
  {
   The Epicureans are wont to ridicule this theorem, 
   saying it is evident even to an ass and needs no proof;
   it is as much the mark of an ignorant man,
   they say, to require persuasion of evident truths as to believe
   what is obscure without question.
   \ldots
   That the present theorem is known to an ass they make out from the
   observation that, if straw is placed at one extremity of the sides,
   an ass in quest of provender will make his way along the one side
   and not by way of the two others.
  }
  \footnotetext{
    \citerp{proclus}{251}
    }

A \structe{metric space} is simply a set together with a ``\fncte{distance}" function,
which is called the \fncte{metric} of the \structe{metric space} \xref{def:metric}\index{space!metric} (next definition).
With a metric on a set, we can measure the distance between points in the
set.
%If the points represent a sequence
%(for example, the sequence of values $1,\frac{1}{2},\frac{1}{3},\ldots\frac{1}{n}$)
%we can measure whether or not the sequence \prope{converges} to some value
%by measuring whether or not the distance between points gets closer and closer.

%---------------------------------------
\begin{definition}
\footnote{
  \citerp{dieudonne1969}{28},
  \citerp{copson1968}{21},
  \citorp{hausdorff1937e}{109},
  \citor{frechet1928},
  \citorp{frechet1906}{30} 
  %\citor{hausdorff1914},
  %\cithrpg{ab}{34}{0120502577} 
  }
\label{def:metric}
\label{def:mspace}
%\label{def:(X,d)}
%---------------------------------------
Let $\setX$ be a set and $\Rnn$ the set of non-negative real numbers.
\defbox{
  \begin{array}{lD rcl @{\qquad}C @{\qquad}DD}
     \mc{8}{M}{A function $\hxs{\metricn}\in\clF{\setX\times\setX}{\Rnn}$ is a \hid{metric} on $\setX$ if}
    \\&1. & \metric{x}{y} &\ge& 0                                 & \forall x,y   \in\setX & (\prope{non-negative})   & and 
    \\&2. & \metric{x}{y} &=  & 0  \iff x=y                       & \forall x,y   \in\setX & (\prope{nondegenerate})  & and 
    \\&3. & \metric{x}{y} &=  & \metricn(y,x)                     & \forall x,y   \in\setX & (\prope{symmetric})      & and 
    \\&4. & \metric{x}{y} &\le& \metric{x}{z}+\metric{z}{y}       & \forall x,y,z \in\setX & (\prope{subadditive}/\prope{triangle inequality}).\footnotemark
  \\\mc{8}{M}{A \hid{metric space} is the pair $\metspaceX$.}
  \end{array}
  }
\end{definition}
\footnotetext{\citorc{euclid}{Book I Proposition 20}}

Actually, it is possible to significantly simplify the definition of a metric
to an equivalent statement requiring only half as many conditions.
These equivalent conditions (a ``\hie{characterization}") are stated in \pref{thm:metric_equiv} (next).
%---------------------------------------
\begin{theorem}[metric characterization]
\label{thm:metric_equiv}
\footnote{
  \citerpg{busemann1955}{3}{0486154629},
  \citerp{michel1993}{264},
  \citerpg{giles1987}{18}{0521359287}
  }
%---------------------------------------
Let $\metricn$ be a function in $\clF{\setX\times\setX}{(\Rnn)}$.
\thmbox{
  \metric{x}{y} \text{ is a metric}
  \qquad\iff\qquad
  \brbl{\begin{array}{DrclCD}
      1. & \metric{x}{y} &=  & 0  \iff x=y                  & \forall x,y   \in\setX & and
    \\2. & \metric{x}{y} &\le& \metric{z}{x}+\metric{z}{y}  & \forall x,y,z \in\setX & 
  \end{array}}
  }
\end{theorem}
\begin{proof}
  \begin{align*}
    \intertext{1. Proof that [$\metric{x}{y} \text{ is a metric}$] $\implies$ [(1) and (2)]:}
    \intertext{\hspace{2ex}1a. Proof that $\metric{x}{y}=0\iff x=y$: by left hypothesis 2 ($\metric{x}{y}$ is \prope{nondegenerate})}
    \intertext{\hspace{2ex}1b. Proof that $\metric{x}{y}\le\metric{z}{x}+\metric{z}{y}$:}
      \metric{x}{y}
        &\le \metric{x}{z} + \metric{z}{y}
        &&   \text{by right hypothesis 4 (triangle inequality)}
      \\&=   \metric{z}{x} + \metric{z}{y}
        &&   \text{by right hypothesis 3 (commutative)}
      \\
    \intertext{2. Proof that [$\metric{x}{y} \text{ is a metric}$] $\impliedby$ [(1) and (2)]:}
    \intertext{\hspace{2ex}2a. Proof that $\metric{x}{y}\ge0$:}
      0
        &=   \frac{1}{2}\cdot 0
      \\&=   \frac{1}{2}\;\metricn(y,y)
        &&   \text{by right hypothesis 1}
      \\&=   \left.\frac{1}{2}\;\metric{y}{z} \right|_{z=y}
      \\&\le \frac{1}{2}\;\left[ \metric{x}{y} + \metric{x}{z} \right]_{z=y}
        &&   \text{by right hypothesis 2}
      \\&=   \frac{1}{2}\;\left[\metric{x}{y} + \metric{x}{y} \right]
      \\&=   \metric{x}{y}
      \\
    \intertext{\hspace{2ex}2b. Proof that $\metric{x}{y}=0\iff x=y$: by right hypothesis 1}
    \intertext{\hspace{2ex}2c. Proof that $\metric{x}{y}=\metricn(y,x)$:}
      \left. \metric{x}{y} \right|_{z=y}
        &\le \left[ \metric{z}{x} + \metric{z}{y} \right]_{z=y}
        &&   \text{by right hypothesis 2}
      \\&=   \metricn(y,x) + \cancelto{0}{\metricn(y,y)}
      \\&=   \metricn(y,x)
        &&   \text{by right hypothesis 1}
      \\
      \left. \metricn(y,x) \right|_{z=x}
        &\le \left[ \metric{z}{y} + \metric{z}{x} \right]_{z=x}
        &&   \text{by right hypothesis 2}
      \\&=   \metric{x}{y} + \cancelto{0}{\metricn(x,x)}
      \\&=   \metric{x}{y}
        &&   \text{by right hypothesis 1}
      \\
    \intertext{\hspace{2ex}2d. Proof that $\metric{x}{y}\le \metric{x}{z}+\metric{z}{y}$:}
      \metric{x}{y}
        &\le \metric{z}{x} + \metric{z}{y}
        &&   \text{by right hypothesis 2}
      \\&=   \metric{x}{z} + \metric{z}{y}
        &&   \text{by result 2c}
      \\
  \end{align*}
\end{proof}

The \prope{triangle inequality} property stated in the definition of metrics 
\xref{def:metric} axiomatically endows a metric with an upper bound. 
\pref{lem:subtri_ineq} (next) demonstrates that there is a complementary lower bound 
similar in form to the triangle-inequality upper bound.
%---------------------------------------
\begin{lemma}
\label{lem:subtri_ineq}
\footnote{
  \citerp{dieudonne1969}{28},
  \citerp{michel1993}{266}
  }
\index{space!metric}
%---------------------------------------
Let $\metspaceX$ be a \structe{metric space} \xref{def:metric}. 
Let $\absn$ be the \fncte{absolute value} function \xref{def:abs}.
\lembox{\begin{array}{F rcl C}
  1. & \abs{ \metric{x}{p} - \metric{p}{y} } &\le& \metric{x}{y} &\forall x,y,p\in\setX\\
  2. & \metric{x}{p} - \metric{p}{y}         &\le& \metric{x}{y} &\forall x,y,p\in\setX
\end{array}}
\end{lemma}
\begin{proof}
\begin{enumerate}
  \item Proof that $\abs{ \metric{x}{p} - \metric{p}{y} } \le \metric{x}{y}$:\label{item:met_lowerBound_abs}
    \begin{align*}
      \abs{\metric{x}{p} - \metric{p}{y} }
        &\le \abs{ \metric{x}{y}+\metric{y}{p} - \metric{p}{y} }
        &&   \text{by \prope{subadditive} property \xref{def:metric}}
      \\&=   \abs{ \metric{x}{y}+\metric{p}{y} - \metric{p}{y} }
        &&   \text{by \prope{symmetry} property of metrics \xref{def:metric}}
      \\&=   \abs{ \metric{x}{y}+ 0 }
      \\&=   \metric{x}{y}
        &&   \text{by \prope{non-negative} property of metrics \xref{def:metric}}
    \end{align*}

  \item Proof that $\metric{x}{p} \ge \metric{p}{y}$ $\implies$ $\metric{x}{p} - \metric{p}{y} \le \metric{x}{y}$:
    \begin{align*}
      \metric{x}{p} - \metric{p}{y}
        &= \abs{\metric{x}{p} - \metric{p}{y}}
        && \text{by left hypothesis and definition of $\absn$}
      \\&\le \metric{x}{y}
        && \text{by \pref{item:met_lowerBound_abs}}
    \end{align*}

  \item Proof that $\metric{x}{p} \le \metric{p}{y}$ $\implies$ $\metric{x}{p} - \metric{p}{y} \le \metric{x}{y}$:
    \begin{align*}
      \abs{\metric{x}{p} - \metric{p}{y} }
        &\le 0 
        && \text{by left hypothesis}
      \\&\le \metric{x}{y}
        && \text{by \prope{non-negative} property of metrics \xref{def:metric}}
    \end{align*}
\end{enumerate}
\end{proof}


The \prope{triangle inequality} property stated in the definition of metrics 
\xref{def:metric} can be extended from two to any finite number of metrics (next).
%---------------------------------------
\begin{proposition}
\label{prop:met_trieq_gen}
\footnote{
  \citerp{dieudonne1969}{28},
  \citerpg{rosenlicht}{37}{0486650383}
  }
%---------------------------------------
Let $\metspaceX$ be a \structe{metric space} \xref{def:metric}
and $\tuplexn{x_n\in\setX}$ an \structe{$\xN$-tuple} \xref{def:tuple} on $\setX$.
\propbox{
  \metric{x_1}{x_\xN} \le \sum_{n=1}^{\xN-1} \metric{x_n}{x_{n+1}}
  \qquad\forall \xN\in\Zp\setd1
  }
\end{proposition}
\begin{proof}
Proof by induction:
\begin{align*}
  \intertext{Proof that the \{$\xN=2$ case\} is true:}
    \metric{x_1}{x_2}
      &\le \sum_{n=1}^{2-1} \metric{x_n}{x_{n+1}}
  %
  \intertext{Proof for that the \{$\xN$ case\} $\implies$ \{$\xN+1$ case\}:}
    \metric{x_1}{x_{\xN+1}}
      &\le \metric{x_1}{x_\xN} + \metric{x_\xN}{x_{\xN+1}}
      &&   \text{by \prope{subadditive} property \xref{def:metric}}
    \\&\le \brp{\sum_{n=1}^{\xN-1} \metric{x_\xN}{x_{\xN+1}}} + \metric{x_\xN}{x_{\xN+1}}
      &&   \text{by \{$\xN$ case\} hypothesis}
    \\&=   \sum_{n=1}^{\xN} \metric{x_n}{x_{n+1}}
\end{align*}
\end{proof}

\prefpp{sec:topmetric} presents some topological properties of metric spaces.
However the property of \prope{boundedness} (next definition) is fundamentally a metric space concept, 
not a topological one.\cittrpg{munkres2000}{121}{0131816292}
%---------------------------------------
\begin{definition}
\label{def:bounded}
\footnote{
  \citerpc{thron1966}{154}{definition 19.5},
  \citerpg{bruckner1997}{356}{013458886X}
  }
%---------------------------------------
Let $\metspaceX$ be a \structe{metric space} \xref{def:metric}.
\defbox{\begin{array}{M}
  A set $\setA$ is \hid{bounded} in $\metspaceX$ if $\setA\subseteq\setX$ and 
  \\\qquad$\sup\set{\metric{x}{y}}{x,y\in\setA}<\infty$
\end{array}}
\end{definition}

In a \structe{metric space} \xref{def:metric}\index{space!metric},
it is sometimes useful to know the maximum distance between any two points in the set.
This maximum distance is called the \fncte{diameter} of the set 
(\pref{def:diam}, next definition).
The \fncte{diameter} is an example of a broader class of functions called 
\fncte{set functions}.\footnote{
  \citerpg{pap1995}{7}{0792336585},
  \citer{hahn1948},
  \citor{choquet1954}
  }

%---------------------------------------
\begin{definition}
\label{def:diam}
\footnote{
  %\citerpg{davis2005}{28}{0071243399},
  \citerp{michel1993}{267},
  \citerp{copson1968}{23},
  \citerpg{molchanov2005}{389}{185233892X},
  \citerp{hausdorff1937e}{166}
  }
\indxs{\diam}
%---------------------------------------
Let $\metspaceX$ be a \structe{metric space} \xref{def:metric}.
\defbox{\begin{array}{M}
  The \hid{diameter} of a set $\setA\subseteq\setX$ in $\metspaceX$ is
  \\\qquad$\ds
  \diam\setA \eqd
    \left\{\begin{array}{ll}
      0                            & \text{for } \setA=\emptyset \\
      \sup\set{\metric{x}{y}}{x,y\in\setA} & \text{otherwise}
    \end{array}\right.$
\end{array}}
\end{definition}

%%---------------------------------------
%\begin{remark}
%%---------------------------------------
%Although the function $\diam$ is a \fncte{set function}, it is not a \fncte{measure}.
%\end{remark}
%\begin{proof}
%Let $\setA$ and $\setB$ be sets that are \prope{disjoint} and \prope{disconnected}
%with respect to each other.
%\begin{align*}
%  \diam{\setA \setu \setB}
%    &= \diam\setA + \diam\setB + \inf\set{\metric{x}{y}}{x,y\in\setA}
%  \\&\ge \diam\setA + \diam\setB
%  \\\implies & \text{$\diam$ is not a measure}
%    && \text{by definition of measure \ifdochas{measure}{\prefpo{def:measure}}}
%\end{align*}
%\end{proof}



























%=======================================
\section{Open and closed balls}
%=======================================
\pref{def:ball} (next) defines the \structe{open ball}.
In a \structe{metric space} \xref{def:metric}\index{space!metric}, 
sets are often specified in terms of an \prope{open ball};
and an open ball is specified in terms of a metric.
%---------------------------------------
\begin{definition}
\footnote{
  \citerp{ab}{35}
  }
\index{ball!open}
\index{ball!closed}
\label{def:ball}
\label{def:ballc}
%---------------------------------------
Let $\metspaceX$ be a \structe{metric space} \xref{def:metric}\index{space!metric}.
\defbox{\begin{array}{l>{\ds}l}
\text{An \hid{open ball} centered at $x$ with radius $r$ is the set} &
\ball{x}{r} \eqd \set{y\in\setX}{\metric{x}{y}<r}.
\\
\text{A  \hid{closed ball} centered at $x$ with radius $r$ is the set} &
\ballc{x}{r} \eqd \set{y\in\setX}{\metric{x}{y}\le r}.
\end{array}}
\end{definition}

Open balls will often ``appear" different in different metric spaces. 
Some examples include the following \xref{ex:taxicab}:\\
\setlength{\unitlength}{\tw/6000}
\begin{tabular}{cll>{\footnotesize(}l<{\footnotesize)}}
%\begin{tabular}{cl}%<{:}l>{\footnotesize(}l<{\footnotesize)}}
  \begin{picture}(300,350)(-130,-130)
    \thicklines
    \color{axis}%
      \put(-130,   0){\line(1,0){260} }%
      \put(   0,-130){\line(0,1){260} }%
    \color{blue}%
      \qbezier( 100,0)( 50, 50)(0, 100)%
      \qbezier(-100,0)(-50, 50)(0, 100)%
      \qbezier(-100,0)(-50,-50)(0,-100)%
      \qbezier( 100,0)( 50,-50)(0,-100)%
  \end{picture}
  & \prope{taxi-cab metric}%  & \pref{ex:ms_taxi} & \prefpo{ex:ms_taxi} 
  \\
  \begin{picture}(300,300)(-130,-130)
    \thicklines
    \color{axis}%
      \put(-130,   0){\line(1,0){260} }%
      \put(   0,-130){\line(0,1){260} }%
    \color{blue}\input{../common/circle.inp}%
  \end{picture}
  & \prope{Euclidean metric}% & \pref{ex:ms_euclidean} & \prefpo{ex:ms_euclidean} 
  \\
  \begin{picture}(300,300)(-130,-130)
    \thicklines
    \color{axis}%
      \put(-130,   0){\line(1,0){260} }%
      \put(   0,-130){\line(0,1){260} }%
    \color{blue}%
      \put(-100,-100){\line( 1, 0){200} }%
      \put(-100,-100){\line( 0, 1){200} }%
      \put( 100, 100){\line(-1, 0){200} }%
      \put( 100, 100){\line( 0,-1){200} }%
  \end{picture}
  & \prope{sup metric}% & \pref{ex:ms_sup} & \prefpo{ex:ms_sup} 
%  \\
%  \begin{picture}(300,300)(-130,-130)%
%    %{\color{graphpaper}\graphpaper[10](-150,-150)(300,300)}%
%    \thicklines%
%    \color{axis}%
%      \put(-130,   0){\line(1,0){260} }%
%      \put(   0,-130){\line(0,1){260} }%
%    \color{blue}%
%      \qbezier( 100,0)(0,0)(0, 100)%
%      \qbezier( 100,0)(0,0)(0,-100)%
%      \qbezier(-100,0)(0,0)(0,-100)%
%      \qbezier(-100,0)(0,0)(0, 100)%
%  \end{picture}
%  & \prope{parabolic metric} & \pref{ex:ms_parabolic} & \prefpo{ex:ms_parabolic}
%  \\ 
%  \begin{picture}(400,400)(-200,-200)%
%    \thicklines%
%    \color{axis}%
%      \put(-200,   0){\line(1,0){400} }%
%      \put(   0,-200){\line(0,1){400} }%
%    \color{blue}%
%      \qbezier( 100,0)(100,100)(0, 100)%
%      \qbezier(-171,0)(-50,50)(0, 100)%
%      \qbezier(-171,0)(-50,-50)(0,-171)%
%      \qbezier( 100,0)(50,-50)(0,-171)%
%  \end{picture}
%  & \prope{exponential metric} & \pref{ex:ms_32x} & \prefpo{ex:ms_32x}
%  \\ 
%  \begin{picture}(300,300)(-150,-150)%
%    \thicklines%
%    \color{axis}%
%      \put(-130,   0){\line(1,0){260} }%
%      \put(   0,-130){\line(0,1){260} }%
%    \color{blue}%
%      \qbezier( 100,0)(70,70)(0, 100)%
%      \qbezier(-100,0)(-70,70)(0, 100)%
%      \qbezier(-100,0)(-70,-70)(0,-100)%
%      \qbezier( 100,0)(70,-70)(0,-100)%
%  \end{picture}
%  & \prope{tangential metric} & \pref{ex:ms_tan} & \prefpo{ex:ms_tan}
\end{tabular}


%======================================
%\subsection{Ordering relations}
%======================================
%======================================
%\subsection{Open ball ordering}
%======================================
%The unit ball generated in a metric space can be used to define an \rele{ordering relation}
%on the set of metric spaces.
%\pref{def:ms_order} (next) defines such an ordering relation.
%\prefpp{ex:ms_order} gives an example.

%%---------------------------------------
%\begin{definition}[Metric ordering relation]
%\label{def:ms_order}
%%---------------------------------------
%Let $\setX$ be a set.
%Let $\metspaceX$ be a metric space with unit ball $\ballsub{\metricn}{0}{1}$.
%Let $\opair{\setX}{\metrican}$ be a metric space with unit ball $\ballsub{\metrican}{0}{1}$.
%\defbox{
%  \metricn \le \metrican
%  \qquad\text{if}\qquad 
%  \ballsub{\metricn}{0}{1}\subseteq \ballsub{\metrican}{0}{1}
%  }
%\end{definition}



%---------------------------------------
% Metrics: l_1, l_2, l_infty, sqrtabs
%---------------------------------------
\begin{figure}[ht] \color{figcolor}
\begin{center}
\begin{fsL}
\setlength{\unitlength}{\tw/1000}
\begin{picture}(500,300)(-130,-130)%
  %{\color{graphpaper}\graphpaper[10](-150,-150)(300,300)}%
  \thicklines%
  \color{axis}%
    \put(-130,   0){\line(1,0){260} }%
    \put(   0,-130){\line(0,1){260} }%
    \put( 140,   0){\makebox(0,0)[l]{$x$}}%
    \put(   0, 140){\makebox(0,0)[b]{$y$}}%
    \put(-100, -10){\line(0,1){20} }%
    \put( 100, -10){\line(0,1){20} }%
    \put( -10,-100){\line(1,0){20} }%
    \put( -10, 100){\line(1,0){20} }%
    \put(  10, 110){\makebox(0,0)[bl]{$1$} }%
    \put(  10,-110){\makebox(0,0)[tl]{$1$} }%
    \put(-110,  10){\makebox(0,0)[br]{$1$} }%
    \put( 110,  10){\makebox(0,0)[bl]{$1$} }%
  \color{red}%
    \put(-100,   0){\line( 1, 1){100} }%
    \put(-100,   0){\line( 1,-1){100} }%
    \put( 100,   0){\line(-1, 1){100} }%
    \put( 100,   0){\line(-1,-1){100} }%
    \put(150,80){\makebox(0,0)[l]{unit ball in sup metric space}}%
    \put(140,80){\vector(-1, 0){40}}%
  \color{blue}%
    \input{../common/circle.inp}%
    \put(150,60){\makebox(0,0)[l]{unit ball in Euclidean metric space}}%
    \put(140,60){\vector(-1, 0){55}}%
  \color{red}%
    \put(-100,-100){\line( 1, 0){200} }%
    \put(-100,-100){\line( 0, 1){200} }%
    \put( 100, 100){\line(-1, 0){200} }%
    \put( 100, 100){\line( 0,-1){200} }%
    \put(150, 40){\makebox(0,0)[l]{unit ball in taxi-cab metric space}}%
    \put(140, 40){\vector(-1, 0){80}}%
  \color{blue}%
    \qbezier( 100,0)(0,0)(0, 100)%
    \qbezier( 100,0)(0,0)(0,-100)%
    \qbezier(-100,0)(0,0)(0,-100)%
    \qbezier(-100,0)(0,0)(0, 100)%
    \put(150,-40){\makebox(0,0)[l]{unit ball in square-root metric space}}%
    \put(140,-40){\vector(-1, 0){125}}%
  \color{red}%
    \put(0,0){\circle*{16}}%
    \put(-20,120){\makebox(0,0)[r]{unit ball in discrete metric space}}%
    \put(-60,110){\vector(1,-2){48}}%
\end{picture}
\end{fsL}
\end{center}
\caption{
   Balls on the set $\R^2$ using assorted metrics
   \label{fig:d_poset_balls}
   }
\end{figure}




%%---------------------------------------
%% Linearly ordered metrics
%%---------------------------------------
%\begin{minipage}[c]{\tw/4}
%%\begin{figure}[th]
%\begin{center}
%\footnotesize
%\setlength{\unitlength}{\tw/440}%
%\begin{picture}(500,850)(-60,0)%
%  \thicklines
%  %{\color{graphpaper}\graphpaper[50](-50,0)(100,520)}%
%  \color{picbox}%
%    \put( -50,750){\framebox(100,100){\color{blue}$\spX$}}%
%    \put( -50,600){\framebox(100,100){}}%
%    \put( -50,450){\framebox(100,100){}}%
%    \put( -50,300){\framebox(100,100){}}%
%    \put( -50,150){\framebox(100,100){}}%
%    \put( -50,  0){\framebox(100,100){}}%
%    %
%  \color{black}%
%    \put(   0,700){\line( 0, 1){ 50}}%
%    \put(   0,550){\line( 0, 1){ 50}}%
%    \put(   0,400){\line( 0, 1){ 50}}%
%    \put(   0,250){\line( 0, 1){ 50}}%
%    \put(   0,100){\line( 0, 1){ 50}}%
%    %
%  \color{blue}%
%    \put( 110, 800){\makebox(0,0)[l]{bounded metric}}%
%    \put( 110, 650){\makebox(0,0)[l]{taxi-cab metric}}%
%    \put( 110, 500){\makebox(0,0)[l]{Euclidean metric}}%
%    \put( 110, 350){\makebox(0,0)[l]{sup metric}}%
%    \put( 110, 200){\makebox(0,0)[l]{parabolic metric}}%
%    \put( 110,  50){\makebox(0,0)[l]{discrete metric}}%
%    %
%  \put(0,650){%
%    \setlength{\unitlength}{1\tw/(400*3)}%
%    \begin{picture}(0,0)(0,0)
%      \thicklines
%      \color{axis}%
%        \put(-130,   0){\line(1,0){260} }%
%        \put(   0,-130){\line(0,1){260} }%
%        %\put( 140,   0){\makebox(0,0)[l]{$x$}}%
%        %\put(   0, 140){\makebox(0,0)[b]{$y$}}%
%        \put(-100, -10){\line(0,1){20} }%
%        \put( 100, -10){\line(0,1){20} }%
%        \put( -10,-100){\line(1,0){20} }%
%        \put( -10, 100){\line(1,0){20} }%
%        %\put(  10, 110){\makebox(0,0)[bl]{$1$} }%
%        %\put(  10,-110){\makebox(0,0)[tl]{$-1$} }%
%        %\put(-110,  10){\makebox(0,0)[br]{$-1$} }%
%        %\put( 110,  10){\makebox(0,0)[bl]{$1$} }%
%      \color{blue}%
%        \put(-100,-100){\line( 1, 0){200} }%
%        \put(-100,-100){\line( 0, 1){200} }%
%        \put( 100, 100){\line(-1, 0){200} }%
%        \put( 100, 100){\line( 0,-1){200} }%
%    \end{picture}
%  }
%    \put(0,500){%
%      \setlength{\unitlength}{1\tw/(400*3)}%
%      \begin{picture}(0,0)(0,0)
%        \thicklines
%        \color{axis}%
%          \put(-130,   0){\line(1,0){260} }%
%          \put(   0,-130){\line(0,1){260} }%
%          %\put( 140,   0){\makebox(0,0)[l]{$x$}}%
%          %\put(   0, 140){\makebox(0,0)[b]{$y$}}%
%          \put(-100, -10){\line(0,1){20} }%
%          \put( 100, -10){\line(0,1){20} }%
%          \put( -10,-100){\line(1,0){20} }%
%          \put( -10, 100){\line(1,0){20} }%
%          %\put(  10, 110){\makebox(0,0)[bl]{$1$} }%
%          %\put(  10,-110){\makebox(0,0)[tl]{$-1$} }%
%          %\put(-110,  10){\makebox(0,0)[br]{$-1$} }%
%          %\put( 110,  10){\makebox(0,0)[bl]{$1$} }%
%        \color{blue}%
%          \input{../common/circle.inp}%
%      \end{picture}
%    }
%  \put(0,350){%
%    \setlength{\unitlength}{1\tw/(400*3)}%
%    \begin{picture}(0,0)(0,0)%
%      %{\color{graphpaper}\graphpaper[10](-150,-150)(300,300)}%
%      \thicklines%
%      \color{axis}%
%        \put(-130,   0){\line(1,0){260} }%
%        \put(   0,-130){\line(0,1){260} }%
%        %\put( 140,   0){\makebox(0,0)[l]{$x$}}%
%        %\put(   0, 140){\makebox(0,0)[b]{$y$}}%
%        \put(-100, -10){\line(0,1){20} }%
%        \put( 100, -10){\line(0,1){20} }%
%        \put( -10,-100){\line(1,0){20} }%
%        \put( -10, 100){\line(1,0){20} }%
%        %\put(  10, 110){\makebox(0,0)[bl]{$1$} }%
%        %\put(  10,-110){\makebox(0,0)[tl]{$-1$} }%
%        %\put(-110,  10){\makebox(0,0)[br]{$-1$} }%
%        %\put( 110,  10){\makebox(0,0)[bl]{$1$} }%
%      \color{blue}%
%        \qbezier( 100,0)(50,50)(0, 100)%
%        \qbezier( 100,0)(50,-50)(0,-100)%
%        \qbezier(-100,0)(-50,-50)(0,-100)%
%        \qbezier(-100,0)(-50,50)(0, 100)%
%    \end{picture}
%  }
%  \put(0,200){%
%    \setlength{\unitlength}{1\tw/(400*3)}%
%    \begin{picture}(0,0)(0,0)%
%      %{\color{graphpaper}\graphpaper[10](-150,-150)(300,300)}%
%      \thicklines%
%      \color{axis}%
%        \put(-130,   0){\line(1,0){260} }%
%        \put(   0,-130){\line(0,1){260} }%
%        %\put( 140,   0){\makebox(0,0)[l]{$x$}}%
%        %\put(   0, 140){\makebox(0,0)[b]{$y$}}%
%        \put(-100, -10){\line(0,1){20} }%
%        \put( 100, -10){\line(0,1){20} }%
%        \put( -10,-100){\line(1,0){20} }%
%        \put( -10, 100){\line(1,0){20} }%
%        %\put(  10, 110){\makebox(0,0)[bl]{$1$} }%
%        %\put(  10,-110){\makebox(0,0)[tl]{$-1$} }%
%        %\put(-110,  10){\makebox(0,0)[br]{$-1$} }%
%        %\put( 110,  10){\makebox(0,0)[bl]{$1$} }%
%      \color{blue}%
%        \qbezier( 100,0)(0,0)(0, 100)%
%        \qbezier( 100,0)(0,0)(0,-100)%
%        \qbezier(-100,0)(0,0)(0,-100)%
%        \qbezier(-100,0)(0,0)(0, 100)%
%    \end{picture}
%  }
%  \put(0,50){%
%    \setlength{\unitlength}{1\tw/(400*3)}%
%    \begin{picture}(0,0)(0,0)%
%      %{\color{graphpaper}\graphpaper[10](-150,-150)(300,300)}%
%      \thicklines%
%      \color{axis}%
%        \put(-130,   0){\line(1,0){260} }%
%        \put(   0,-130){\line(0,1){260} }%
%        %\put( 140,   0){\makebox(0,0)[l]{$x$}}%
%        %\put(   0, 140){\makebox(0,0)[b]{$y$}}%
%        \put(-100, -10){\line(0,1){20} }%
%        \put( 100, -10){\line(0,1){20} }%
%        \put( -10,-100){\line(1,0){20} }%
%        \put( -10, 100){\line(1,0){20} }%
%        %\put(  10, 110){\makebox(0,0)[bl]{$1$} }%
%        %\put(  10,-110){\makebox(0,0)[tl]{$-1$} }%
%        %\put(-110,  10){\makebox(0,0)[br]{$-1$} }%
%        %\put( 110,  10){\makebox(0,0)[bl]{$1$} }%
%      \color{blue}%
%        \put(0, 0){\circle*{50}}%
%    \end{picture}
%  }
%\end{picture}
%\end{center}
%\end{minipage}
%\begin{minipage}[c]{3\tw/4}
%%---------------------------------------
%\begin{example}[Metric ordering relation]
%\label{ex:ms_order}
%\index{order!metric}
%%---------------------------------------
%\hspace{1pt},
%\begin{liste}
%  \item The unit balls in several metric spaces is illustrated in 
%        \prefpp{fig:d_poset_balls}.\footnotemark
%  \item These balls are subsets/supersets of each other.
%  \item Hence by \prefpp{def:ms_order}, 
%        these metrics form a \structe{linearly ordered set}.
%  \item The discrete metric is the greatest lower bound.
%  \item This linear ordering relation is illustrated by the figure to the left.
%\end{liste}
%\end{example}
%\end{minipage}
%\citetblt{
%  \citerp{michel1993}{354},
%  \citerp{giles1987}{29},
%  \citerp{hausdorff1937e}{116}
%  }



%%---------------------------------------
%\begin{theorem}
%\footnote{
%  \citerpp{isham1999}{10}{11},
%  \citor{birkhoff1933}
%  }
%%---------------------------------------
%\thmbox{\begin{array}{rc>{\ds}l}
%  \metricsub{1}{x}{y} \join \metricsub{2}{x}{y} 
%    &\eqd& \max\brb{\metricsub{1}{x}{y},\, \metricsub{2}{x}{y}} 
%    \\
%  \metricsub{1}{x}{y} \meet \metricsub{2}{x}{y} 
%    &\eqd& \inf_{\seqn{x=x_1,x_2,\ldots,x_n=y}} \sum_{i=1}^{n-1} \brb{\metricsub{1}{x_i}{x_{i+1}},\, \metricsub{2}{x_i}{x_{i+1}}}
%\end{array}}
%\end{theorem}
%

\begin{figure}[th]
  \centering
  \includegraphics{../common/math/graphics/pdfs/ballinball.pdf}
  \caption[Every point in an \sete{open ball} \xref{def:ball} is contained in an {open ball} that is contained in the original open ball]{
  Every point in an open ball is contained in an open ball that is contained in the original open ball
  \xref{lem:openball_openset}
  \label{fig:ms_openball_openset}
  }
\end{figure}
\pref{lem:openball_openset} (next) demonstrates that 
every point in an open ball is contained in an open ball that is contained in the original open ball
(see \prefp{fig:ms_openball_openset} for an illustration).
%---------------------------------------
\begin{lemma}
\label{lem:openball_openset}
\footnote{
  \citerppg{rosenlicht}{40}{41}{0486650383},
  \citerpg{ab}{35}{0120502577}
  }
%---------------------------------------
Let $\balln$ be an \sete{open ball} \xref{def:ball} in a \structe{metric space} $\metspaceX$.
\lembox{
  p \in \ball {x}{r}  \qquad\iff\qquad \exists r_p \st \ball{p}{r_p}\subseteq\ball{x}{r}
  }
\end{lemma}
\begin{proof}

\begin{enumerate}
  \item lemma: Proof that $p\in\ball{x}{r}\implies\exists r_p\in\Rp \st r_p<r-\metric{\theta}{p}$:\label{item:openball_openset_lem}
    \begin{align*}
      p\in\ball{x}{r}
        &\iff \metric{\theta}{p} < r
        && \text{by definition of \structe{open ball} \xref{def:ball}}
      \\&\iff 0<r-\metric{\theta}{p} 
        && \text{by property of real numbers}
      \\&\implies \exists r_p\in\Rp \st 0<r_p<r-\metric{\theta}{p}
        && \text{by property of real numbers}
    \end{align*}

  \item Proof for ($\implies$) case:
    \begin{align*}
      \ball{p}{r_p}
        &\eqd \set{x\in\setX}{\metric{p}{x}<r_p\in\Rp}
        &&    \text{by definition of \structe{open ball} \xref{def:ball}}
      \\&\subseteq \set{x\in\setX}{\metric{p}{x}<r-\metric{\theta}{p}}
        &&    \text{by left hypothesis and \pref{item:openball_openset_lem}}
      \\&=    \set{x\in\setX}{\metric{p}{x}+\metric{\theta}{p}<r}
        &&    \text{by property of real numbers}
      \\&=    \set{x\in\setX}{\metric{\theta}{p}+\metric{p}{x}<r}
        &&    \text{by \prope{symmetry} of metrics \xref{def:metric}}
      \\&\subseteq \set{x\in\setX}{\metric{\theta}{x}<r}
        &&    \text{by \prope{subadditive} property \xref{def:metric},}
      \\&&&\qquad\text{$\metric{\theta}{x}\le\metric{\theta}{p}+\metric{p}{x}$}
    \end{align*}

    %\begin{enumerate}
    %  \item Let $\ball{\theta}{r}$ be an open ball centered at $\theta$ and with radius $r$.
    %
    %  \item By the definition of open sets (\prefp{lem:ms_open}),
    %        for $\ball{\theta}{r}$ to be an open set,
    %        at each point $p$ in $\ball{\theta}{r}$ there must be another 
    %        open ball $\ball{p}{r_p}$ such that 
    %        \[ \ball{p}{r_p} \subseteq \ball{\theta}{r} \qquad \forall p\in\ball{\theta}{r}. \]
    %
    %  \item Thus for $\ball{\theta}{r}$ to be an open set,
    %        any point $q$ in any inner balls $\ball{p}{r_p}$ must also be contained
    %        in $\ball{\theta}{r}$. That is
    %        \[ \metric{\theta}{q} < r \qquad\implies\qquad \ball{\theta}{r} \text{ is an open set.}\]
    %
    %  \item And in fact, every such point $q$ is less than a distance $r$ away from center $\theta$, 
    %        which can be proven as follows:
    %        \begin{align*}
    %          \metric{\theta}{q}
    %            &\le \metric{\theta}{p} + \metric{p}{q}
    %            &&   \text{by triangle inequality (\prefpo{def:metric})}
    %          \\&<   \metric{\theta}{p} + 
    %                 \mcoml{r-\metric{\theta}{p}}{upper bound of radius of inner ball}
    %            &&   \text{because $q$ is inside inner ball}
    %          \\&=   r
    %        \end{align*}
    %
    %  \item Therefore, every open ball is an open set.
    %\end{enumerate}

  \item Proof for ($\impliedby$) case:
    \begin{align*}
      p &=    \set{x\in\setX}{\metric{p}{x}=0}
        &&    \text{by \prope{nondegenerate} property of metrics: \prefp{def:metric}}
      \\&\subseteq \set{x\in\setX}{\metric{p}{x}<r_p\in\Rp}
        &&    \text{because $0<r_p$}
      \\&\eqd \ball{p}{r_p}
        &&    \text{by definition of \structe{open ball} \xref{def:ball}}
      \\&\subseteq \ball{x}{r}
        &&    \text{by right hypothesis}
    \end{align*}

\end{enumerate}

\end{proof}



%=======================================
\section{Topological structure}
%=======================================
%=======================================
\subsection{Topologies induced by metrics}
\label{sec:topmetric}
%=======================================
\prefpp{thm:(X,d)->(X,t)} shows that in a \structe{metric space} \xref{def:metric}\index{space!metric} $\metspaceX$,
the metric $\metricn$ always induces a topology $\topT$ on $\setX$.
The set $\setX$ together with  topology $\topT$ is a \structe{topological space}.
More specifically, the set of \structe{open balls} in a metric space form a \structe{base} for a \structe{topological space}.
Therefore, {\em every} \structe{metric space} \xref{def:metric}\index{space!metric} {\em is} a topological space,
and everything that is true of a topological space is also true for all \structe{metric space}\index{space!metric}s.
%That is, \structe{metric space} \xref{def:metric}\index{space!metric}s {\em inherit} all the properties of topological spaces.
%Any theorem that is true for topological spaces is also true for \structe{metric space} \xref{def:metric}\index{space!metric}s.
%Moreover, any definition that is used in topological spaces can also be used in \structe{metric space} \xref{def:metric}\index{space!metric}s.

%---------------------------------------
\begin{theorem}
\label{thm:(X,d)->(X,t)}
%---------------------------------------
Let $\metspaceX$ be a \structe{metric space} \xref{def:metric}.
\thmbox{\begin{array}{M}
  The set of all \structe{open balls} in $\metspaceX$ is a \structe{base} for the topological space $\topspaceX$ where
  \\\indentx
  $\ds\topT \eqd \set{\setU\in\psetX}{\text{$\setU$ is the union of balls in $\metspaceX$}}$.
\end{array}}
\end{theorem}
\begin{proof}
\begin{enumerate}
  \item The set of all \structe{open balls} in $\metspaceX$ is a \structe{base} for $\topspaceX$ by 
        \prefpp{lem:openball_openset} and \prefpp{thm:basex}.
        
  \item $\topT$ is a topology on $\setX$ by \prefpp{def:baseB}.
\end{enumerate}
\end{proof}

%=======================================
\subsection{Open and closed sets}
%=======================================
\pref{cor:ms_open} (next) identifies four fundamental properties of open sets in
metric spaces.
These properties are the same as those defining a topology\ifsxref{topology}{def:topology}.
%---------------------------------------
\begin{corollary}
%\footnote{
%  \citerpp{dieudonne1969}{33}{34},
%  \citerpg{rosenlicht}{39}{0486650383}
%  %\citerp{giles1987}{215},
%  %\citerpg{davis2005}{19}{0071243399}
%  %\citerpg{ab}{35}{0120502577}
%  }
\label{cor:ms_open}
\index{space!metric}
%---------------------------------------
Let $\metspaceX$ be a \structe{metric space} \xref{def:metric}.
\corbox{\begin{array}{F lll>{\ds}l l}
    1. &                                          &                         &          & \setX                                   & \text{is \prope{open}.}\\
    2. &                                          &                         &          & \emptyset                               & \text{is \prope{open}.}\\
    3. & \setxn{\setU_n}                          & \text{are \prope{open}} & \implies & \setopi_{n=1}^\xN \setU_n               & \text{is \prope{open}.}\\
    4. & \set{\setU_\gamma\in\psetX}{\gamma\in\R} & \text{are \prope{open}} & \implies & \setopu_{\gamma\in\Gamma} \setU_\gamma  & \text{is \prope{open}.} 
  \end{array}}
\end{corollary}
\begin{proof}
\begin{enumerate}
  \item The \structe{metric space} $\metspaceX$ is a \structe{topological space} by \prefpp{thm:(X,d)->(X,t)}.
  \item The four properties are true for any topological space by \prefpp{thm:kuratowski_open}.
\end{enumerate}

%\begin{enumerate}
%  \item Proof that $\setX$ is open:
%    \begin{enumerate}
%      \item By definition of the open set (\prefp{lem:ms_open}), 
%            $\setX$ is open if and only if for each point $x$ in $\setX$,
%            there is an open ball $\ball{x}{r}$ contained in $\setX$.
%
%      \item By the definition of open balls in a metric space $\metspaceX$
%            (\prefp{def:ball}), \emph{every} open ball is contained in $\setX$:
%            \[ \ball{x}{r} \eqd \set{y\in\setX}{\metric{x}{y}< r}. \]
%
%      \item Therefore, because the balls at each point $x$ in $\setX$
%            are contained in $\setX$, $\setX$ is an open set.
%    \end{enumerate}
%
%  \item Proof that $\emptyset$ is open:
%    \begin{enumerate}
%      \item By definition of the open set (\prefp{lem:ms_open}), 
%            $\emptyset$ is open if and only if for each point $x$ in $\emptyset$,
%            there is an open ball $\ball{x}{r}$ contained in $\setX$.
%
%      \item But by the definition of $\emptyset$ (empty set),
%            there are no elements in the set $\emptyset$.
%            And therefore, all balls in $\emptyset$ are contained in $\emptyset$:
%            \[ \ball{x}{r} \eqd \set{y\in\emptyset}{\metric{x}{y}< r} = \emptyset \subseteq \emptyset. \]
%
%      \item Therefore, $\emptyset$ is an open set.
%    \end{enumerate}
%
%  \item Proof that $\seq{\setA_i}{i=1,2,\ldots,\xN}$ are open $\implies$ $\setopi_{i=1}^n \setA_i$ is open:
%    \begin{align*}
%      \seqn{\setA_i} \text{ are open}
%        &  \iff
%        && \bigwedge_{i=1}^n \Big[\forall x\in\setA_i,\; \exists r_i>0 \st \ball{x}{r_i}\subseteq\setA_i \Big]
%        && \text{by definition of open set (\prefpo{lem:ms_open})}
%      \\&  \implies
%        && \bigwedge_{i=1}^n \Big[\forall x\in\setopi_{i=1}^n \setA_i,\; \exists r_i>0 \st \ball{x}{r_i}\subseteq\setA_i \Big]
%        && \text{because $\setA_i \subseteq \setopi\setA_i$}
%      \\&  \implies
%        && \bigwedge_{i=1}^n \Big[\forall x\in\setopi_{i=1}^n \setA_i,\; \exists r>0 \st \ball{x}{r}\subseteq\setA_i \Big]
%        && \text{where $r\eqd\min\setn{r_1,r_2,\ldots,r_n}$}
%      \\&  \implies
%        && \forall x\in\setopi_{i=1}^n \setA_i,\; \exists r>0 \st \ball{x}{r}\subseteq\setopi_{i=1}^n \setA_i
%        && \text{because $\ball{x}{r}$ is in all the $\setA_i$}
%      \\&  \iff
%        && \setopi_{i=1}^n \setA_i \text{ is open}
%        && \text{by definition of open set (\prefpo{lem:ms_open})}
%    \end{align*}
%
%  \item Proof that $\seq{\setA_n}{n\in\Z}$ are open $\implies$ $\setopu_{n\in\Z} \setA_n$ is open:
%    \begin{align*}
%      \seqn{\setA_n} \text{ are open}
%        &  \iff
%        && \bigwedge_{n\in\Z} \Big[\forall x\in\setA_n,\; \exists r_i>0 \st \ball{x}{r_n}\subseteq\setA_n \Big]
%        && \text{by definition of open set (\prefpo{lem:ms_open})}
%      \\&  \implies
%        && \forall x\in\setopu_n\setA_n,\; \exists r_n>0 \st \ball{x}{r_n}\subseteq\setopu_{n\in\Z}\setA_n 
%      \\&  \implies
%        && \setopu_{n\in\Z}\setA_n \text{ is open}
%        && \text{by definition of open set (\prefpo{lem:ms_open})}
%    \end{align*}
%\end{enumerate}
%
\end{proof}

\begin{figure}[th]
  \center
  \input{../common/math/graphics/ballinopen.tex}
  \caption[Every point in an open set is contained in an open ball that is contained in the original open set]{
  Every point in an open set is contained in an open ball that is contained in the original open set
  \xref{lem:ms_open}
  \label{fig:ms_open}
  }
\end{figure}
\pref{lem:ms_open} (next) demonstrates that every point in an open set is contained in an open ball that is 
contained in the original open set (see also \prefp{fig:ms_open}).
%---------------------------------------
\begin{lemma}
\label{lem:ms_open}
%---------------------------------------
Let $\metspaceX$ be a \structe{metric space} \xref{def:metric}\index{space!metric}.
\lembox{
  \brb{\text{$\setU\in\psetX$ is \hid{open} in $\metspaceX$}}
  \qquad\iff\qquad
  \brb{\begin{array}{l}
    \forall x\in\setU,\; \exists r\in\Rp \st
    \\\indentx
    \ball{x}{r}\subseteq \setU
  \end{array}}
  %\\
  %\mc{4}{l}{\text{A set $\setD$ is \hid{closed} in $\metspaceX$ if}},
  %  & 1.& \setD\subseteq\setX & \text{and},
  %  & 2.& \cmpD \text{ is open.}
  }
\end{lemma}
\begin{proof}
\begin{enumerate}
  \item Proof for ($\implies$) case: %that $\setU$ is \prope{open} $\implies$ $\ball{x}{r}\subseteq\setU$:
    \begin{align*}
      \setU
        &= \Setu\set{\ball{x_\gamma}{r_\gamma}}{\ball{x_\gamma}{r_\gamma}\subseteq\setU}
        && \text{by left hypothesis and \prefp{thm:(X,d)->(X,t)}}
      \\&\supseteq \ball{x}{r}
        && \text{because $x$ must be in one of those balls in $\setU$}
        %&& \text{by \prefp{lem:openball_openset}}
    \end{align*}

  \item Proof for ($\impliedby$) case:  %that $\setU$ is \prope{open} $\impliedby$ $\ball{x}{r}\subseteq\setU$:
    \begin{align*}
      \setU 
        &= \Setu\set{x\in\setX}{x\in\setU}
        && \text{by definition of union operation $\Setu$}
      \\&= \Setu\set{\ball{x}{r}}{x\in\setU\text{ and }\ball{x}{r}\subseteq\setU}
        && \text{by right hypothesis}
      \\&\implies \text{$\setU$ is \prope{open}}
        && \text{by \prefp{thm:(X,d)->(X,t)} and \prefp{cor:ms_open}}
    \end{align*}
\end{enumerate}
\end{proof}




%%---------------------------------------
%\begin{theorem}
%%---------------------------------------
%Let $\metspaceX$ be a metric space and $\setA\subseteq\setX$.
%Let $\ball{\theta}{r}$ be an open ball centered at $\theta$ and with radius $r$.
%\thmbox{
%  \setA=\set{a_n}{n\in\Z} \text{ is an open set}
%  \qquad\iff\qquad
%  \exists\seq{r_n>0}{n\in\Z}\st
%  \setA=\setopu_{n\in\Z} \ball{a_n}{r_n}
%  }
%\end{theorem}
%\begin{proof}
%\begin{enumerate}
%  \item Proof that $\setA$ is open $\implies$ $\setA=\setopu_{n\in\Z} \ball{x_n}{r_n}$:
%    \begin{enumerate}
%      \item By \prefpp{lem:ms_open}, each point $x$ in $\setA$ has a ball $\ball{x}{r}$ in $\setA$.
%      \item Because each element has a ball, $\setA \subseteq \setopu_{n\in\Z} \ball{x}{r}$.
%      \item Because the balls are all contained in $\setA$, $\setA \supseteq \setopu_{n\in\Z} \ball{x}{r}$.
%      \item Combining the previous two results, we have $\setA = \setopu_{n\in\Z} \ball{x}{r}$.
%    \end{enumerate}
%
%  \item Proof that $\setA$ is open $\impliedby$ $\setA=\setopu_{n\in\Z} \ball{x_n}{r_n}$:
%    \begin{enumerate}
%      \item By \prefpp{lem:openball_openset}, each open ball $\ball{x_n}{r_n}$ is an open set.
%      \item By \prefpp{cor:ms_open}, $\setopu_{n\in\Z} \ball{x_n}{r_n}$ is also open.
%    \end{enumerate}
%
%\end{enumerate}
%\end{proof}




%---------------------------------------
\begin{corollary}
%\footnote{
%  \citerp{dieudonne1969}{37},
%  \citerpg{rosenlicht}{41}{0486650383}
%  %\citerp{giles1987}{215},
%  %\citerpg{davis2005}{19}{0071243399}
%  %\citerpg{ab}{35}{0120502577}
%  }
\label{cor:ms_closed}
%---------------------------------------
Let $\metspaceX$ be a \structe{metric space} \xref{def:metric}. Let $\xN$ be a finite \sete{whole number}.
\corbox{
  \begin{array}{F lll>{\ds}l l}
    1. &                                             &                            &          & \setX                               & \text{is \prope{closed}.}  \\
    2. &                                             &                            &          & \emptyset                           & \text{is \prope{closed}.}  \\
    3. & \set{\setD_\gamma\in\psetX}{\gamma\in\R}    & \text{are \prope{closed}}  & \implies & \setopi_{\gamma\in\R} \setD_\gamma  & \text{is \prope{closed}.}  \\
    4. & \set{\setD_n\in\psetX}{n=1,2,\ldots,\xN}    & \text{are \prope{closed}}  & \implies & \setopu_{n=1}^\xN  \setD_n          & \text{is \prope{closed}.}  
  \end{array}
  }
\end{corollary}
\begin{proof}
\begin{enumerate}
  \item $\metspaceX$ is a \structe{topological space} by \prefp{thm:(X,d)->(X,t)}.
  \item The four properties are true of all topological spaces by \prefp{thm:ts_closed}.
\end{enumerate}
%
%\begin{enumerate}
%  \item Proof that $\setX$ is closed:
%    \begin{enumerate}
%      \item By \prefpp{lem:ms_open}, $\setX$ is closed if $\setopc\setX$ is open.
%      \item Because $\setopc\setX=\emptyset$, $\setX$ is closed if $\emptyset$ is open.
%      \item By \prefpp{cor:ms_open}, $\emptyset$ is open.
%      \item Therefore, $\setX$ is closed.
%    \end{enumerate}
%
%  \item Proof that $\emptyset$ is closed:
%    \begin{enumerate}
%      \item By \prefpp{lem:ms_open}, $\emptyset$ is closed if $\setopc\emptyset$ is open.
%      \item Because $\setopc\emptyset=\setX$, $\emptyset$ is closed if $\setX$ is open.
%      \item By \prefpp{cor:ms_open}, $\setX$ is open.
%      \item Therefore, $\emptyset$ is closed.
%    \end{enumerate}
%
%  \item Proof that $\seq{\setA_n\subseteq\setX}{n\in\Z} \text{ are closed sets } \implies \setopi_{n\in\Z} \setA_n  \text{is a closed set}$:
%    \begin{enumerate}
%      \item By \prefpp{lem:ms_open}, $\setopi_{n\in\Z} \setA_n$ is closed if 
%            $\setopc\brp{\setopi_{n\in\Z} \setA_n}$ is open.
%      \item By de Morgan's law (\prefp{thm:demorgan}), 
%        \[ \setopc\brp{\setopi_{n\in\Z} \setA_n}=\setopu_{n\in\Z} \cmpA_n \]
%      \item Since each $\setA_n$ is open, then by \prefpp{lem:ms_open}
%            each $\cmpA_n$ is closed.
%      \item Since each $\setA_n$ is open, then by \prefpp{lem:ms_open}
%            each $\cmpA_n$ is closed.
%    \end{enumerate}
%
%  \item Proof that $\seq{\setA_i\subseteq\setX}{i=1,2,\ldots,\xN} \text{ are closed sets } \implies \setopu_{i=1}^n  \setA_n   \text{ is a closed set}$:
%\end{enumerate}
\end{proof}


\begin{figure}[th]
  \center
  \input{../common/math/graphics/balloutball.tex}
  \caption[Every closed ball is a closed set]{
    Every closed ball is a closed set \xref{prop:cball_closed}
    \label{fig:ms_closedball_closedset}
    }
\end{figure}
%---------------------------------------
\begin{proposition}
\label{prop:oball_open}
\label{prop:cball_closed}
\footnote{
  \citerppg{rosenlicht}{40}{41}{0486650383},
  \citerpg{ab}{35}{0120502577}
  }
%---------------------------------------
Let $\balln$ be an \structe{open ball} and $\ballcn$ a \structe{closed ball} \xref{def:ball}
in a metric space $\metspaceX$.
\propbox{\begin{array}{MlMMC}
  Every \structe{open ball}   &\ball{x}{r}  & in $\metspaceX$ & is \prope{open}   & \forall x\in\setX\text{ and } \forall r\in\Rp.\\
  Every \structe{closed ball} &\ballc{x}{r} & in $\metspaceX$ & is \prope{closed} & \forall x\in\setX\text{ and } \forall r\in\Rp.
\end{array}}
\end{proposition}
\begin{proof}
\begin{enumerate}
  \item Proof that every open ball is open:
    \begin{align*}
        &\text{The union of any set of open balls is open}    && \text{by \prefp{thm:(X,d)->(X,t)}}
      \\&\qquad\text{$\implies$ the union of a set of just one open ball is open}
      \\&\qquad\text{$\implies$ every open ball is open.}
    \end{align*}

  \item lemma: $p\in\cmpp{\ballc{x}{r}}$ $\implies$ $r\le\metric{\theta}{p}-r_p$:\label{item:cball_closed_lem}
    %\begin{align*}
      
    %\end{align*}

  \item Proof that every closed ball is closed (see \prefp{fig:ms_closedball_closedset} for illustration):
    \begin{align*}
      \cmpp{\ballc{x}{r}}
        &\eqd \cmp{\set{x\in\setX}{\metric{\theta}{x}\le r}}
        &&    \text{by definition of \structe{closed ball} \xref{def:ballc}}
      \\&=    \set{x\in\setX}{\metric{\theta}{x}> r}
        &&    \text{by definition of set complement}
      \\&\supseteq \set{x\in\setX}{\metric{\theta}{x}> \metric{\theta}{p}-r_p}
        &&         \text{by \pref{item:cball_closed_lem}}
      \\&=     \set{x\in\setX}{\metric{\theta}{x}-\metric{\theta}{p}>-r_p}
        &&         \text{by property of real numbers}
      \\&=     \set{x\in\setX}{\metric{\theta}{p}-\metric{\theta}{x}<r_p}
        &&         \text{by property of real numbers}
      \\&=     \set{x\in\setX}{\metric{p}{\theta}-\metric{\theta}{x}<r_p}
        &&         \text{by \prope{symmetric} property of metrics \xref{def:metric}}
      \\&\supseteq \set{x\in\setX}{\metric{p}{x}<r_p}
        &&         \text{by \prefp{lem:subtri_ineq}}
      \\&\eqd  \ball{p}{r_p}
        &&     \text{by definition of \structe{open ball} \xref{def:ball}}
      \\&\iff  \text{$\cmpp{\ballc{\theta}{r}}$ is \prope{open}}
        &&     \text{by \prefp{lem:ms_open}}
      \\&\iff  \text{$\ballc{\theta}{r}$ is \prope{closed}}
        &&     \text{by definition of \structe{closed set} \xref{def:closedset}}
    \end{align*}

    %\begin{enumerate}
    %  \item lemma: Proof that $p\in\ball{x}{r}\implies\exists r_p\in\Rp \st r-\metric{\theta}{p}$:\label{item:openball_openset_lem}
    %    \begin{align*}
    %      p\in\ball{x}{r}
    %        &\implies \metric{\theta}{p} < r
    %        && \text{by definition of \structe{open ball} \xref{def:ball}}
    %      \\&\iff 0<r-\metric{\theta}{p} 
    %        && \text{by property of real numbers}
    %      \\&\implies \exists r_p\in\Rp \st 0<r_p<r-\metric{\theta}{p}
    %        && \text{by property of real numbers}
    %    \end{align*}
    %
    %  \item Proof for ($\implies$) case:
    %    \begin{align*}
    %      \ball{p}{r_p}
    %        &\eqd \set{x\in\setX}{\metric{p}{x}<r_p\in\Rp}
    %        &&    \text{by definition of \structe{open ball} \xref{def:ball}}
    %      \\&\subseteq \set{x\in\setX}{\metric{p}{x}<r-\metric{\theta}{p}}
    %        &&    \text{by left hypothesis and \pref{item:openball_openset_lem}}
    %      \\&=    \set{x\in\setX}{\metric{p}{x}+\metric{\theta}{p}<r}
    %      \\&=    \set{x\in\setX}{\metric{\theta}{p}+\metric{p}{x}<r}
    %      \\&\subseteq \set{x\in\setX}{\metric{\theta}{x}<r}
    %        &&    \text{by \prope{triangle inequality} of \prefp{def:metric}}
    %    \end{align*}
    
        %\begin{enumerate}
        %  \item Let $\ball{\theta}{r}$ be an open ball centered at $\theta$ and with radius $r$.
        %
        %  \item By the definition of open sets \xref{lem:ms_open},
        %        for $\ball{\theta}{r}$ to be an open set,
        %        at each point $p$ in $\ball{\theta}{r}$ there must be another 
        %        open ball $\ball{p}{r_p}$ such that 
        %        \[ \ball{p}{r_p} \subseteq \ball{\theta}{r} \qquad \forall p\in\ball{\theta}{r}. \]
        %
        %  \item Thus for $\ball{\theta}{r}$ to be an open set,
        %        any point $q$ in any inner balls $\ball{p}{r_p}$ must also be contained
        %        in $\ball{\theta}{r}$. That is
        %        \[ \metric{\theta}{q} < r \qquad\implies\qquad \ball{\theta}{r} \text{ is an open set.}\]
        %
        %  \item And in fact, every such point $q$ is less than a distance $r$ away from center $\theta$, 
        %        which can be proven as follows:
        %        \begin{align*}
        %          \metric{\theta}{q}
        %            &\le \metric{\theta}{p} + \metric{p}{q}
        %            &&   \text{by triangle inequality \xref{def:metric}}
        %          \\&<   \metric{\theta}{p} + 
        %                 \mcoml{r-\metric{\theta}{p}}{upper bound of radius of inner ball}
        %            &&   \text{because $q$ is inside inner ball}
        %          \\&=   r
        %        \end{align*}
        %
        %  \item Therefore, every open ball is an open set.
        %\end{enumerate}
    
     % \item Proof for ($\impliedby$) case:
     %   \begin{align*}
     %     p &=    \set{x\in\setX}{\metric{p}{x}=0}
     %       &&    \text{by \prope{nondegenerate} property of metrics: \prefp{def:metric}}
     %     \\&\subseteq \set{x\in\setX}{\metric{p}{x}<r_p\in\Rp}
     %       &&    \text{because $0<r_p$}
     %     \\&\eqd \ball{p}{r_p}
     %       &&    \text{by definition of \structe{open ball} \xref{def:ball}}
     %     \\&\subseteq \ball{x}{r}
     %       &&    \text{by right hypothesis}
     %   \end{align*}
     %
     %\end{enumerate}
    
    %  \item Proof that every closed ball is closed (see \prefp{fig:ms_closedball_closedset} for illustration\citep{rosenlicht}{41}):
    %    \begin{enumerate}
    %      \item Let $\ballc{\theta}{r}$ be a closed ball centered at $\theta$ and with radius $r$.
    %    
    %      \item By the definition of closed sets \xref{def:closedset},
    %            for $\ballc{\theta}{r}$ to be a closed set,
    %            $\cmpp{\ballc{\theta}{r}}$ must be an open set.
    %    
    %      \item For $\cmpp{\ballc{\theta}{r}}$ to be an open set,
    %            at each point $p$ in $\cmpp{\ballc{\theta}{r}}$ there must be another 
    %            open ball $\ball{p}{r_p}$ such that 
    %        \\\indentx$\ds\ball{p}{r_p} \subseteq \cmpp{\ballc{\theta}{r}} \qquad \forall p\in\cmpp{\ballc{\theta}{r}}$.
    %    
    %      \item Thus for $\cmpp{\ballc{\theta}{r}}$ to be an open set,
    %            any point $q$ in any outer ball $\ball{p}{r_p}$ must also be contained
    %            in $\cmpp{\ballc{\theta}{r}}$. That is
    %        \\\indentx$\ds
    %               \metric{\theta}{q} > r 
    %               \qquad\implies\qquad \cmpp{\ballc{\theta}{r}} \text{ is an open set}
    %               \qquad\implies\qquad \ballc{\theta}{r} \text{ is a closed set.}
    %             $
    %    
    %      \item The radius of an outer ball has a least upper bound (l.u.b.) of $\metric{\theta}{p} - r$.
    %
    %      \item And in fact, every such point $q$ is greater than a distance $r$ away from center $\theta$, 
    %            which can be proven as follows:
    %            \begin{align*}
    %              \metric{\theta}{p}
    %                &=   \metric{\theta}{p} + \mcom{\metric{p}{q} - \metric{p}{q}}{$0$}
    %              \\&\ge \metric{\theta}{p} - \metric{p}{q}
    %                &&   \text{by positive property of metrics \xref{def:metric}}
    %              \\&>   \metric{\theta}{p} - \mcoml{\brs{\metric{\theta}{p} - r}}{l.u.b. of outer ball radius}
    %              \\&=   r
    %            \end{align*}
    %    
    %      \item Therefore, every closed ball is a closed set.
    %\end{enumerate}
\end{enumerate}
\end{proof}




In a metric space, all finite sets are \prope{closed} (\pref{prop:ms_closed_finite}, next).
This is \emph{not} in general true for a topological space \xref{cnt:ts_closed_finite}.
%---------------------------------------
\begin{proposition}
\label{prop:ms_closed_finite}
\footnote{
  \citerpg{rosenlicht}{42}{0486650383}
  }
%---------------------------------------
Let $\metspaceX$ be a \structe{metric space} \xref{def:metric}.
\propbox{\begin{array}{FlD>{\text{is \prope{closed} in $\metspaceX$.}}l}
  1. & \setn{x\in\setX} & (a single element set) &
    \\ 
  2. & \setn{x_1,x_2,\ldots,x_n\in\setX} & (set with finite number of elements) &
    \\
  3. & \set{x\in\setX}{\metric{\theta}{x}=r,\,\theta\in\setX} & (ring centered at $\theta$ with radius $r$) &
\end{array}}
\end{proposition}
\begin{proof}
\begin{enumerate}
  \item Proof that any single element set is closed:
    \begin{enumerate}
      \item Let $\seq{\ballc{x_n}{r_n}}{n\in\Z}$ be a sequence of all the closed balls containing $a$.
      \item Then $\setn{a} = \setopi_{n\in\Z} \ballc{x_n}{r_n}$.
      \item By \prefp{prop:cball_closed}, every closed ball $\ballcn$ is a closed set.
      \item By \prefp{cor:ms_closed}, the infinite intersection of closed sets is also closed.
            So, $\setopi_{n\in\Z} \ballc{x_n}{r_n}$ is closed.
      \item Therefore, $\setn{x}$ is closed.
    \end{enumerate}

  \item Proof that any finite element set is closed:
    \begin{enumerate}
      \item By the previous result, any single element set $\setn{x}$ is closed.
      \item By \prefpp{cor:ms_closed}, the finite union of closed sets is also closed.
      \item Therefore, 
            \[ \setn{x_1,x_2,\ldots,x_n} = \setopu_{i=1}^n \setn{x_i} \]
            is closed.
    \end{enumerate}

  \item Proof that any ring is closed:
    \begin{enumerate}
      \item By \prefpp{prop:cball_closed}, the closed ball $\ballc{\theta}{r}$ is a closed set.
      \item By \prefpp{prop:oball_open}, the open ball $\ball{\theta}{r}$ is an open set and
            by \prefpp{def:closedset}, its complement $\cmpp{\ball{\theta}{r}}$ is a closed set.
      \item By \prefpp{cor:ms_closed},
            the intersection of the two closed sets   
            $\ds\ballc{\theta}{r} \seti \brp{\cmpp{\ball{\theta}{r}}}$
            is also a closed set.
      \item Therefore, the ring is a closed set because
        \[ \mcom{\set{x\in\setX}{\metric{\theta}{x}=r}}{ring} 
           = 
           \mcom{\ballc{\theta}{r} \seti \brp{\cmpp{\ball{\theta}{r}}}}{intersection of two closed sets}. 
        \]
    \end{enumerate}
\end{enumerate}
\end{proof}

%---------------------------------------
\begin{counterex}
\label{cnt:ts_closed_finite}
\index{Serpi/'nski spaces}
%---------------------------------------
Unlike \structe{metric space}s \xref{prop:ms_closed_finite}, 
a finite set in a \structe{topological space} \xref{def:topology} $\topspaceX$ 
is \emph{not} in general \prope{closed} \xref{def:clsA}.
\cntbox{\begin{array}{M}
  The finite set $\setn{x}$ is \emph{not} closed in the topological space (a \structe{Serpi/'nski space})
  \\\indentx
  $\ds\topspace{\mcom{\setn{x,y}}{$\setX$}}{\mcom{\setn{\emptyset,\,\setn{x},\,\setn{x,y}}}{$\topT$}}$.
\end{array}}
\end{counterex}
\begin{proof}
\begin{enumerate}
  \item A set is \prope{closed} if it is the complement of an open set \xref{def:closedset}.
  \item The set $\setn{x}$ is \emph{not} the complement of any open set in the topology.
  \item Therefore, $\setn{x}$ is not closed.
\end{enumerate}
\end{proof}

%%======================================
%\subsection{Cluster points}
%%======================================
%
%%---------------------------------------
%\begin{definition}
%\label{def:ms_cluster}
%\citepg{davis2005}{21}{0071243399}
%%---------------------------------------
%Let $\balln$ be an open ball in the metric space $\metspaceX$.
%\defbox{\begin{array}{l}
%  \text{$x$ is a \hid{cluster point} in the metric space $\metspaceX$ of the subset $\setA\subseteq\setX$ if}
%  \\
%  \qquad \forall r>0,\; \exists y\in\setA \st y\in\ball{x}{r} \text{ and } x\ne y. 
%\end{array}}
%\end{definition}
%
%%---------------------------------------
%\begin{definition}
%\label{def:ms_derived_set}
%\footnote{
%  \citerpgc{giles1987}{77}{0521359287}{4.34 Definition, dense},
%  \citerpg{copson1988}{38}{0521357322},
%  \citerpgc{khamsi2001}{33}{0471418250}{Definition 2.8, dense},
%  \citerpg{davis2005}{21}{0071243399}
%  }
%%---------------------------------------
%Let $\balln$ be an open ball in the metric space $\metspaceX$.
%\defbox{\begin{array}{lrcl}
%  \mc{4}{l}{\text{The \hid{derived set} $\drvA$ in the metric space $\metspaceX$ of the subset $\setA\subseteq\setX$ is}}
%    \\& \drvA &\eqd& \set{x\in\setX}{\text{$x$ is a cluster point}}.
%  \\
%  \mc{4}{l}{\text{The \hid{closure} $\clsA$ in the metric space $\metspaceX$ of the subset $\setA\subseteq\setX$ is}}
%    \\& \clsA &\eqd& \setA \setu \drvA.
%  \\
%  \mc{4}{l}{\text{A set $\setY$ is \hid{dense} in the set $\setX$ if}}
%    \\& \clsY &=& \setX.
%  \\
%  \mc{4}{l}{\text{The set $\setX$ is \hid{separable} if there exists a countable set $\setY$ that is dense in $\setX$.}}
%\end{array}}
%\end{definition}








%The topological sets defined in \prefpp{def:ts_sets} are defined in terms
%of {\em neighborhoods}.
%In a \structe{metric space} \xref{def:metric}\index{space!metric}, neighborhoods can be generated by {\em open balls};
%and these open balls in turn can be used to define (next definition) sets similar
%to those of topological spaces.
%%---------------------------------------
%\begin{definition}
%\citepp{ab}{35}{38}
%\index{interior}
%\index{interior point}
%\index{closure point}
%\index{boundary point}
%\index{accumulation point}
%\index{derived set}
%\label{def:interior}
%\label{def:int_pnt}
%\label{def:closure_pnt}
%\label{def:boundary_pnt}
%%---------------------------------------
%Let $\metspaceX$ be a \structe{metric space} \xref{def:metric}\index{space!metric}.\\
%If $\opN x \eqd \set{\ball{x}{r}}{r>0}$,
%then the following terms all have the same definitions as given in
%\prefpp{def:ts_sets}:  \\
%\hie{interior}, \hie{closure}, \hie{boundary}, \hie{derived set},
%\hie{interior point}, \hie{closure point}, \hie{boundary point}, and \hie{accumulation point}.
%\end{definition}

\ifexclude{wsd}{
%=======================================
\subsection{Equivalence and Order on metric spaces}
%=======================================
%---------------------------------------
\begin{definition}
\footnote{
  \citerpg{davis2005}{20}{0071243399}
  }
%---------------------------------------
Let $\opair{\setX}{\metricn_1}$ be a \structe{metric space} \xref{def:metric}\index{space!metric} that induces the \structe{topology} \xref{def:topology} $\opair{\setX}{\topT_1}$
and $\opair{\setX}{\metricn_2}$ be a \structe{metric space}  that induces the \structe{topology} $\opair{\setX}{\topT_2}$.
\defbox{\begin{array}{M}
$\metricn_1$ and $\metricn_2$ are \hid{equivalent} if 
\\\indentx$\topT_1=\topT_2$.
\end{array}}
\end{definition}

%---------------------------------------
\begin{theorem}
\footnote{
  \citerpg{davis2005}{20}{0071243399}
  }
\label{thm:d1<ad2}
%---------------------------------------
Let $\setn{B_1(x,y)}$ be \structe{open ball}s \xref{def:ball} on a \structe{metric space} \index{space!metric} $\opair{\setX}{\metricn_1}$
that induces the \structe{topology} $\opair{\setX}{\topT_1}$
and $\setn{B_2(x,y)}$ be \structe{open ball}s on a \structe{metric space} \index{space!metric} $\opair{\setX}{\metricn_2}$
that induces the \structe{topology} $\opair{\setX}{\topT_2}$.
\thmbox{
  \left.
  \begin{array}{Fl}
    1. & \exists \alpha>0 \st \metricsub{1}{x}{y} \le \alpha\metricsub{2}{x}{y}\\ 
       & \forall x,y\in\setX \quad \text{\scs and}\\
    2. & \setU \text{ is open in $\opair{\setX}{\metricn_1}$}
  \end{array}
  \right\}
  \implies
  \left\{
  \begin{array}{FlD}
    1. & \setU \text{ is open in $\opair{\setX}{\metricn_2}$}&and \\
    2. & \topT_2 \subseteq \topT_1
  \end{array}
  \right.
}
\end{theorem}
\begin{proof}
\begin{enumerate}
\item Proof that $\setU$ is open in $\opair{\setX}{\metricn_2}$:
\begin{align*}
    &
    && \setU \text{ is open in } \opair{\setX}{\metricn_1}
    && \text{by left hypothesis 2.}
  \\&  \implies
    && \forall x \in \setU,\; \exists r>0 \st B_d(x,r)\subseteq\setX
    && \text{by \prefp{lem:ms_open}}
  \\&  \implies
    && \forall x \in \setU,\; \exists r>0 \st \set{y\in\setX}{\metricsub{1}{x}{y}<r} \subseteq\setX
    && \text{by \prefp{def:ball}}
  \\&  \implies
    && \forall x \in \setU,\; \exists r>0 \st \set{y\in\setX}{\metricsub{1}{x}{y}<\alpha r} \subseteq\setX
  \\&  \implies
    && \forall x \in \setU,\; \exists r>0 \st \set{y\in\setX}{\metricsub{2}{x}{y}< r} \subseteq\setX
    && \text{by left hypothesis 1.}
  \\&  \implies
    && \forall x \in \setU,\; \exists r>0 \st B_2(x,y) \subseteq\setX
    && \text{by \prefp{def:ball}}
  \\&  \implies
    && \setU \text{ is open in } \opair{\setX}{\metricn_2}
    && \text{by \prefp{lem:ms_open}}
\end{align*}

\item Proof that $\topT_2 \subseteq \topT_1$: \\
Because
  $\setU \text{ is open in } \opair{\setX}{\metricn_1} \implies \setU \text{ is open in } \opair{\setX}{\metricn_2}$,
(see above), then $\topT_2 \subseteq \topT_1$.
\end{enumerate}
\end{proof}


%---------------------------------------
\begin{example}
\footnote{
  \citerppg{davis2005}{20}{21}{0071243399}
  }
\label{ex:taxicab}
\index{$l_1$ metric}       \index{taxi-cab metric}
\index{$l_2$ metric}       \index{Euclidean metric}
\index{$l_\infty$ metric}  \index{sup metric}
\index{metrics!$l_1$}
\index{metrics!$l_2$}
\index{metrics!$l_\infty$}
\index{metrics!taxi-cab}
\index{metrics!Euclidean}
\index{metrics!sup}
%---------------------------------------
Let $R$ be a \structe{commutative ring} and $\abs{\cdot}\in\clF{R}{R}$ be the \fncte{absolute value} \xref{def:abs} on $R$.
\exbox{\begin{array}{M}
  The following \structe{metric space}\index{space!metric}s are all \prope{equivalent} for any $n\in\Zp$:
  \\\qquad
  $\begin{array}{F>{\Big(}llc>{\ds}l<{\Big)} @{\qquad}D}
    1. & R^n, & \metricn_1(\vx,\vy)      &\eqd& \sum_{i=1}^n |x_i-y_i|                 &(\structe{$l_1$-metric} or \structe{taxi-cab metric}) \\
    2. & R^n, & \metricn_2(\vx,\vy)      &\eqd& \sqrt{\sum_{i=1}^n |x_i-y_i|^2}        &(\structe{$l_2$-metric} or \structe{Euclidean metric}) \\
    3. & R^n, & \metricn_\infty(\vx,\vy) &\eqd& \max\set{|x_i-y_i|}{i=1,2,\ldots n}    &(\structe{$l_\infty$-metric} or \structe{sup metric}) 
  \end{array}$
\end{array}}
\end{example}
\begin{proof}
\begin{enumerate}
\item Proof that $(R^n,\metricn_1)$ and $(R^n,\metricn_2)$ are equivalent:

Let
\[
  \vz^{(1)} \eqd
  \left[\begin{array}{c}
    y_1 \\ x_2 \\ x_3 \\ \vdots \\  x_n
  \end{array}\right]
  \quad\quad
  \vz^{(2)}\eqd
  \left[\begin{array}{c}
    y_1 \\ y_2 \\ x_3 \\ x_4 \\ \vdots \\  x_n
  \end{array}\right]
  \quad\quad
  \vz^{(3)}\eqd
  \left[\begin{array}{c}
    y_1 \\ y_2 \\ y_3 \\ x_4 \\ x_5 \\ \vdots \\  x_n
  \end{array}\right]
  \quad\quad
  \vz^{(k)}\eqd
  \left[\begin{array}{c}
    y_1 \\ y_2 \\ \vdots \\ y_k \\ x_{k+1}, x_{k+2}, \vdots \\ x_n
  \end{array}\right]
\]

\begin{align*}
  \metricn_2(\vx,\vy)
    &\le \metricn_2(\vx,\vz^{(1)}) + \metricn(\vz^{(1)},\vy)
    &&   \text{by definition of \structe{metric} \xref{def:metric}}
  \\&\le \metricn_2(\vx,\vz^{(1)}) + \metricn(\vz^{(1)},\vz^{(2)}) + \metricn(\vz^{(2)},\vy)
    &&   \text{by definition of \structe{metric} \xref{def:metric}}
  \\&\le \metricn_2(\vx,\vz^{(1)}) + \metricn(\vz^{(1)},\vz^{(2)}) +
         \metricn(\vz^{(2)},\vz^{(3)}) + \metricn(\vz^{(3)},\vy)
    &&   \text{by definition of \structe{metric} \xref{def:metric}}
  \\&\vdots
  \\&\le \metricn_2(\vx,\vz^{(1)})
       + \metricn(\vz^{(1)},\vz^{(2)})
       + \metricn(\vz^{(2)},\vz^{(3)})
       + \cdots
       \\&\qquad
       + \metricn(\vz^{(n-2)},\vz^{(n-1)})
       + \metricn(\vz^{(n-1)},\vy)
    &&   \text{by definition of \structe{metric} \xref{def:metric}}
  \\&=   \sqrt{\sum_{i=1}^n |x_i-z^{(1)}_i|^2}
       + \sqrt{\sum_{i=1}^n |z^{(1)}_i-z^{(2)}_i|^2}
%       + \sqrt{\sum_{i=1}^n |z^{(2)}_i-z^{(3)}_i|^2}
       + \cdots
       \\&\qquad
       + \sqrt{\sum_{i=1}^n |z^{(n-2)}_i-z^{(n-1)}_i|^2}
       + \sqrt{\sum_{i=1}^n |z^{(n-1)}_i-y_i|^2}
  \\&=   \sqrt{|x_1-y_1|^2}
       + \sqrt{|x_2-y_2|^2}
       + \sqrt{|x_3-y_3|^2}
       + \cdots
       \\&\qquad
       + \sqrt{|x_{n-1}-y_{n-1}|^2}
       + \sqrt{|x_n-y_n|^2}
  \\&=   \abs{x_1-y_1}
       + \abs{x_2-y_2}
       + \abs{x_3-y_3}
       + \cdots
      %+ \abs{x_{n-1}-y_{n-1}}
       + \abs{x_n-y_n}
  \\&=   \sum_{i=1}^n \abs{x_i-y_i}
  \\&=   \metricn_1(\vx,\vy)
    &&   \text{by definition of \structe{metric} \xref{def:metric}}
\end{align*}

By \prefpp{thm:d1<ad2}, $\metricn_2(\vx,\vy)\le \metricn_1(\vx,\vy)$ implies
that $(R^n,\metricn_1)$ and $(R^n,\metricn_2)$ are equivalent.


\item Proof that $(R^n,\metricn_1)$ and $(R^n,\metricn_\infty)$ are equivalent:
\begin{align*}
  \metricn_1(\vx,\vy)
    &=   \sum_{i=1}^n |x_i-y_i|
    &&   \text{by definition of \structe{metric} \xref{def:metric}}
  \\&\le n\cdot \max\set{|x_i-y_i|}{i=1,2,\ldots,\xN}
  \\&=   n\: \metricn_\infty(\vx,\vy)
    &&   \text{by definition of \structe{metric} \xref{def:metric}}
\end{align*}
By \prefpp{thm:d1<ad2}, $\metricn_1(\vx,\vy)\le n\metricn_\infty(\vx,\vy)$ implies
that $(\C^n,\metricn_1)$ and $(\C^n,\metricn_\infty)$ are equivalent.

\end{enumerate}
\end{proof}

} % end wsd exclude

%=======================================
\subsection{Metrics induced by topologies}
%=======================================
There are many topological spaces that are induced by metric spaces,
and others that are not.
A topology that is induced by a metric is called \prope{metrizable} (next definition).
%---------------------------------------
\begin{definition}
\label{def:metrizable}
%---------------------------------------
Let $\topspaceX$ be a \structe{topological space} \xref{def:topology}.
\defbox{\begin{array}{M}
  A \structe{topology} is \hid{metrizable} if it is induced by a \structe{metric}.
\end{array}}
\end{definition}

%---------------------------------------
\begin{example}
\index{topologies!trivial}
\index{topologies!indiscrete}
\index{topologies!discrete}
\footnote{
  \citerp{munkres2000}{77},
  \citerpgc{kubrusly2011}{107}{0817649972}{Example 3.J},
  \citerppgc{steen1978}{42}{43}{0387903127}{II.4},
  \citerpg{dibenedetto}{18}{0817642315}
  }
%---------------------------------------
Let $\sssT{\sid}$ be the set of \structe{topologies} \xref{def:topology} on a set $\sid$ and
$\pset{\sid}$ the \structe{power set} \xref{def:pset} on $\sid$.
\exbox{\begin{array}{lMM}
  \setn{\szero,\,\sid} &is called the \structe{indiscrete topology}. & It is \emph{not} metrizable.\\
  \psetx               &is called the \structe{discrete topology}.   & It \emph{is} metrizable.
\end{array}}
\end{example}

%---------------------------------------
\begin{example}
\index{topologies!Sierpi{/'n}ski}
\footnote{
  \citerpgc{joshi1983}{90}{0852264445}{example 9},
  \citerpgc{davis2005}{42}{0071243399}{Example 4.4.4}
  }
%---------------------------------------
\exbox{\begin{array}{M}
  The \hid{Sierpi{/'n}ski space} $\topspaceX$ is a topological space with 
  \\topology $\topT\eqd\setn{\emptyset,\,\setn{x},\,\setn{x,y}}$ on the set $\setX\eqd\setn{x,y}$.
  \\It is \emph{not} metrizable.
  \\The Sierpi{/'n}ski space is also called the \hid{two-point connected space}.
\end{array}}
\end{example}


%======================================
\section{Additional properties}
%======================================
%%======================================
%\subsection{Continuity in metric spaces}
%%======================================
%
%%%---------------------------------------
%%\begin{definition}
%%\footnote{
%%  \citerp{giles1987}{114}
%%  }
%%\label{def:ms_continous}
%%\label{def:ms_clCxy}
%%%---------------------------------------
%%Let $\metspaceX$ and $\opair{\setY}{\metrican}$ be metric spaces
%%and $\ff$ a function in $\clFxy$.
%%\defbox{\begin{array}{M}
%%  The function $\ff$ is \hid{continuous at a point $x\in\setX$} if
%%  \\\qquad$\forall \epsilon>0,\quad \exists \delta>0 \st\qquad \metric{x}{y}<\delta \implies \metrica{\ff(x)}{\ff(y)}<\epsilon$.
%%  \\The function $\ff$ is \hid{continuous in the subset $\setA\subseteq\setX$} if 
%%  $\ff$ is continuous at every point $x\in\setA$.
%%  \\The function $\ff$ is \hid{continuous} if
%%  $\ff$ is continuous at every point $x\in\setX$.
%%\end{array}}
%%\end{definition}
%
%A function $\ff$ from one topological space to another is \prope{continuous} 
%if for every open set $\setU$, $\ffi(\setU)$ is also \prope{open} \xref{def:continuous}.
%All metric spaces are topological spaces \xref{thm:(X,d)->(X,t)};
%but in a metric space, a characterization (an equivalent statement) is often used 
%that may be considered more convenient (next theorem).
%%---------------------------------------
%\begin{theorem}
%%\footnote{
%%  }
%\label{thm:ms_continous}
%%---------------------------------------
%Let $\metspaceX$ and $\opair{\setY}{\metrican}$ be metric spaces
%and $\ff$ a function in $\clFxy$.
%\thmbox{
%  \text{$\ff$ is \prope{continuous}}
%  \qquad\iff\qquad
%  \brb{\begin{array}{M}
%    The function $\ff$ is \hid{continuous at a point $x\in\setX$} if
%  \\\qquad$\forall \epsilon>0,\quad \exists \delta>0 \st$
%  \\\qquad$\metric{x}{y}<\delta \implies \metrica{\ff(x)}{\ff(y)}<\epsilon$.
%  \end{array}}
%  }
%\end{theorem}
%
%




%%=======================================
%\section{Metric spaces of sequences}
%%=======================================
%%--------------------------------------
%\begin{definition}[Baire space]
%\footnote{
%  \citerpp{hausdorff1937e}{117}{118}
%  }
%\index{Baire space}
%%--------------------------------------
%Let $\vx\eqd\seq{x_n}{n\in\Zp}$ and $\vy\eqd\seq{y_n}{n\in\Zp}$ be sequences.
%\defboxp{
%  $\metric{\vx}{\vy} \eqd \left\{\begin{array}{ll}
%    0  & \text{for } \vx=\vy \\
%    \frac{1}{m} & \text{for } \vx\ne \vy
%  \end{array}\right.$
%  \\
%  where
%  $x_m \ne  y_m$ and $x_n=y_n$ for all $1\le n \le m-1$
%  }
%\end{definition}








%======================================
\subsection{Separable metric spaces}
%======================================
\prefp{def:separable} gives the definition of a separable space.
%---------------------------------------
\begin{theorem}
\footnote{
  %\citerpgc{gemignani1972}{146}{0486665224}{Proposition 4 a)},
  \citerpgc{runda2005}{32}{038725790X}{Theorem 2.2.17}
  }
\label{thm:XdYd_separable}
%---------------------------------------
Let $\metspaceY$ be a subspace of a \structe{metric space} $\metspaceX$.
\thmbox{
  \text{$\metspaceX$ is \prope{separable}}
  \qquad\implies
  \text{$\metspaceY$ is \prope{separable} \xref{def:separable}}
  }

\end{theorem}

%======================================
\subsection{Compact metric spaces}
%======================================
%---------------------------------------
\begin{definition}[\defd{Borel-Lebesgue axiom}]
\footnote{
  \citerpp{dieudonne1969}{57}{58},
  \citerpg{rosenlicht}{54}{0486650383}
  }
\index{Borel-Lebesgue axiom}
\index{axioms!Borel-Lebesgue}
%---------------------------------------
Let $\metspaceX$ be a \structe{metric space} \xref{def:metric}.
Let $\setI$ be an \sete{infinite indexing set} and $\setJ\subsetneq\setI$ be a \sete{finite indexing set}.
Let $\seq{\setU_n}{n\in\setI}$ be a \structe{sequence} \xref{def:sequence} of \structe{open set}s \xref{def:openset}.
\defbox{\begin{array}{>{\ds}l}
  \text{A set $\setA$ is \hid{compact} if}
  \\\qquad
    \mcomr{\ds\setA \subseteq \setopu_{n\in\setI}\setU_n}{$\setA$ is covered by an infinite union of open sets}
    \qquad\implies\qquad
    \mcoml{\ds\setA \subseteq \setopu_{n\in\setJ}\setU_n}{$\setA$ is covered by a finite union of open sets}
\end{array}}
\end{definition}

%---------------------------------------
\begin{proposition}
\footnote{
  \citerp{dieudonne1969}{62},
  \citerpg{rosenlicht}{54}{0486650383}
  }
%---------------------------------------
Let $\metspaceX$ be a \structe{metric space} \xref{def:metric}.
Let $\setY$ be a subset of $\setX$.
\propbox{
  \brb{\begin{array}{FMD}
    1. & $\metspaceX$ is \prope{compact}                 &  and  \\
    2. & $\setY$      is \prope{closed} in $\metspaceX$  & ($\setY=\clsY$)
  \end{array}}
  \qquad\implies\qquad
  %\left\{\begin{array}{FlD}
    %1. & \metspaceY \text{ is a metric space} & and \\
  \brb{\text{$\metspaceY$ is \prope{compact}}}
  %\end{array}\right.
  }
\end{proposition}
\begin{proof}
%\begin{enumerate}
  %\item Proof that $\metspaceY$ is a metric space:\\
  %  \begin{enumerate}
  %    \item $\setY$ is a subset of $\setX$.
  %    \item Therefore, $\metricn$ is also defined on $\setY$.
  %    \item And therefore, $\metspaceY$ is a \structe{metric space} \xref{def:metric}.
  %  \end{enumerate}

%  \item Proof that $\metspaceY$ is compact:
    \begin{enumerate}
      \item Because $\metspaceY$ is a metric space, there exists a 
            sequence of open sets $\seq{\setA_n}{i\in\setI}$,
            where $\setI$ is an infinite indexing set, such that 
              \[ \setY \subseteq \setopu_{i\in\setI} \setA_i. \]
      \item By left hypothesis 2, $\setY$ is closed, which means its complement
            $\cmpY$ is open.
      \item Combining the above two statements, we have 
              \[ \setX = \setY \setu \cmpY \subseteq \brp{\setopu_{i\in\setI} \setA_i}\setu\cmpY. \]
      \item By left hypothesis 1, $\setX$ is compact and therefore can be covered
            by a \emph{finite} number of open sets. 
            Let $\setJ$ be a finite indexing set such that
              \[ \setX \subseteq \brp{\setopu_{i\in\setJ} \setA_i}\setu\cmpY. \]
      \item By left hypothesis 2, $\setY\subseteq\setX$. Therefore
              \[ \setY \subseteq \setX \subseteq \brp{\setopu_{i\in\setJ} \setA_i}\setu\cmpY. \]
      \item And so, $\setY$ is covered by a finite number of open sets 
            ($\seq{\setA_i}{i\in\setJ}$ and $\cmpY$), 
            and $\setY$ is therefore \emph{compact}.
    \end{enumerate}
%\end{enumerate}
\end{proof}


%---------------------------------------
\begin{proposition}[Nested set property]
\footnote{
  \citerpg{rosenlicht}{55}{0486650383}
  }
%---------------------------------------
Let $\metspaceX$ be a \structe{metric space} and 
$\seq{\setY_n}{n\in\Z}$ a \structe{sequence} \xref{def:sequence} of sets.
\thmbox{
  \left.\begin{array}{llCDD}
    1. & \mc{3}{l}{\text{$\metspaceX$ is \prope{compact}}}                                      &  and  \\
    2. & \setY_n\subseteq\setX        & \forall {n\in\Z} & ($\setY_n$ are subsets of $\setX$) &  and  \\
    3. & \setY_n\ne \emptyset        & \forall {n\in\Z} & ($\setY_n$ are non-empty)          &  and  \\
    4. & \setY_n\supseteq\setY_{n+1}  & \forall {n\in\Z} & (nested subsets)                   &  and  \\
    5. & \setY_n=\clsY_n              & \forall {n\in\Z} & ($\setY$ is closed).
  \end{array}\right\}
  \implies
  \mcoml{\seto{\setopi_{n\in\Z} \setY_n} \ge 1}{all subsets have at least one common element}
  }
\end{proposition}
\begin{proof}
Proof is by contradiction.
\begin{enumerate}
  \item Note that $\setY_n\supseteq\setY_{n+1} \qquad\iff\qquad \cmpY_n\subseteq\cmpY_{n+1}$
  \item Suppose that the statement is false; that is, $\seto{\setopi_{n\in\Z} \setY_n} =0$.
    \begin{align*}
      \seto{\setopi_{n\in\Z} \setY_n} =0
        &\iff     \setopi_{n\in\Z} \setY_n = \emptyset
      \\&\iff     \setopu_{n\in\Z} \cmpY_n = \setX
        &&        \text{by \thme{de Morgan's law} \ifxref{setstrct}{thm:demorgan}}
      \\&\implies \setopu_{n=1}^\xN \cmpY_n = \setX \text{ for some finite $\xN$}
        &&        \text{by compactness hypothesis}
      \\&\implies \cmpY_\xN = \setX
        &&        \text{because $\cmpY_n\subseteq\cmpY_{n+1}$}
      \\&\iff     \setY_\xN = \emptyset
    \end{align*}

  \item But this is a \emph{contradiction}, because by left hypothesis 3, $\setY_n\ne \emptyset$.
  \item Therefore, $\seto{\setopi_{n\in\Z} \setY_n} \ge 1$.
\end{enumerate}
\end{proof}


\ifexclude{wsd}{
%=======================================
\subsection{Orthogonality on metric linear spaces}
%=======================================
%---------------------------------------
\begin{definition}
\footnote{
  \citerp{birkhoff1935}{169}
  }
%---------------------------------------
Let $\opair{\spV}{\metricn}$ be a \structe{metric linear space}.
Let $\intcc{x_1}{x_2}$ and $\intcc{y_1}{y_2}$ be \emph{line segments} 
in the linear space $\spV$
that intersect at a point $p\in\intcc{x_1}{x_2}$.
\defboxp{
  The line segments $\intcc{x_1}{x_2}$ and $\intcc{y_1}{y_2}$ are \hid{orthogonal} 
  in the metric linear space $\opair{\spV}{\metricn}$ if
  \\\indentx$ 
    \mcom{\metric{y_1}{p} \le \metric{y_2}{q} \qquad \forall q\in\intcc{x_1}{x_2} }
         {$p$ is the closest point in $\intcc{x_1}{x_2}$ to $y_1$}
    $
  }
\end{definition}
}


%=======================================
\section{Metric transforms}
%=======================================
If we know that one or more functions are metrics, then we can use them 
to generate other metrics. 
This is demonstrated by the following:\\
\begin{tabular}{>{\imark } l>{\footnotesize(}l<{):}>{\footnotesize}l}
     \pref{thm:isometry_inv}& \prefpo{thm:isometry_inv}& generate a metric using an isometry.
  \\ \pref{thm:met_sumpf}   & \prefpo{thm:met_sumpf}   & generate a metric using a monotone function.
  \\ \pref{thm:met_fod}     & \prefpo{thm:met_fod}     & generate a metric using a \fncte{metric preserving function}.
  \\ \pref{thm:met_d=sumpi} & \prefpo{thm:met_d=sumpi} & generate a metric from a linear combination of metrics.
  \\ \pref{thm:met_power}   & \prefpo{thm:met_power}   & generate an $\xN$-dimensional metric from weighted $1$-dimensional metrics.
  %\\ \pref{prop:p==>d}      & \prefpo{prop:p==>d}      & generate a metric from another metric.
  %\\ \pref{prop:p==>dn}     & \prefpo{prop:p==>dn}     & generate a multi-dimensional metric from a primitive metric.
\end{tabular}


%%---------------------------------------
%\begin{definition}
%\footnote{
%  \citerpgc{recasens2010}{83}{3642162215}{Definition 4.3}
%  }
%\label{def:metric_transform}
%%---------------------------------------
%\defbox{\brbr{\begin{array}{DlCDD}
%  \mc{5}{M}{A function $\fphi$ is a \hid{metric transform} if}
%    \\
%    \cnto & x\ge y \implies \fphi(x) \ge \fphi(y)                &\forall x,y\in\R   & (\prope{nondecreasing})    & and 
%    \cntn & \fphi(0) = 0                                         &                   &                             & and 
%    \cntn & \fphi(x) \ge 0                                       &\forall x  \in\R   & (\prope{positive definite}) & and 
%    \cntn & \fphi(x+y) \le \fphi(x) + \fphi(y)                   &\forall x,y\in\Rnn & (\prope{subadditive}).      & 
%  \end{array}}
%  }
%\end{definition}


%\pref{thm:met_sumpf} (next) shows that we can construct a large number
%of metrics from an existing metric $\metrican$ and the family $\setn{\ff}$
%of strictly increasing or strictly decreasing functions.
%Examples of such constructs include the following:\\
%\begin{tabular}{>{\imark}llll}
%  & Exponential metric  & \pref{ex:ms_32x} & \prefpo{ex:ms_32x},
%  & Tangential metric   & \pref{ex:ms_tan} & \prefpo{ex:ms_tan} 
%\end{tabular}

%=======================================
\subsection{Metric transforms on the domains of metrics}
%=======================================
%--------------------------------------
\begin{definition}
\footnote{
  \citerpc{thron1966}{153}{definition 19.4},
  \citerpgc{giles1987}{124}{0521359287}{Definition 6.22},
  \citerpgc{khamsi2001}{15}{0471418250}{Definition 2.4},
  \citerpg{kubrusly2001}{110}{0817641742}
  }
\label{def:isometry}
%--------------------------------------
Let $\metspaceX$ and $\opair{\setY}{\metrican}$ be \structe{metric space}s \xref{def:metric}.
\defbox{\begin{array}{M}
  The function $\ff\in\clFxy$ is an \hid{isometry} on $\clF{\metspaceX}{\opair{\setY}{\metrican}}$ if
    \\\qquad$\ds\metric{x}{y}= \metrica{\ff(x)}{\ff(y)} \qquad\scy \forall x,y\in\setX$
    \\
  The spaces $\metspaceX$ and $\opair{\setY}{\metrican}$ are \hid{isometric} if there exists an isometry on $\clF{\metspaceX}{\opair{\setY}{\metrican}}$.
\end{array}}
\end{definition}

%--------------------------------------
\begin{theorem}
\footnote{
  \citerpc{thron1966}{153}{theorem 19.5}
  }
\label{thm:isometry_inv}
%--------------------------------------
Let $\metspaceX$ and $\opair{\setY}{\metrican}$ be \structe{metric space}s.
Let $\ff$ be a function in $\clFxy$ and $\ffi$ its inverse in $\clFyx$.
\thmbox{
  \brb{\text{$\ff$ is an \hid{isometry} on $\clF{\metspaceX}{\opair{\setY}{\metrican}}$}}
  \qquad\iff\qquad
  \brb{\text{$\ffi$ is an \hid{isometry} on $\clF{\opair{\setY}{\metrican}}{\metspaceX}$}}
  }
\end{theorem}


If a function $\metrican$ is a \structe{metric} and a function $\fg$ is \prope{injective}, then 
the function $\metric{x}{y}\eqd\metrica{\fg(x)}{\fg(y)}$ is also a \structe{metric} (next theorem).
For an example of this with $\metrica{x}{y}\eqd\abs{x-y}$ and $\fg\eqd\arctan(x)$, see \prefpp{ex:ms_atan}.

%---------------------------------------
\begin{theorem}[\thm{Pullback metric}/\thm{$\fg$-transform metric}]
\label{thm:met_sumpf}
\footnote{
  \citerpg{deza2009}{81}{3642002331}
  %\url{http://groups.google.com/group/sci.math/msg/6d091dfa5061cc08}
  }
%---------------------------------------
Let $\setX$ and $\setY$ be sets.
Let $\fg$ be a function in $\clFxy$.
\thmbox{
  \brb{\begin{array}{FMD}
      1. & $\metrican$ is a metric on $\setY$ & and 
    \\2. & $\fg$ is \prope{injective}
   %\\3. & \mcom{\fphi(x)=\fphi(y)\iff x=y \quad\scriptstyle\forall x,y\in\setX}{$\fphi$ is strictly increasing or strictly decreasing}
  \end{array}}
%  \qquad\implies\qquad
  \implies
  \brb{\begin{array}{>{\ds}l}
    \metric{x}{y} =  \metrica{\fg(x)}{\fg(y)} \quad\scriptstyle\forall x,y\in\setX
    \\\qquad\text{is a metric on $\setY$}
  \end{array}}
  }
\end{theorem}
\begin{proof}
\begin{align*}
  \intertext{1. Proof that ${x}={y}\implies\metric{x}{y}=0$:}
  \metric{x}{y}
    &\eqd \metrica{\fphi(x)}{\fphi(y)}
    &&    \text{by definition of $\metricn$}
  \\&=    \metrica{\fphi(x)}{\fphi(x)}
    &&    \text{by ${x}={y}$ hypothesis}
  \\&=    0
    &&    \text{by \prope{nondegenerate} property of metric $\metrican$ \xref{def:metric}}
  \\&=    0
  \\
  \intertext{2. Proof that ${x}={y}\impliedby\metric{x}{y}=0$:}
  0
    &=    \metric{x}{y}
    &&    \text{by right hypothesis}
  \\&\eqd  \metrica{\fphi(x)}{\fphi(y)}
    &&    \text{by definition of $\metricn$}
  \\\implies \metrica{\fphi(x)}{\fphi(y)}&=0 \text{ for $n=1,2,\ldots,\xN$}
    &&    \text{because $\metrican$ is non-negative}
  \\\implies {x}&={y}
    &&    \text{by left hypothesis 2}
  \\
  \intertext{3. Proof that $\metric{x}{y}\le\metric{z}{x}+\metric{z}{y}$:}
  \metric{x}{y}
    &\eqd  \metrica{\fphi(x)}{\fphi(y)}
    &&    \text{by definition of $\metricn$}
  \\&\le   \big( \metrica{\fphi(x)}{\fphi(z)} + \metric{\fphi(z)}{\fphi(y)} \big)
    &&    \text{by \prope{subadditive} property of $\metrican$ \xref{def:metric}}
  \\&=     \metrica{\fphi(z)}{\fphi(x)} +  \metrica{\fphi(z)}{\fphi(y)} 
    &&    \text{by \prope{symmetry} property of metric $\metrican$ \xref{def:metric}}
  \\&\eqd \metric{z}{x} + \metric{z}{y}
    &&    \text{by definition of $\metricn$}
\end{align*}
\end{proof}




%=======================================
\subsection{Metric preserving functions}
%=======================================

%---------------------------------------
\begin{definition}
\footnote{
  \citerpc{vallin1999}{849}{Definition 1.1},
  \citerp{corazza1999}{309},
  \citerpg{deza2009}{80}{3642002331}
  }
\label{def:metpreserv}
%---------------------------------------
Let $\sssetM$ be the set of all \structe{metric space}s on a set $\setX$.
\defbox{\begin{array}{M}
  A \structe{function} $\fphi\in\clFrnrn$ is \propd{metric preserving} if
    \\\qquad$\metric{x}{y}\eqd\fphi\circ\metrica{x}{y}$ is a metric on $\setX$ for all $\opair{\setX}{\metrican}\in\sssetM$
\end{array}}
\end{definition}


\pref{thm:mpf_necessary} (next theorem) presents some necessary conditions for a function $\fphi$ to be \prope{metric preserving}.
\prefpp{thm:met_fod} presents some sufficient conditions.
But first some conditions that are \emph{not} necessary:
\\\begin{tabular}{>{\qquad\scs}rll}
    1. & It is \emph{not} necessary for $\fphi$ to be \prope{continuous}   & (see \prefp{ex:mpf_01}).
  \\2. & It is \emph{not} necessary for $\fphi$ to be \prope{nondecreasing}& (see \prefp{ex:mpf_11x1}).
  \\3. & It is \emph{not} necessary for $\fphi$ to be \prope{monotonic}    & (see \prefp{ex:mpf_nonmonotonic}).
\end{tabular}

%---------------------------------------
\begin{theorem}[necessary conditions]
\footnote{
  \citerpc{corazza1999}{310}{Proposition 2.1},
  \citerpg{deza2009}{80}{3642002331}
  }
\label{thm:mpf_necessary}
%---------------------------------------
Let $\oppR\ff$ be the \structe{range} of a function $\ff$.
\thmbox{
  \brb{\begin{array}{M}
    $\fphi$ is a metric\\ 
    preserving function
  \end{array}}
  \quad\implies\quad
  \brb{\begin{array}{FlD}
      1. & \fphi^{-1}(0) = \setn{0}             &  and
    \\2. & \oppR\fphi \subseteq \Rnn            &  and
    \\3. & \fphi(x+y) \leq \fphi(x) + \fphi(y)  & ($\fphi$ is \prope{subadditive})
  \end{array}}
  }
\end{theorem}
\begin{proof}
\begin{enumerate}
  \item Proof that $\fphi$ is a \structe{metric preserving function} $\implies$ $\fphi^{-1}(0) = \setn{0}$:
    \begin{enumerate}
      \item Suppose that the statement is not true and $\fphi^{-1}(0) = \setn{0,a}$.
      \item Then $\fphi(a)=0$ and for some $x,y$ such that $x\neq y$ and $\metric{x}{y}=a$ we have
        \begin{align*}
          \fphi\circ\metric{x}{y}
            &= \fphi(a)
          \\&= 0
          \\&\implies \text{$\fphi\circ\metricn$ is \emph{not} a metric}
          \\&\implies \text{$\fphi$ is \emph{not} a metric preserving function}
        \end{align*}
      \item But this contradicts the original hypothesis, and so it must be that $\fphi^{-1}(0) = \setn{0}$.
    \end{enumerate}

  \item Proof that $\oppR\fphi \subseteq \Rnn$:
    \begin{align*}
      \oppR\fphi\circ\metricn
        &\subseteq \oppR\metricn
      \\&\subseteq \Rnn
    \end{align*}

  \item Proof that $\fphi$ is a metric preserving function $\implies$ $\fphi$ is \prope{subadditive}:
    \begin{enumerate}
      \item For $\fphi$ to be a \structe{metric preserving function}, 
            by definition it must work with \emph{all} \structe{metric space}s.
      
      \item So to develop necessary conditions, we can pick any metric space we want
            (because it is necessary that $\fphi$ preserves it as a metric space).
      
      \item For this proof we choose the metric space $\opair{\R}{\metricn}$ where $\metric{x}{y}\eqd\abs{x-y}$ for all $x,y\in\Rnn$:
        \begin{align*}
          \fphi(x) + \fphi(y)
            &=   \fphi\brp{\abs{(x+y)-x}} + \fphi\brp{\abs{x-0}} 
            &&   \text{by definition of $\abs{\cdot}$}
          \\&=   \brp{\fphi\circ\metricn}(x+y,x) + \brp{\fphi\circ\metricn}(x,0)
            &&   \text{by definition of $\metricn$}
          \\&\ge \brp{\fphi\circ\metricn}(x+y,0)
            &&   \text{by left hypothesis and \prefp{def:metric}}
          \\&=   \fphi\brp{\abs{(x+y)-0}}
            &&   \text{by definition of $\metricn$}
          \\&=   \fphi(x+y)
            &&   \text{because $x,y\in\Rnn$}
        \end{align*}
    \end{enumerate}
\end{enumerate}
\end{proof}

%\pref{thm:met_fod} (next theorem) presents some sufficient conditions for a function to be metric preserving.
%---------------------------------------
\begin{theorem}[sufficient conditions]
\footnote{
  \citerc{corazza1999}{Proposition 2.3},
  \citerpg{deza2009}{80}{3642002331},
  \citerpgc{kelley1955}{131}{0387901256}{Problem C}
  %\citerpp{carothers2000}{38}{39}
  }
\label{thm:met_fod}
%---------------------------------------
%Let $\metrican$ be a metric in $\clFxxr$. 
Let $\fphi$ be a function in $\clFrr$.
\thmbox{
  %\text{$\fphi$ is a \structe{metric transform}}
  %\qquad\implies\qquad
  \brbr{\begin{array}{DlCDD}
      1. & x\ge y \implies \fphi(x) \ge \fphi(y)                &\forall x,y\in\Rnn   & (\prope{nondecreasing})     & and 
    \\2. & \fphi(0) = 0                                         &                   &                             & and 
    \\3. & \fphi(x+y) \le \fphi(x) + \fphi(y)                   &\forall x,y\in\Rnn & (\prope{subadditive}).      & 
   %\\4. & \fphi(x) \ge 0                                       &\forall x  \in\R   & (\prope{positive definite}) & and 
  \end{array}}
  \implies
  \begin{array}{M}
    $\fphi$ is a \emph{metric}\\
    \emph{preserving function}
  \end{array}
  }
\end{theorem}
\begin{proof}
\begin{enumerate}
  \item Proof that $\fphi\circ\metric{x}{y}=0 \implies x=y$:
    \begin{align*}
      \fphi\circ\metric{x}{y}=0
        &\implies \metric{x}{y}=0
        && \text{by $\fphi$ hypothesis 2}
      \\&\implies x=y
        && \text{by \prope{nondegenerate} property \prefpo{def:metric}}
    \end{align*}

  \item Proof that $\fphi\circ\metric{x}{y}=0 \impliedby x=y$:
    \begin{align*}
      \fphi\circ\metric{x}{y}
        &= \fphi\circ\metric{x}{x}
        && \text{by $x=y$ hypothesis}
      \\&= \fphi(0)
        && \text{by \prope{nondegenerate} property \prefpo{def:metric}}
      \\&= 0
        && \text{by $\fphi$ hypothesis 2}
    \end{align*}

  \item Proof that $\fphi\circ\metric{x}{y}\le\fphi\circ\metric{z}{x}+\fphi\circ\metric{z}{y}$:
    \begin{align*}
      \fphi\circ\metric{x}{y}
        &\le \fphi\brp{\metric{x}{z} + \metric{z}{y}}
        && \text{by $\fphi$ hypothesis 1 and triangle inequality \prefpo{def:metric}}
      \\&\le \fphi\brp{\metric{z}{x} + \metric{z}{y}}
        && \text{by symmetric property of $\metricn$ \prefpo{def:metric}}
      \\&\le \fphi\circ\metric{z}{x} + \fphi\circ\metric{z}{y}
        && \text{by $\fphi$ hypothesis 3}
    \end{align*}
\end{enumerate}
\end{proof}




%---------------------------------------
\begin{example}[\exm{$\alpha$-scaled metric}/\exm{dilated metric}]
\footnote{
  \citerpg{deza2006}{44}{0444520872}
  }
\index{metrics!$\alpha$-scaled metric}
\index{metrics!dilated metric}
\label{ex:alphametric}
%---------------------------------------
Let $\metspaceX$ be a \structe{metric space} \xref{def:metric}.
\exbox{
  \text{$\ds\fphi(x)\eqd\alpha x,\,\alpha\in\Rp$,
    is \prope{metric preserving}
    }
  \qquad
  \brp{\text{$\ds\metrica{x}{y} \eqd \alpha\metric{x}{y}$
  is a metric on $\setX$}}
  }
{\\\psset{unit=8mm}
  \begin{pspicture}(-1,-0.5)(4.5,2.5)
    \psaxes[linecolor=green,labels=all,ticks=all,showorigin=true]{->}(0,0)(0,0)(4.5,2.5)
    \psplot[plotpoints=128,linecolor=blue]{0}{4}{x 0.5 mul}% 2 <= x 
    %\psline[linestyle=dotted,dotsep=2pt,linecolor=red](0,2)(2,1)
    \rput[l](3,1){$\alpha=\frac{1}{2}$}
    \uput[0]{0}(4.5,0){$x$}
  \end{pspicture}
}
\end{example}
\begin{proof}
\begin{enumerate}
  \item Note that $\fphi$ satisfies the conditions of \prefpp{thm:met_fod}.
  \item Therefore, by \prefpp{thm:met_fod}, $\metric{x}{y}$ is a metric on $\setX$.
\end{enumerate}
\end{proof}

%---------------------------------------
\begin{example}[\exm{power transform metric}/\exm{snowflake transform metric}]
\footnote{
  \citerpg{deza2009}{81}{3642002331},
  \citerpg{deza2006}{45}{0444520872}
  }
\index{metrics!power transform metric}
\label{ex:met_powertrans}
%---------------------------------------
Let $\metspaceX$ be a \structe{metric space} \xref{def:metric}.
\exbox{
  \text{$\ds\fphi(x)\eqd x^\alpha,\,\alpha\in\intoc{0}{1}$,
    is \prope{metric preserving}
    }
  \qquad
  \brp{\text{$\ds\metrica{x}{y} \eqd \brs{\metric{x}{y}}^\alpha$,
  is a metric on $\setX$}}
  }
{\\\psset{unit=8mm}
  \begin{pspicture}(-1,-0.5)(4.5,2.5)
    \psaxes[linecolor=green,labels=all,ticks=all,showorigin=true]{->}(0,0)(0,0)(4.5,2.5)
    \psplot[plotpoints=128,linecolor=blue]{0}{4}{x 0.5 exp}% 2 <= x 
    %\psline[linestyle=dotted,dotsep=2pt,linecolor=red](0,2)(2,1)
    \rput[l](3,1){$\alpha=\frac{1}{2}$}
    \uput[0]{0}(4.5,0){$x$}
  \end{pspicture}
}
\end{example}
\begin{proof}
\begin{enumerate}
  \item Note that $\fphi$ satisfies the conditions of \prefpp{thm:met_fod} for $0<\alpha\le 1$.
  \item Therefore, by \prefpp{thm:met_fod}, $\metric{x}{y}$ is a metric on $\setX$.
\end{enumerate}
\end{proof}

%---------------------------------------
\begin{example}[\exmd{$\alpha$-truncated metric}/\exmd{radar screen metric}]
\footnote{
  \citerpg{giles1987}{33}{0521359287},
  \citerppg{deza2006}{242}{243}{0444520872}
  }
\index{metrics!radar screen}
\index{metrics!$\alpha$-truncated metric}
%---------------------------------------
Let $\metspaceX$ be a \structe{metric space} \xref{def:metric}.
\exbox{
  \text{$\ds\fphi(x)\eqd \min\setn{\alpha,\,x},\,\alpha\in\Rp$,
    is \prope{metric preserving}
    }
  \qquad
  \brp{\begin{array}{M}
    $\ds\metrica{x}{y} \eqd \min\setn{\alpha,\,\metric{x}{y}}$\\
    is a metric on $\setX$
  \end{array}}
  }
{\\\psset{unit=8mm}
  \begin{pspicture}(-1,-0.5)(4.5,2.5)
    \psaxes[linecolor=green,labels=all,ticks=all,showorigin=true]{->}(0,0)(0,0)(3.5,2.5)
    %\psplot[plotpoints=128,linecolor=blue]{0}{1}{1}% x <= 1
    %\psplot[plotpoints=128,linecolor=blue]{1}{2}{x}% x <= 1
    \psline(0,0)(1,1)(3,1)%
    \psline[linestyle=dotted,dotsep=2pt,linecolor=red](1,0)(1,1)(0,1)%
    \uput[0]{0}(3.5,0){$x$}
    \uput[45](1,1){$\alpha=1$}
  \end{pspicture}
}
\end{example}
\begin{proof}
\begin{enumerate}
  \item Note that $\fphi$ satisfies the conditions of \prefpp{thm:met_fod}.
  \item $\ds\metric{x}{y}\eqd \min\setn{\alpha,\metrica{x}{y}}=\fphi\circ\metrica{x}{y}$
  \item Therefore, by \prefpp{thm:met_fod}, $\metric{x}{y}$ is a metric.
\end{enumerate}

%\begin{align*}
%  \intertext{\imark Proof that $ x= y\implies\metricn_r( x, y)=0$:}
%  \metricn_r( x, y)
%    &\eqd \min\setn{1,\metrica{x}{y}}
%    &&    \text{by definition of $\metricn_r$}
%  \\&=    \min\setn{1,\metrica{x}{x}}
%    &&    \text{by $ x= y$ hypothesis}
%  \\&=    \min\setn{1,0}
%    &&    \text{because $\metrican$ is \prope{nondegenerate}}
%  \\&=    0
%  \\
%  \intertext{\imark Proof that $ x= y\impliedby\metricn_r( x, y)=0$:}
%  0
%    &=    \metricn_r( x, y)
%    &&    \text{by $\metricn_r( x, y)=0$ hypothesis}
%  \\&\eqd \min\setn{1,\metrica{x}{y}}
%    &&    \text{by definition of $\metricn_r$}
%  \\\implies \metrica{x}{y}&=0
%  \\\implies  x&= y
%    &&    \text{because $\metrican$ is \prope{nondegenerate}}
%  \\
%  \intertext{\imark Proof that $\metricn_r(x,y)\le\metricn_r(z,x)+\metricn_r(z,y)$:}
%  \metricn_r( x, y)
%    &\eqd \min\setn{1,\metrica{x}{y}}
%    &&    \text{by definition of $\metricn_r$}
%  \\&\le  \min\setn{1,\metrica{x}{z}+\metrica{z}{y}}
%    &&    \text{because $\metrican$ satisfies the triangle inequality property}
%  \\&\le  \min\setn{1,\metrica{x}{z}} + \min\setn{1,\metrica{z}{y}}
%    &&    \text{because $\metrican$ is non-negative}
%  \\&=    \min\setn{1,\metrica{z}{x}} + \min\setn{1,\metrica{z}{y}}
%    &&    \text{by symmetry property of metric $\metrican$ \xref{def:metric}}
%  \\&\eqd \metricn_r( z, x) + \metricn_r( z, y)
%    &&    \text{by definition of $\metricn_r$}
%\end{align*}



\end{proof}



%---------------------------------------
\begin{example}[\exm{bounded metric}]
\footnote{
  \citerp{vallin1999}{849},
  \citerpg{ab}{39}{0120502577} 
  }
\index{metrics!bounded}
%---------------------------------------
Let $\metspaceX$ be a \structe{metric space} \xref{def:metric}.
\exbox{
  \text{$\ds\fphi(x)\eqd \frac{x}{1+x}$ is \prope{metric preserving} }
  \qquad
  \brp{ 
    \text{$\ds\metrica{x}{y} \eqd \frac{\metric{x}{y}}{1+\metric{x}{y}}$
    is also a metric on $\setX$
  }
}}
{\\\psset{unit=8mm}
  \begin{pspicture}(-1,-0.5)(4.5,1.5)
    \psaxes[linecolor=green,labels=all,ticks=all,showorigin=true]{->}(0,0)(0,0)(4.5,1.5)
    %%\psline[linecolor=green]{->}(0,0)(4.5,0)% x-axis
    \psplot[plotpoints=128,linecolor=blue]{0}{4}{x x 1 add div}
    \psline[linestyle=dotted,dotsep=2pt,linecolor=red](0,1)(4,1)
    \uput[0]{0}(4.5,0){$x$}
    %\multido{\i=0+1}{5}{%
    %  \uput[270]{0}(\i,0){$\i$}
    %  }
  \end{pspicture}
}
\end{example}
\begin{proof}
\begin{enumerate}
  \item Note that $\fphi$ satisfies the conditions of \prefpp{thm:met_fod}.
  \item $\ds\metric{x}{y}\eqd \frac{\metrica{x}{y}}{1+\metrica{x}{y}}=\fphi\circ\metrica{x}{y}$
  \item Therefore, by \prefpp{thm:met_fod}, $\metric{x}{y}$ is a metric.
\end{enumerate}

%\begin{align*}
%  \intertext{\imark Proof that $x=y\implies\metricn_b(x,y)=0$:}
%  \metricn_b(x,y)
%    &\eqd \frac{\metrica{x}{y}}{1+\metrica{x}{y}}
%    &&    \text{by definition of $\metricn_b$}
%  \\&=    \frac{\metrica{x}{x}}{1+\metrica{x}{x}}
%    &&    \text{by $x=y$ hypothesis}
%  \\&= 0
%    &&    \text{because $\metrican$ is \prope{nondegenerate}}
%  \\
%  \intertext{\imark Proof that $x=y\impliedby\metricn_b(x,y)=0$:}
%  0
%    &=    \metricn_b(x,y)
%    &&    \text{by $\metricn_b(x,y)=0$ hypothesis}
%  \\&\eqd \frac{\metrica{x}{y}}{1+\metrica{x}{y}}
%    &&    \text{by definition of $\metricn_b$}
%  \\\implies \metrica{x}{y}&=0
%  \\\implies x&=y
%    &&    \text{because $\metrican$ is \prope{nondegenerate}}
%  \\
%  \intertext{\imark Proof that $\metricn_b(x,y)\le\metricn_b(z,x)+\metricn_b(z,y)$:}
%  \metricn_b(x,y)
%    &\eqd \frac{\metrica{x}{y}}{1+\metrica{x}{y}}
%    &&    \text{by definition of $\metricn_b$}
%  \\&\le  \frac{\metrica{x}{z}+\metrica{z}{y}}{1+\metrica{x}{z}+\metrica{z}{y}}
%    &&    \text{because $\metrican$ satisfies the triangle inequality property}
%  \\&=    \frac{\metrica{x}{z}}{1+\metrica{x}{z}+\metrica{z}{y}}
%     +    \frac{\metrica{z}{y}}{1+\metrica{x}{z}+\metrica{z}{y}}
%  \\&\le  \frac{\metrica{x}{z}}{1+\metrica{x}{z}}
%     +    \frac{\metrica{z}{y}}{1+\metrica{z}{y}}
%  \\&=    \frac{\metrica{z}{x}}{1+\metrica{z}{x}}
%     +    \frac{\metrica{z}{y}}{1+\metrica{z}{y}}
%    &&    \text{by symmetry property of metric $\metrican$ \xref{def:metric}}
%  \\&\eqd \metricn_b(z,x) + \metricn_b(z,y)
%    &&    \text{by definition of $\metricn_b$}
%\end{align*}
\end{proof}

%---------------------------------------
\begin{example}
\footnote{
  \citerp{corazza1999}{311}
  }
\label{ex:mpf_01}
%---------------------------------------
Let $\fphi$ be a function in $\clFrr$.
\exbox{
  \fphi(x)\eqd\brbl{\begin{array}{cM}
    0 & for $x\leq0$\\
    1 & for $x>0$
  \end{array}}
  \qquad
  \text{is a \prope{discontinuous} \struct{metric preserving function}}
  }
{\\\psset{unit=8mm}
  \begin{pspicture}(-1,-0.5)(4.5,1.5)
    \psaxes[linecolor=green,labels=all,ticks=all,showorigin=true]{->}(0,0)(0,0)(4.5,1.5)
    %\psplot[plotpoints=128,linecolor=blue]{0}{4}{x 0.5 exp}% 2 <= x 
    %\psline[linestyle=dotted,dotsep=2pt,linecolor=red](0,2)(2,1)
    %\rput[l](3,1){$\alpha=\frac{1}{2}$}
    \psline{o-}(0,1)(4,1)
    \psdot(0,0)
    \uput[0]{0}(4.5,0){$x$}
  \end{pspicture}
}
\end{example}
\begin{proof}
  This result follows directly from \prefp{thm:met_fod}.
\end{proof}

%---------------------------------------
\begin{example}
%\footnote{
  %\citerp{corazza1999}{309}
%  }
\label{ex:mpf_11x1}
%---------------------------------------
Let $\fphi$ be a function in $\clFrr$.
\exbox{
  \fphi(x)\eqd\brbl{\begin{array}{lM}
    0               & for $x=0$\\
    1+\frac{1}{x+1} & for $x>0$
  \end{array}}
  \qquad
  \text{is a \struct{metric preserving function}}
  }
{\\\psset{unit=8mm}
  \begin{pspicture}(-1,-0.5)(9.5,2.5)
    \psaxes[linecolor=green,labels=all,ticks=all,showorigin=true]{->}(0,0)(0,0)(8.5,2.5)
    \psdot[dotstyle=*](0,0)
    \psplot[plotpoints=128,linecolor=blue]{0}{8}{1 x 1 add div 1 add}% x>0
    \psdot[dotstyle=o](0,2)
    \psline[linestyle=dotted,dotsep=2pt,linecolor=red](0,1)(8,1)
    \uput[0]{0}(8.5,0){$x$}
  \end{pspicture}
}
\end{example}
\begin{proof}
\begin{enumerate}
  \item Note that $\fphi\circ\metric{x}{x}=0 \iff x=0$.

  \item Lemma: $\frac{1}{a+b} \le \frac{1}{a} + \frac{1}{b}$ for $a,b\in\Rp$:\label{ex:mpf_11x1_lem}
    \begin{align*}
      \frac{1}{a+b}
        &\le \frac{1}{a}
      \\&\le \frac{1}{a} + \frac{1}{b}
    \end{align*}

  \item Proof that $\fphi\circ\metricn$ is \prope{subadditive}:
    \begin{align*}
      \fphi\circ\metric{x}{y}
        &= 1 + \frac{1}{1+\metric{x}{y}}
        && \text{by definition of $\fphi$}
      \\&\le 1 + \frac{1}{1+\metric{x}{z}+\metric{z}{y}}
        &&   \text{by \prope{subadditive} property of metric $\metricn$}
      \\&\le 1 + \frac{1}{1+\metric{x}{z}+1+\metric{z}{y}}
      \\&\le 1 + \frac{1}{1+\metric{x}{z}} + \frac{1}{1+\metric{z}{y}}
        &&   \text{by \pref{ex:mpf_11x1_lem}}
      \\&\le 1 + \frac{1}{1+\metric{x}{z}} + 1+\frac{1}{1+\metric{z}{y}}
      \\&=   \fphi\circ\metric{x}{z} + \fphi\circ\metric{z}{y}
        && \text{by definition of $\fphi$}
    \end{align*}

  \item Therefore, by \prefpp{thm:metric_equiv}, $\fphi\circ\metric{x}{y}$ is a \structe{metric} 
        and $\fphi$ is a \structe{metric preserving function}.
\end{enumerate}
%
\end{proof}

%---------------------------------------
\begin{example}
\footnote{
  \citerp{corazza1999}{309},
  \citerpc{dobos1998}{25}{Example~1},
  \citer{juza1956}
  }
\label{ex:mpf_nonmonotonic}
%---------------------------------------
Let $\fphi$ be a function in $\clFrr$.
\exbox{
  \fphi(x)\eqd\brbl{\begin{array}{lM}
    x                 & for $x\leq2$\\
    1 + \frac{1}{x-1} & for $x>2$
  \end{array}}
  \qquad
  \text{is a \prope{nonmonotonic} \struct{metric preserving function}}
  }
{\\\psset{unit=8mm}
  \begin{pspicture}(-1,-0.5)(9.5,2.5)
    \psaxes[linecolor=green,labels=all,ticks=all,showorigin=true]{->}(0,0)(0,0)(8.5,2.5)
    \psplot[plotpoints=128,linecolor=blue]{0}{2}{x}% 0 <= x <= 2
    \psplot[plotpoints=128,linecolor=blue]{2}{8}{1 x 1 sub div 1 add}% 2 <= x 
    \psline[linestyle=dotted,dotsep=2pt,linecolor=red](0,2)(2,2)
    \psline[linestyle=dotted,dotsep=2pt,linecolor=red](0,1)(8,1)
    \psline[linestyle=dotted,dotsep=2pt,linecolor=red](2,2)(2,0)
    \uput[0]{0}(8.5,0){$x$}
  \end{pspicture}
}
\end{example}
%\begin{proof}
%
%\end{proof}



%=======================================
\subsection{Product metrics}
%=======================================


%---------------------------------------
\begin{theorem}[Fr{\'e}chet product metric]
\footnote{
  \citerpg{deza2006}{47}{0444520872},
  \citerpg{deza2009}{84}{3642002331},
  \citerppgc{steen1978}{64}{65}{0387903127}{Example 37.7},
  \citerpg{isham1999}{10}{9810235623}
  }
\label{thm:met_d=sumpi}
%---------------------------------------
Let $\setX$ be a set.
%Let $\tuplexn{\opair{\setX}{\metrican_n}}$ be an $\xN$-tuple of metric spaces on a set $\setX$.
%Let $\tuplexn{\alpha_n\in\Rnn}$ be an $\xN$-tuple of real values with $\max\tuplen{\alpha_n}>0$.
\thmbox{
  \brb{\begin{array}{FMD}
      1. & $\tuplen{\metrican_n}$ are \structe{metrics} on $\setX$ & and
    \\2. & $\alpha_n\ge0\quad\forall n=1,2,\ldots,\xN$               & and
    \\3. & $\max\setxn{\alpha_n}>0$ 
  \end{array}}
  \quad\implies\quad
  \brb{\begin{array}{M}
    $\ds\metric{x}{y} = \sum_{n=1}^\xN \alpha_n \metricasub{n}{x}{y}$\\
    \qquad is a \structe{metric} on $\setX$
  \end{array}}
  }
\end{theorem}
\begin{proof}
\begin{align*}
  \intertext{1. Proof that $x=y\implies\metric{x}{y}=0$:}
  \metric{x}{y}
    &= \sum_{n=1}^\xN \alpha_n\, \metricasub{n}{x}{y}
    && \text{by definition of $\metricn$}
  \\&= \sum_{n=1}^\xN \alpha_n\, \metricasub{n}{x}{x}
    && \text{by left hypothesis}
  \\&= \sum_{n=1}^\xN 0
    && \text{by \prope{nondegenerate} property of metrics \xref{def:metric}}
  \\&= 0
  \\
  \intertext{2. Proof that $x=y\impliedby\metric{x}{y}=0$:}
  0
    &= \metric{x}{y}
    && \text{by right hypothesis}
  \\&= \sum_{n=1}^\xN \alpha_n\, \metricasub{n}{x}{y}
    && \text{by definition of $\metricn$}
  \\\implies & \metricasub{n}{x}{y}=0 \qquad \forall x,y\in\spX
    && \text{by metric properties \prefpo{def:metric}}
  \\\implies & x=y \qquad \forall x,y\in\spX
    && \text{by non-degenerate property of metrics \prefpo{def:metric}}
  \\
  \intertext{3. Proof that $\metric{x}{y}\le\metric{z}{x}+\metric{z}{y}$:}
  \metric{x}{y}
    &= \sum_{n=1}^\xN \alpha_n\, \metricasub{n}{x}{y}
    && \text{by definition of $\metricn$}
  \\&\le \sum_{n=1}^\xN \alpha_n\,\Big[ \metricasub{n}{x}{z} + \metricasub{n}{z}{y} \Big]
    && \text{by \prope{subadditive} property \xref{def:metric}}
  \\&= \sum_{n=1}^\xN \alpha_n\,\Big[ \metricasub{n}{z}{x} + \metricasub{n}{z}{y} \Big]
    && \text{by \prope{symmetry} property \xref{def:metric}}
  \\&= \sum_{n=1}^\xN \alpha_n\,\metricasub{n}{z}{x} +  \sum_{n=1}^\xN \alpha_n\, \metricasub{n}{z}{y} 
  \\&= \metric{z}{x} + \metric{z}{y}
    && \text{by definition of $\metricn$}
\end{align*}
\end{proof}



%---------------------------------------
\begin{theorem}[\thm{Power mean metrics}]
\label{thm:met_power}
%\footnote{
%  }
%---------------------------------------
Let $\setX$ be a set. % and $\metrican\in\clFxxr$ be a function.
Let $\tuplexn{x_n\in\setX}$ and $\tuplexn{y_n\in\setX}$ be $\xN$-tuples on $\setX$.
\thmbox{\begin{array}{>{\ds}l}
  \brbr{\begin{array}{FMD}
      1. & \text{$\metrican$ is a \structe{metric} on $\setX$} & and
    \\2. & $\ds\sum_{n=1}^\xN \lambda_n = 1$
  \end{array}}
  \implies
  \brbl{\begin{array}{M}
    $\ds\metric{\tuplen{x_n}}{\tuplen{y_n}}\eqd \brp{\sum_{n=1}^\xN \lambda_n \metrican^r(x_n,y_n)}^\frac{1}{r}$,\\
    \qquad$r\in\intcc{1}{\infty}$,
    \quad is a \structe{metric} on $\setX$
  \end{array}}
\\
\text{Moreover, if $r=\infty$, then $\ds\metric{\tuplen{x_n}}{\tuplen{y_n}} = \max_{n=1,\ldots,\xN}\metrica{x_n}{y_n}$.}
\end{array}}
\end{theorem}
\begin{proof}
\begin{enumerate}
  \item Proof that $\tuplen{x_n}=\tuplen{y_n}\implies\metric{\tuplen{x_n}}{\tuplen{y_n}}=0$ for $r\in\intco{1}{\infty}$:
    \begin{align*}
      \metricn(\tuplen{x_n},\tuplen{y_n})
        &\eqd \brp{\sum_{n=1}^\xN \lambda_n \metrican^r(x_n,y_n)}^\frac{1}{r}
        &&    \text{by definition of $\metricn$}
      \\&=    \brp{\sum_{n=1}^\xN \lambda_n \metrican^r(x_n,x_n)}^\frac{1}{r}
        &&    \text{by $\tuplen{x_n}=\tuplen{y_n}$ hypothesis}
      \\&=    \brp{\sum_{n=1}^\xN 0}^\frac{1}{r}
        &&    \text{because $\metrican$ is \prope{nondegenerate}}
      \\&=    0
    \end{align*}

  \item Proof that $\tuplen{x_n}=\tuplen{y_n}\impliedby\metric{\tuplen{x_n}}{\tuplen{y_n}}=0$ for $r\in\intco{1}{\infty}$:
     \begin{align*}
      0
        &=    \metric{\tuplen{x_n}}{\tuplen{y_n}}
        &&    \text{by $\metric{\tuplen{x_n}}{\tuplen{y_n}}=0$ hypothesis}
      \\&\eqd \brp{\sum_{n=1}^\xN \lambda_n \metrican^r(x_n,y_n)}^\frac{1}{r}
        &&    \text{by definition of $\metricn$}
      \\\implies \brp{\metrica{x_n}{y_n}}^\frac{1}{r} &= 0 \text{ for } n=1,2,\ldots,\xN
        &&    \text{because $\metrican$ is \prope{non-negative}}
      \\\implies \tuplen{x_n}&=\tuplen{y_n}
        &&    \text{because $\metrican$ is \prope{nondegenerate}}
    \end{align*}
  
  \item Proof that $\metricn$ satisfies the triangle inequality property  for $r=1$:
    \begin{align*}
      \metric{\tuplen{x_n}}{\tuplen{y_n}}
        &\eqd \brp{\sum_{n=1}^\xN \lambda_n \metrican^r(x_n,y_n)}^\frac{1}{r}
        &&    \text{by definition of $\metricn$}
      \\&=    \sum_{n=1}^\xN \lambda_n \metrica{x_n}{y_n}
        &&    \text{by $r=1$ hypothesis}
      \\&\leq \sum_{n=1}^\xN \lambda_n \brs{\metrica{z_n}{x_n}+\metrica{z_n}{y_n}}
        &&    \text{by \prope{triangle inequality}}
      \\&=    \sum_{n=1}^\xN \lambda_n \metrica{z_n}{x_n} + \sum_{n=1}^\xN \lambda_n \metrica{z_n}{y_n}
      \\&=    \brp{\sum_{n=1}^\xN \lambda_n \metrican^r(z_n,x_n)}^\frac{1}{r} + \brp{\sum_{n=1}^\xN \lambda_n \metrican^r(z_n,y_n)}^\frac{1}{r}
        &&    \text{by $r=1$ hypothesis}
      \\&\eqd \metric{\tuplen{z_n}}{\tuplen{x_n}} + \metric{\tuplen{z_n}}{\tuplen{y_n}}
        &&    \text{by definition of $\metricn$}
    \end{align*}

  \item Proof that $\metricn$ satisfies the triangle inequality property  for $r\in\intoo{1}{\infty}$:
    \begin{align*}
      &\metric{\tuplen{x_n}}{\tuplen{y_n}}
      \\&\eqd \brp{\sum_{n=1}^\xN \lambda_n \metrican^r(x_n,y_n)}^\frac{1}{r}
        &&    \text{by definition of $\metricn$}
      \\&\leq \brp{\sum_{n=1}^\xN \lambda_n \brs{\metrican(z_n,x_n)+\metrican(z_n,y_n)}^r}^\frac{1}{r}
        &&    \text{by \prope{subadditive} property \xref{def:metric}}
      \\&=    \brp{\sum_{n=1}^\xN \brs{\lambda_n^\frac{1}{r} \metrican(z_n,x_n)+\lambda_n^\frac{1}{r}\metrican(z_n,y_n)}^r}^\frac{1}{r}
        &&    \text{by \prope{subadditive} property \xref{def:metric}}
      \\&\leq \brp{\sum_{n=1}^\xN \brs{\lambda_n^\frac{1}{r}\metrican(z_n,x_n)}^r}^\frac{1}{r} 
            + \brp{\sum_{n=1}^\xN \brs{\lambda_n^\frac{1}{r}\metrican(z_n,y_n)}^r}^\frac{1}{r}
        &&    \text{by \thme{Minkowski's inequality} \xref{thm:lp_minkowski}}
      \\&\leq \brp{\sum_{n=1}^\xN \lambda_n \metrican^r(z_n,x_n)}^\frac{1}{r} 
            + \brp{\sum_{n=1}^\xN \lambda_n \metrican^r(z_n,y_n)}^\frac{1}{r}
      \\&\eqd \metric{\tuplen{z_n}}{\tuplen{x_n}} + \metric{\tuplen{z_n}}{\tuplen{y_n}}
        &&    \text{by definition of $\metricn$}
    \end{align*}

  \item Proof for the $r=\infty$ case:
    \begin{enumerate}
      \item Proof that $\metric{\tuplen{x_n}}{\tuplen{y_n}} = \max\tuplen{x_n}$: by \prefp{thm:seq_Mr}
      
      


    %\begin{align*}
    %  \metricn^2(\tuplen{x_n},\tuplen{y_n})
    %    &\eqd \sum_{n=1}^\xN \metrican^2(x_n,y_n)
    %    \qquad\text{by definition of $\metricn$}
    %  \\&\le  \sum_{n=1}^\xN \big[ \metrica{x_n}{z_n} + \metrica{z_n}{y_n} \big]^2
    %    \qquad\text{because $\metrican$ satisfies the triangle inequality property}
    %  \\&=    \sum_{n=1}^\xN \metrican^2(z_n,x_n)
    %     +    \sum_{n=1}^\xN \metrican^2(z_n,y_n)
    %     +    2\sum_{n=1}^\xN \metrica{x_n}{z_n}\metrica{z_n}{y_n}
    %   \qquad \text{by symmetry property} % \xref{def:metric}}
    %  \\&=    \metricn^2(\tuplen{z_n},\tuplen{x_n}) + \metricn^2(\tuplen{z_n},\tuplen{y_n}) 
    %     +    2\sum_{n=1}^\xN \metrica{x_n}{z_n}\metrica{z_n}{y_n}
    %    \qquad \text{by definition of $\metricn$}
    %  \\&=    \brs{\metricn(\tuplen{z_n},\tuplen{x_n}) + \metricn(\tuplen{z_n},\tuplen{y_n})}^2 - 2\metricn(\tuplen{z_n},\tuplen{x_n})\metricn(\tuplen{z_n},\tuplen{y_n})
    %  \\&\qquad +    2\sum_{n=1}^\xN \metrica{x_n}{z_n}\metrica{z_n}{y_n}
    %  \\&=    \brs{\metricn(\tuplen{z_n},\tuplen{x_n}) + \metricn(\tuplen{z_n},\tuplen{y_n})}^2 
    %  \\&\qquad -    2 \mcom{\sqrt{\sum_{n=1}^\xN \metrican^2(z_n,x_n)}}{$\norm{\metrica{z_n}{x_n}}$} 
    %            \mcom{\sqrt{\sum_{n=1}^\xN \metrican^2(z_n,y_n)}}{$\norm{\metrica{z_n}{y_n}}$}
    %      +    2 \mcom{\sum_{n=1}^\xN \metrica{x_n}{z_n}\metrica{z_n}{y_n}}{$\inprod{\metrica{x_n}{z_n}}{\metrica{z_n}{y_n}}$}
    %    %&& \text{by definition of $\metricn$}
    %  \\&\le \brs{\metricn(\tuplen{z_n},\tuplen{x_n}) + \metricn(\tuplen{z_n},\tuplen{y_n})}^2 
    %    \qquad \text{by Cauchy-Schwarz inequality \prefpo{thm:cs}}
    %\end{align*}
%\end{enumerate}
%\end{proof}
%
%%---------------------------------------
%\begin{proposition}[\thm{sup metric}]
%\label{prop:p==>dn}
%\footnote{
%  \citerpg{ab}{39}{0120502577}
%  }
%\index{metrics!sup}
%%---------------------------------------
%Let $\setX$ be a set and $\metrican\in\clFxxr$ be a function.
%Let $\tuplexn{x_n\in\setX}$ and $\tuplexn{y_n\in\setX}$ be $\xN$-tuples on $\setX$.
%\propbox{
%  \text{$\metrican$ is a \structe{metric}}
%  \quad\implies\quad
%  \brb{
%    \metric{\tuplen{x_n}}{\tuplen{y_n}} \eqd \max\set{\metrica{x_n}{y_n}}{n=1,2,\ldots,\xN}
%    \text{ is a \structe{metric}}
%    }
%  }
%\end{proposition}
%\begin{proof}
%\begin{enumerate}
  \item Proof that $\tuplen{x_n}=\tuplen{y_n}\implies\metric{\tuplen{x_n}}{\tuplen{y_n}}=0$:
    \begin{align*}
      \metric{\tuplen{x_n}}{\tuplen{y_n}}
        &\eqd \max\set{\metrica{x_n}{y_n}}{n=1,2,\ldots,\xN}
        &&    \text{by definition of $\metricn$}
      \\&=    \max\set{\metrica{x_n}{x_n}}{n=1,2,\ldots,\xN}
        &&    \text{by $\tuplen{x_n}=\tuplen{y_n}$ hypothesis}
      \\&=    0
        &&    \text{because $\metrican$ is \prope{nondegenerate}}
      \\
    \end{align*}
  \item Proof that $\tuplen{x_n}=\tuplen{y_n}\impliedby\metric{\tuplen{x_n}}{\tuplen{y_n}}=0$:
    \begin{align*}
      0
        &=    \metric{\tuplen{x_n}}{\tuplen{y_n}}
        &&    \text{by $\metric{\tuplen{x_n}}{\tuplen{y_n}}=0$ hypothesis}
      \\&\eqd \max\set{\metrica{x_n}{y_n}}{n=1,2,\ldots,\xN}
        &&    \text{by definition of $\metricn$}
      \\\implies \metrica{x_n}{y_n}&=0 \text{ for } n=1,2,\ldots,\xN
      \\\implies \tuplen{x_n}&=\tuplen{y_n}
        &&    \text{because $\metrican$ is \prope{nondegenerate}}
      \\
    \end{align*}
  \item Proof that $\metricn$ satisfies the triangle inequality property:
    \begin{align*}
      &\metric{\tuplen{x_n}}{\tuplen{y_n}}
      \\&\eqd \max\set{\metrica{x_n}{y_n}}{n=1,2,\ldots,\xN}
        &&    \text{by definition of $\metricn$}
      \\&\le  \max\set{\metrica{x_n}{z_n}+\metrica{z_n}{y_n}}{n=1,2,\ldots,\xN}
        %&&    \text{because $\metrican$ satisfies the triangle inequality property}
        &&    \text{by \prope{subadditive} property}
      \\&\le  \max\set{\metrica{x_n}{z_n}}{n=1,2,\ldots,\xN}
          +   \max\set{\metrica{z_n}{y_n}}{n=1,2,\ldots,\xN}
        &&    \text{by \prope{non-negative} property}
      \\&=    \max\set{\metrica{z_n}{x_n}}{n=1,2,\ldots,\xN}
          +   \max\set{\metrica{z_n}{y_n}}{n=1,2,\ldots,\xN}
        &&    \text{by \prope{symmetry} property}
      \\&\eqd \metricn(\tuplen{z_n},\tuplen{x_n}) + \metricn(\tuplen{z_n},\tuplen{y_n})
        &&    \text{by definition of $\metricn$}
    \end{align*}
  \end{enumerate}
\end{enumerate}
\end{proof}












%An example of linear construction \xref{thm:met_d=sumpi} are the \hie{taxi-cab metrics} 
%(\pref{exm:gtaxi} and \prefp{ex:ms_taxi}).
%---------------------------------------
\begin{example}[\exmd{Generalized Taxi-Cab Metric}]
%\footnote{
%  \citerpg{ab}{39}{0120502577}
%  }
\label{ex:gtaxi}
%---------------------------------------
Let $\setX$ be a set.
%Let $\opair{\setX}{\metrican}$ be a metric space over a set $\setX$.
Let $\tuplexn{x_n\in\setX}$ and $\tuplexn{y_n\in\setX}$ be $\xN$-tuples on $\setX$.
\exbox{
  \brb{\text{$\metrican$ is a metric on $\setX$}}
  \implies
  \begin{array}{LCM}
    \metric{\tuplen{x_n}}{\tuplen{y_n}} \eqd \sum_{n=1}^\xN \metrica{x_n}{y_n} &\forall x_n,y_n\in\setX & is a metric on $\setX$
  \end{array}}
\end{example}
\begin{proof}
\begin{align*}
  \metric{\tuplen{x_n}}{\tuplen{y_n}} 
    &=  \sum_{n=1}^\xN \metrica{x_n}{y_n} 
  \\&=  \mcom{\brp{\xN^r}\mcom{\brp{\sum_{n=1}^\xN \frac{1}{\xN}\metrican^r\opair{x_n}{y_n}}^\frac{1}{r}}{metric by \prefp{thm:met_power}}}{metric by \prefp{thm:met_fod} (see also \prefp{ex:alphametric})}
    &&  \text{where $r\eqd1$}
  \\&\implies \quad \text{$\metric{\tuplen{x_n}}{\tuplen{y_n}}$ is a metric}
\end{align*}

%This is a special case of \prefpp{thm:met_sumpf}
%with $\ff(x)\eqd x$.
%\begin{align*}
%  \intertext{\imark Proof that $\vx=\vy\implies\metric{\vx}{\vy}=0$:}
%  \metric{\vx}{\vy}
%    &\eqd \sum_{i=1}^n \metrica{x_i}{y_i}
%    &&    \text{by definition of $\metricn$}
%  \\&=    \sum_{i=1}^n \metrica{x_i}{x_i}
%    &&    \text{by left hypothesis}
%  \\&=    \sum_{i=1}^n 0
%    &&    \text{by \prope{nondegenerate} property of metric $\metrican$ (\prefpo{def:metric})}
%  \\&=    0
%  \\
%  \intertext{\imark Proof that $\vx=\vy\impliedby\metric{\vx}{\vy}=0$:}
%  0
%    &=    \metric{\vx}{\vy}
%    &&    \text{by right hypothesis}
%  \\&\eqd \sum_{i=1}^n \metrica{x_i}{y_i}
%    &&    \text{by definition of $\metricn$}
%  \\\implies \metrica{x_i}{y_i}&=0 \text{ for i=1,2,\ldots,\xN}
%    &&    \text{because $\metrican$ is non-negative}
%  \\\implies \vx&=\vy
%    &&    \text{because $\metrican$ is \prope{nondegenerate}}
%  \\
%  \intertext{\imark Proof that $\metric{x}{y}\le\metric{z}{x}+\metric{z}{y}$:}
%  \metric{\vx}{\vy}
%    &\eqd \sum_{i=1}^n \metrica{x_i}{y_i}
%    &&    \text{by definition of $\metricn$}
%  \\&\le  \sum_{i=1}^n \big[ \metrica{x_i}{z_i} + \metrica{z_i}{y_i} \big]
%    &&    \text{by triangle inequality property of metric $\metrican$ (\prefpo{def:metric})}
%  \\&=    \sum_{i=1}^n \metrica{z_i}{x_i} + \sum_{i=1}^n \metrica{z_i}{y_i}
%    &&    \text{by symmetry property of metric $\metrican$ (\prefp{def:metric})}
%  \\&\eqd \metric{z}{x} + \metric{z}{y}
%    &&    \text{by definition of $\metricn$}
%\end{align*}
\end{proof}



%\begin{minipage}{\textwidth/2}%
%\begin{center}%
%\includegraphics[width=7\tw/8, clip=]{../common/sncf.eps}
%\footnotemark
%\end{center}
%\end{minipage}%
%\footnotetext{\url{http://www.bueker.net/trainspotting/map.php?file=maps/french-network/french-network.gif}}%
%\begin{minipage}{\tw/2}
%---------------------------------------
%\begin{remark}
%\footnote{\citerp{runde}{25}}
%\label{ex:d_frm}
%---------------------------------------
In the French railway system, a large number of railway lines go through Paris.
%(see railway map to the left).
This means that often the distance from city $x$ to city $y$ is
$\metric{x}{p} + \metric{p}{y}$ where $p$ represents Paris.
This situation gives motivation for the \fncte{French Railroad Metric} (next).
%\[\begin{array}{>{\ds}l}
%  \text{\parbox{\tw}{The \hid{French railway metric} $\metricn[f]$ with respect to parameter $p$ and arbitrary metric $\metricn$ is}},
%  \metricsub{f}{x}{y;p} =
%  \left\{\begin{array}{lll}
%    0 & \text{for} & x=y \\
%    \metricn(x,p) + \metricn(p,y) & \text{for} & x\ne y
%  \end{array}\right.
%\end{array}\]
%\end{remark}
%\end{minipage}




%---------------------------------------
\begin{proposition}
\label{prop:p==>d}
\footnote{
  \citerps{giles1987}{17,34},
  \citerp{runde}{25}
  }
%---------------------------------------
Let $\setX$ be a set and $\metrican\in\clF{\setX\times\setX}{\R}$ be a function.
\propbox{\begin{array}{llrc>{\ds}lD}
  \mc{6}{l}{\text{If $\metrican$ is a metric, then the following functions are also metrics:}}
    \\& 1. & \metricsub{f}{x}{y;z}  &=& \brb{\begin{array}{lll}
                                               0                               & \text{for} & x=y \\
                                               \metrica{x}{z} + \metrica{z}{y} & \text{for} & x\ne y
                                             \end{array}}
           & (\fncte{French railway metric}) \index{metrics!French railway}
    \\& 2. & \metricsub{\metrican}{x}{y}  &=& \brb{\begin{array}{lll}
                                                     0 & \text{for}                               & x=y \\
                                                     \metrica{0}{x} + \metrica{0}{y} & \text{for} & x\ne y
                                                   \end{array}}
           & (\fncte{post office metric}) \index{metrics!post office}
\end{array}}
\end{proposition}
\begin{proof}
\begin{enumerate}
  \item Proof the $\metricsub{f}{x}{y;z}$ is a metric:
    \begin{align*}
    \intertext{\imark Proof that $x=y\implies\metricn_f(x,y;z)=0$:}
      \metricsub{f}{x}{y;z}
        &= \metricn_f(x,x)
        && \text{by left hypothesis}
      \\&= 0
        && \text{by definition of $\metricn_f$}
      \\
    \intertext{\imark Proof that $x=y\impliedby\metricn_f(x,y;z)=0$:}
      0
        &=    \metricn_f(x,y;z)
        &&    \text{by right hypothesis}
      \\&\eqd \left\{\begin{array}{ll}
                0                 &\text{for } x=y \\
                \metrica{x}{z}+\metrica{z}{y} &\text{for } x\ne y
              \end{array} \right.
        &&    \text{by definition of $\metricn_f$}
      \\&\ge  \left\{\begin{array}{ll}
                0                 &\text{for } x=y \\
                \metricn_f(x,y;z)          &\text{for } x\ne y
              \end{array} \right.
        &&    \text{by \pref{def:metric}}
      \\&\ge  0
        &&    \text{by \pref{def:metric}}
      \\\implies \metricn_f(x,y;z) &= 0 \qquad \forall x,y\in\spX
      \\\implies x&=y
        && \text{by \pref{def:metric}}
      \\
    \intertext{\imark Proof that $\metricn_f(x,y;z)\le\metricn_f(u,x)+\metricn_f(u,y)$:}
      \metricn_f(x,y;z)
        &\eqd \left\{\begin{array}{ll}
                0                 &\text{for } x=y \\
                \metrica{x}{z}+\metrica{z}{y} &\text{for } x\ne y
              \end{array} \right.
        &&    \text{by definition of $\metricn_f$}
      \\&\le  \left\{\begin{array}{ll}
                0                 &\text{for } x=y \\
                \metrica{u}{z}+\metrica{z}{x} &\text{for } x\ne y
              \end{array} \right.
     \\&\qquad+    \left\{\begin{array}{ll}
                0                 &\text{for } x=y \\
                \metrica{u}{z}+\metrica{z}{y} &\text{for } x\ne y
              \end{array} \right.
        &&    \text{by \pref{def:metric}}
      \\&=    \metricn_f(u,x) + \metricn_f(u,y)
        &&    \text{by definition of $\metricn_f$}
    \end{align*}

  \item Proof for Post Office Metric: this is a special case
        of the French Railroad metric (with $z=0$).



\end{enumerate}
\end{proof}


%\prefpp{prop:p==>d} demonstrated that we can generate new metrics from old ones.
%But these new metrics are essentially in the same form as the old metrics used to generate them 
%in the sense that both have the same domain.
%\pref{prop:p==>dn} (next) demonstrates that it is also possible to construct 
%a metric $\metricn$ over 
%\emph{sequences} of elements (or over vector spaces) using a metric $\metrican$ over 
%pairs of elements. Examples of such constructions include the following:\\
%\begin{tabular}{>{\imark}llll}
%  & Hamming distance  & \pref{ex:d_hamming}     & \prefpo{ex:d_hamming},
%  & Taxi-cab metric   & \pref{ex:ms_taxi}      & \prefpo{ex:ms_taxi},
%  & Euclidean metric  & \pref{ex:ms_euclidean} & \prefpo{ex:ms_euclidean},
%  & Sup metric        & \pref{ex:ms_sup}       & \prefpo{ex:ms_sup},
%  & Parabolic metric  & \pref{ex:ms_parabolic} & \prefpo{ex:ms_parabolic},
%  & Tangential metric & \pref{ex:ms_tan}        & \prefpo{ex:ms_tan}
%\end{tabular}

%======================================
\section{Examples}
%======================================
%The beauty of \structe{metric space} \xref{def:metric}\index{space!metric}s lies in the fact that they do not require
%the underlying set to have any mathematical structure (other than being a set).
%However, in many practical applications, the set $\setX$ is a {\em ring}.
%A ring
%\ifdochas{setstrct}{\footnote{
%  \structe{ring}: \prefp{def:set_ring} \prefpo{def:set_ring}
%  }}
%is a mathematical structure that supports addition, subtraction, and
%multiplication.
%Examples of rings include the real numbers, complex numbers, and rational numbers.
%The \fncte{absolute value}
%\ifdochas{algebra}{\footnote{
%  \fncte{absolute value}: \prefp{def:abs} \prefpo{def:abs}
%  }}
%is a function defined on a ring.
%\prefpp{ex:d_usual} gives an example of a \structe{metric space} \xref{def:metric} on rings 
%using the \fncte{absolute value} function.
%---------------------------------------
\begin{example}
\label{ex:d_usual}
\footnote{
  \citerpg{davis2005}{16}{0071243399} 
  }
\index{usual metric}
\index{metrics!usual}
%---------------------------------------
Let $\absn\in\clF{R}{\Rnn}$ be an \fncte{absolute value} \xref{def:abs} function on a \structe{ring} \xref{def:ring} $R$.
\exbox{
  \text{The function}
  \qquad
  \metric{x}{y} \eqd \abs{x-y}
  \qquad
  \text{is a \fncte{metric}.}
  }
This metric is called the \hid{usual metric}.
It is defined on any ring such as the ring of \sete{real numbers}, \sete{rational numbers},
\sete{complex numbers}, etc.
\end{example}
\begin{proof}
Proof by use of \prefpp{thm:metric_equiv} \ldots
\begin{align*}
\intertext{\imark Proof that $x=y\implies\metric{x}{y}=0$:}
  \metric{x}{y}
    &\eqd \abs{x-y}
    &&    \text{by definition of $\metricn$}
  \\&=    \abs{x-x}
    &&    \text{by left hypothesis}
  \\&= 0
  \\
\intertext{\imark Proof that $x=y\impliedby\metric{x}{y}=0$:}
  0 
    &= \metric{x}{y}
    && \text{by right hypothesis}
  \\&= \abs{x-y}
    && \text{by definition of $\metricn$}
  \\\implies& x=y
    && \text{by property of $\absn$}
  \\
\intertext{\imark Proof that $\metric{x}{y}=\metric{z}{x}+\metric{z}{y}$:}
  \metric{x}{y}
    &= \abs{x-y}
    && \text{by definition of $\metricn$}
  \\&=    \abs{x-z+z-y}
  \\&\le  \abs{x-z} + \abs{z-y}
    &&    \text{by \prope{subadditive} property of $\absn$\ifsxref{algebra}{def:abs}}
  \\&=    \abs{z-x} + \abs{z-y}
  \\&=    \metric{z}{x} + \metric{z}{y}
    &&    \text{by definition of $\metricn$ \xref{def:metric}}
\end{align*}
\end{proof}




%---------------------------------------
\begin{example}[\exmd{The discrete metric}]
\label{ex:d_discrete}
\footnote{
  \citerpgc{busemann1955}{4}{0486154629}{{\scshape Comments on the axioms}},
  %\citerpg{davis2005}{17}{0071243399},
  \citerpg{giles1987}{13}{0521359287},
  \citerpg{copson1968}{24}{0521047226},
  \citerpgc{khamsi2001}{19}{0471418250}{Example 2.1}
  }
\index{metrics!discrete}
\index{discrete metric}
%---------------------------------------
Let $\setX$ be a set and $\metricn\in\clF{\setX\times\setX}{\R}$.
\\
\begin{minipage}{3\textwidth/4}
\exbox{\begin{array}{>{\imark} rcl>{\ds}l}
  & \metric{x}{y} &\eqd& \left\{\renewcommand{\arraystretch}{1}\begin{array}{ll}1 &\text{for } x\ne y \\0&\text{for }x=y \end{array} \right.
    \text{ is a metric.}
  \\
  & \mc{3}{l}{\text{$\metricn$ is \emph{not} generated by a norm.}}
  \\
  & \ball{0}{1} &=& \setn{0}
  \\
  & \diam \ball{0}{1} &=& 0
\end{array}}
\end{minipage}%
\begin{minipage}{\textwidth/4}
%\begin{figure}[ht]
\color{figcolor}
\begin{center}
\begin{fsL}
\setlength{\unitlength}{\tw/500}
\begin{picture}(400,340)(-200,-30)
  %{\color{graphpaper}\graphpaper[10](-150,0)(300,300)}
  \thinlines
  \put(   0,   0){\line(-1, 1){100} }
  \put(   0,   0){\line( 0, 1){300} }
  \put(   0,   0){\line( 1, 1){100} }

  \put( 100, 100){\circle*{15}}
  \put(   0, 300){\circle*{15}}
  \put(-100, 100){\circle*{15}}
  \put(   0,   0){\circle*{15}}

  \put(  10, 200){\makebox(0,0)[l] { $\fd(x,c)=1$ }}
  \put(  60,  50){\makebox(0,0)[tl]{ $\fd(x,b)=1$ }}
  \put(- 60,  50){\makebox(0,0)[tr]{ $\fd(x,a)=1$ }}
  \put(  10,   0){\makebox(0,0)[l] { $\fd(x,x)=0$ }}

  \put(   0, 310){\makebox(0,0)[b]{ $c$ }}
  \put( 100, 110){\makebox(0,0)[l]{ $b$ }}
  \put(-100, 110){\makebox(0,0)[r]{ $a$ }}
  \put(   0, -10){\makebox(0,0)[t]{ $x$}}
\end{picture}
\end{fsL}
\end{center}
\end{minipage}%
\\
This metric is called the \fncte{discrete metric}.
It is unusual among metrics because so little is required of the set $\setX$.
In particular, $\setX$ does not need to be equipped with any order structure
(does not need to be a partially or totally ordered set).
The diameter of $\opair{\setX}{\fd}$ is 1.
\end{example}
\begin{proof}
\begin{enumerate}
  \item Proof that $\metric{x}{y}$ is a metric (using \prefp{thm:metric_equiv}):
    \begin{align*}
    \intertext{\imark Proof that $x=y\implies\metric{x}{y}=0$:}
      \metric{x}{y}
        &\eqd \left\{\begin{array}{ll}1 &\text{for } x\ne y \\0&\text{for }x=y \end{array} \right.
        &&    \text{by definition of $\fd$}
      \\&= 0
        && \text{by $x=y$ hypothesis}
      \\
    \intertext{\imark Proof that $x=y\impliedby\metric{x}{y}=0$:}
      0
        &=    \metric{x}{y}
        &&    \text{by $\metric{x}{y}=0$ hypothesis}
      \\&\eqd \left\{\begin{array}{ll}1 &\text{for } x\ne y \\0&\text{for }x=y \end{array} \right.
        &&    \text{by definition of $\fd$}
      \\\implies x&=y
        && \text{}
      \\
    \intertext{\imark Proof that $\metric{x}{y}\le\fd(z,x)+\fd(z,y)$:}
      \metric{x}{y}
        &\eqd \left\{\begin{array}{ll}1 &\text{for } x\ne y \\0&\text{for }x=y \end{array} \right.
        &&    \text{by definition of $\fd$}
      \\&\le  \left\{\begin{array}{ll}1 &\text{for } z\ne x \\0&\text{for }z=x \end{array} \right. +
              \left\{\begin{array}{ll}1 &\text{for } z\ne y \\0&\text{for }z=y \end{array} \right.
      \\&=    \fd(z,x) + \fd(z,y)
        &&    \text{by definition of $\fd$}
    \end{align*}

  \item Proof that $\metricn$ is not generated by a norm:
    \begin{align*}
      \norm{\alpha x}
        &= \metric{\alpha x}{0}
        && \text{for some function $\normn$}
      \\&= \left\{\begin{array}{ll}1 &\text{for } \alpha x\ne 0 \\0&\text{for }\alpha x=0 \end{array} \right.
        && \text{by definition of $\metricn$}
      \\&= \left\{\begin{array}{ll}1 &\text{for } x\ne 0 \\0&\text{for } x=0 \end{array} \right.
      \\&= \metric{x}{0}
        && \text{by definition of $\metricn$}
      \\&\ne  \abs{\alpha}\metric{x}{0}
      \\&= \abs{\alpha}\norm{x}
    \end{align*}

  \item Proof that $\ball{0}{1}=\setn{0}$:
    \begin{align*}
      \ball{0}{1}
        &= \set{x\in\spX}{\metric{0}{x}<1}
        && \text{by definition of open ball $\balln$ \prefpo{def:ball}}
      \\&= \setn{0}
    \end{align*}

  \item Proof that $\diam\ball{0}{1}=0$:
    \begin{align*}
      \diam\ball{0}{1}
        &= \diam\setn{0}
        && \text{by previous result}
      \\&= \sup\set{\metric{x}{y}}{x,y\in\setn{0}}
        && \text{by definition of $\diam$ \prefpo{def:diam}}
      \\&= \sup\setn{\metric{0}{0}}
      \\&= \sup\setn{0}
        && \text{by \prope{non-degenerate} propery of $\metricn$ \xref{def:metric}}
      \\&= 0
    \end{align*}

  \end{enumerate}
\end{proof}


%======================================
\subsection{Metrics on finite sets}
%======================================
\parbox[c][][c]{\textwidth/3}{
%\begin{figure}[ht]
\color{figcolor}
\begin{center}
\begin{fsL}
\setlength{\unitlength}{0.15mm}
\begin{picture}(440,240)(-220,-120)
  %\graphpaper[10](0,0)(600,200)
  \thinlines
  \put(   0,   0){\line(-1, 0){200} }
  \put(   0,   0){\line( 0, 1){100} }
  \put(   0,   0){\line( 1,-2){100} }

  \put(   0, 100){\circle*{15}}
  \put( 100,-200){\circle*{15}}
  \put(-200,   0){\circle*{15}}
  \put(   0,   0){\circle*{15}}

  \put(-200,  10){\makebox(0,0)[b] {$1000$}}
  \put(  10,   0){\makebox(0,0)[lb]{$1011$}}
  \put(  10, 100){\makebox(0,0)[lb]{$1111$}}
  \put(90,-200){\makebox(0,0)[r]{$0100$}}

  \put(-100, -10){\makebox(0,0)[t] {$\fd(1011,1000)=2$}}
  \put( -10,  50){\makebox(0,0)[r] {$\fd(1011,1111)=1$}}
  \put(  40,-100){\makebox(0,0)[tr]{$\fd(1011,0100)=3$}}
\end{picture}
\end{fsL}
\end{center}
}
\parbox[c][][c]{2\textwidth/3}{
%---------------------------------------
\begin{example}[Hamming distance]
\label{ex:d_hamming}
\index{Hamming distance}
\index{metrics!Hamming distance}
%---------------------------------------
Let $\vx\eqd\seqn{x_1,x_2,\ldots,x_n}$,
    $\vy\eqd\seqn{y_1,y_2,\ldots,y_n}$,
    and $x_i,y_i\in\setn{0,1}$.
\exbox{\begin{array}{rc>{\ds}l}
  \mc{3}{l}{\text{The {\em Hamming distance} between $\vx$ and $\vy$ is defined as}}\\
  \fd(\vx,\vy) &\eqd& \sum_{i=1}^n \metrica{x_i}{y_i}\\
  \mc{3}{l}{\text{where}}\\
  \metrica{x}{y} &\eqd& \left\{\begin{array}{ll}1&\text{for }x\ne y\\0&\text{for }x=y\end{array}\right.. \\
  \\
  \mc{3}{l}{\text{The function $\fd$ is a metric.}}
\end{array}}
\end{example}
}
\begin{proof}
\prefpp{ex:d_discrete} already showed that $\metrican$ is a metric.
And because of this and by \prefpp{prop:p==>d},
$\fd$ is also a metric.
\end{proof}




%--------------------------------------
\begin{example}[lattice metric]
\label{ex:lat_norm}
\footnote{
  \citerpg{blumenthal1970}{25}{0828402426}
  }
\index{lattice metric}
\index{metrics!lattice}
%--------------------------------------
Let $L=(X,\olessthan,\lor,\land)$ be a lattice.
\exbox{\begin{array}{l@{\qquad}ll@{\qquad}C@{\qquad}D}
  \mc{5}{l}{\text{Let $\norm{x}:X\to\R$ be a function that satisfies the conditions}}
    \\& 1. & x \olessthan y \implies \norm{x} \le \norm{y}          & \forall x,y \in X & (\prope{monotonic)}
    \\& 2. & \norm{x\lor y} + \norm{x\land y} = \norm{x} + \norm{y} & \forall x,y \in X &
    \\\mc{5}{l}{\text{Then $\metric{x}{y}\eqd \norm{x\lor y} - \norm{x\land y}$ is a \hib{metric} on $L$.}}
\end{array}}
\end{example}
\begin{proof}
\begin{align*}
  \intertext{1. Proof that $\metric{x}{y}\ge 0$:}
    \metric{x}{y}
      &= \norm{x\lor y} - \norm{x\land y}
      && \text{by definition of $\metric{x}{y}$}
    \\&\ge 0
      && \text{by condition 1 and because $x\lor y \ge x\land y$}
    \\
  \intertext{2. Proof that $\metric{x}{y}=0\implies x=y$:}
    \metric{x}{y}=0
      &\implies  \norm{x\lor y} = \norm{x\land y}
      &&         \text{by definition of $\metric{x}{y}$}
    \\&\implies  x\lor y = x\land y
      &&         \text{by definition of $\norm{x}$ condition 1}
    \\&\implies  x= y
      &&         \text{by definition of $\lor$ and $\land$}
    \\
  \intertext{3. Proof that $\metric{x}{y}=0\impliedby x=y$:}
    \metric{x}{y}
      &= \norm{x\lor y} - \norm{x\land y}
      && \text{by definition of $\metric{x}{y}$}
    \\&= \norm{x\lor x} - \norm{x\land x}
      && \text{by right hypothesis}
    \\&= \norm{x} - \norm{x}
      && \text{by \prope{idempotent} property \ifxref{lattice}{thm:lattice}}
    \\&= 0
  \intertext{4. Proof that $\metric{x}{y}=\fd(y,x)$:}
    \metric{x}{y}
      &= \norm{x\lor y} - \norm{x\land y}
      && \text{by definition of $\metric{x}{y}$}
    \\&= \norm{y\lor x} - \norm{y\land x}
      && \text{by \prope{commutative} property \ifxref{lattice}{thm:lattice}}
    \\&= \fd(y,x)
      && \text{by definition of $\metric{x}{y}$}
    \\
  \intertext{5. Proof that $\metric{x}{y}\le \fd(x,z)+\fd(z,y)$:}
    &\fd(x,z) + \fd(z,y)
    \\&=   \mcom{\left( \norm{x\lor z} - \norm{x\land z} \right)}{$\metric{x}{y}$}
       +   \mcom{\left( \norm{z\lor y} - \norm{z\land y} \right)}{$\fd(z,y)$}
      &&   \text{by definition of $\metric{x}{y}$}
    \\&=   \left( \norm{x\lor  z} + \norm{z\lor  y} \right)
       -   \left( \norm{x\land z} + \norm{z\land y} \right)
    \\&=   \left( \norm{(x\lor  z)\lor(z\lor  y)} + \norm{(x\lor  z)\land(z\lor  y)} \right)
      \\&\quad-   \left( \norm{(x\land z)\lor(z\land y)} + \norm{(x\land z)\land(z\land y)} \right)
      &&   \text{by definition of $\norm{x}$}
    \\&=         \left( \norm{(x\lor  y)\lor z} + \norm{(x\lor  z)\land(z\lor  y)} \right)
      \\&\quad - \left( \norm{(x\land z)\lor(z\land y)} + \norm{(x\land y)\land z} \right)
      &&   \ifdochas{lattice}{\text{by \prefp{thm:lattice}}}
    \\&\ge       \left( \norm{(x\lor  y)\lor  z} + \norm{(x\land y)\lor  z} \right)
      \\&\quad - \left( \norm{(x\lor  y)\land z} + \norm{(x\land y)\land z} \right)
      &&   \text{by \thme{distributive inequality}\ifsxref{lattice}{thm:lat_dis_<}}
    \\&\ge       \left( \norm{(x\lor  y)\lor z} + \norm{(x\lor  y)\land z} \right)
      \\&\quad - \left( \norm{(x\land y)\lor z} + \norm{(x\land y)\land z} \right)
      &&   \text{by \thme{minimax inequality}\ifsxref{lattice}{thm:minimax_ineq}}
    \\&= \left( \norm{x\lor  y} + \norm{z} \right)
       - \left( \norm{x\land y} + \norm{z} \right)
      &&   \text{by definition of $\normn$ \prefpo{def:norm}}
    \\&= \norm{x\lor  y} - \norm{x\land y}
    \\&= \metric{x}{y}
      &&   \text{by definition of $\metricn$ \prefpo{def:metric}}
\end{align*}
\end{proof}


\tbox{\includegraphics{../common/math/graphics/pdfs/lat8_2e3_setxyz.pdf}}\hfill%
%\begin{minipage}[c]{40mm}
%  \begin{center}%
%  \input{../common/math/graphics/lat2xyz.tex}
%  \end{center}%
%\end{minipage}%
%\hfill%
\begin{minipage}{\tw-43mm}\raggedright
%---------------------------------------
\begin{example}[metric on powerset lattice]
\label{ex:norm_d_powerset}
\index{power set}
\index{metrics!power set}
%---------------------------------------
  Let $\setX$ be a set, $\psetx$ the power set of $\setX$
  and $\seto{\setA}$ the order of a set $\setA$ (the number of elements in $\setA$).
  The tupple $\lattice{\psetx}{\subseteq}{\setu}{\seti}$ is a \structe{lattice}.\footnotemark
  A metric $\fd(\setA,\setB):\psetx\to\R$ can be defined as
  \exbox{
    \metric{\setA}{\setB} \eqd \norm{\setA\setu \setB} - \norm{\setA\seti\setB}
    \quad\text{where}\quad
    \norm{\setA} \eqd \abs{\setA}
    \qquad\scriptstyle
    \forall \setA,\setB\in\psetx
    }
  \\
  The \structe{Hasse diagram} for $\opair{\pset{\setn{x,y,z}}}{\subseteq}$
  is illustrated in the figure to the left.
\end{example}
\end{minipage}
\footnotetext{\begin{tabular}[t]{>{\em}lll}
  \ifdochas{found}{powerset: & \pref{def:powerset} & \prefpo{def:powerset}  \\}
  \ifdochas{found}{symmetric difference: & \pref{def:set_ops}  & \prefpo{def:set_ops}  \\}
  \ifdochas{found}{set order:            & \pref{def:order}    & \prefpo{def:order}    \\}
  \ifdochas{lattice}{$\pset{\setn{x,y,z}}$ lattice example: & \pref{ex:lat_xyz} & \prefpo{ex:lat_xyz}}
  \end{tabular}}
\begin{proof}
  Proof that $\norm{A}$ satisfies the conditions of a lattice norm:
      \begin{enumerate}
        \item $A\subseteq B \implies \abs{A}\le\abs{B} \implies \norm{A}\le\norm{B}$
        \item $\norm{A\setu B} + \norm{A\seti B} = \abs{A\setu B} + \abs{A\seti B}
              = \abs{A} + \abs{B} = \norm{A} + \norm{B}$
      \end{enumerate}
\end{proof}

%---------------------------------------
\begin{example}[Symmetric difference metric / Fr\'echet-Nikodym-Aronszayn distance]
\label{ex:d_powerset}
\footnotemark
\index{powerset lattice}
\index{lattice!powerset}
\index{symmetric difference metric}
\index{Fr\'echet-Nikodym-Aronszayn distance}
\index{metrics!symmetric difference metric}
\index{metrics!Fr\'echet-Nikodym-Aronszayn distance}
%---------------------------------------
Let $\setX$ be a set, $\psetx$ the power set of $\setX$,
$\setA\sets \setB$ the symmetric difference of sets $\setA,\setB\subseteq \setX$,
and $\seto{\setA}$ the order of a set $\setA$ (the number of elements in $\setA$).\footnotemark
\\
\tbox{\includegraphics{../common/math/graphics/pdfs/lat8_2e3_setxyz.pdf}}\hfill%
\begin{minipage}{\tw-43mm}\raggedright
\exbox{
  \text{The function}\qquad
  \big\{
  \metric{\setA}{\setB} \eqd \seto{\setA \sets \setB} \qquad{\scriptstyle \forall \setA,\setB\in\psetx}
  \big\}
  \qquad\text{is a metric.}
  }
\\
The tupple $(\psetx,\subseteq,\setu,\seti)$ is a \structe{lattice}.
The \structe{Hasse diagram} for $\opair{\pset{\setn{x,y,z}}}{\subseteq}$
is illustrated in
%\prefpp{fig:ms_hasse_abc}.
the figure to the left.
Notice that the distance (the metric) $\metric{\setA}{\setB}$ between any two sets $\setA$ and $\setB$
is just the shortest number of nodes that one must travel to get from $\setA$ to $\setB$.
\end{minipage}
\footnotetext{
  \citerpg{deza2006}{25}{0444520872}
  }
\end{example}
\begin{proof}
The distance between any two sets is simply the number of elements that
are different between the two sets.
Therefore, this example is essentially the same as \prefpp{ex:d_hamming}
(Hamming distance example).
\end{proof}



%======================================
\subsection{Metrics on infinite sets}
%======================================
%---------------------------------------
\begin{example}
\footnote{
  \citerp{dieudonne1969}{29}
  }
%---------------------------------------
Let $\metricn:\setX\to\R$, $\fx:\setX\to\setY$, and $\fy:\setX\to\setY$ be functions
on a set $\setX$.
Then $(\setX,\metricn)$ is a metric space if $\metricn$ is defined as
\exbox{
  \metric{\fx}{\fy} = \sup_{t\in\setA}\abs{\fx(t)-\fy(t)}
  }
\end{example}
\begin{proof}
\begin{align*}
  \intertext{1. Proof that $\metric{\fx}{\fy}=0 \implies \fx=\fy$:}
    0
      &=   \metric{\fx}{\fy} 
      &&   \text{by left hypothesis}
    \\&=   \sup_{t\in\setA}\abs{\fx(t)-\fy(t)}
      &&   \text{by definition of $\metricn$}
    \\\implies& \fx=\fy
    \\    
  \intertext{2. Proof that $\metric{\fx}{\fy}=0 \impliedby \fx=\fy$:}
    \metric{\fx}{\fy} 
      &=   \sup_{t\in\setA}\abs{\fx(t)-\fy(t)}
      &&   \text{by definition of $\metricn$}
    \\&=   \sup_{t\in\setA}\abs{\fx(t)-\fx(t)}
      &&   \text{by right hypothesis}
    \\&=   0
    \\
  \intertext{3. Proof that $\metric{\fx}{\fy}\le\metric{\fx}{\fz}+\metric{\fy}{\fz}$:}
    \metric{\fx}{\fy} 
      &=   \sup_{t\in\setA}\abs{\fx(t)-\fy(t)}
      &&   \text{by definition of $\metricn$}
    \\&=   \sup_{t\in\setA}\abs{\fx(t)-\fz(t)+\fz(t)-\fy(t)}
    \\&\le \sup_{t\in\setA}\abs{\fx(t)-\fz(t)} + \sup_{t\in\setA}\abs{\fz(t)-\fy(t)}
    \\&=   \sup_{t\in\setA}\abs{\fx(t)-\fz(t)} + \sup_{t\in\setA}\abs{\fy(t)-\fz(t)}
    \\&=   \metric{\fx}{\fz} + \metric{\fy}{\fz} 
      &&   \text{by definition of $\metricn$}
\end{align*}
\end{proof}

%---------------------------------------
\begin{example}[p-adic metric]
\label{ex:ms_padic}
\index{metrics!p-adic}
\index{p-adic metric}
\footnote{
  \citerp{dieudonne1969}{30}
  }
%---------------------------------------
For any rational number $x\in\Q$, there exists \\
  \begin{tabular}{lll}
    1. & the sequence of all prime numbers   & $\seq{p_i}{i\in\Zp} = \seqn{1,2,3,5,\ldots}$, \\
    2. & a sequence of numerator exponents   & $\seq{n_i\in\Znn}{i\in\Zp}$, \text{ and}\\
    3. & a sequence of denominator exponents & $\seq{m_i\in\Znn}{i\in\Zp}$ 
  \end{tabular},
  \[ \text{such that}\qquad x = \frac{\ds\prod_{i\in\Zp} p_i^{n_i}}{\ds\prod_{i\in\Zp} p_i^{m_i}}. \]

\exbox{\begin{array}{rc>{\ds}lC}
  \mc{4}{l}{\text{Then for any prime number $p$, the pair $(\Q,\metric{x}{y;p})$ is a metric space where}}
  \\
  \metric{x}{y;p} &=& 
    \left\{\begin{array}{>{\ds}cl}
      0                             & \text{for } x=y      \\
      \frac{1}{p^{\ftheta(x-y;p)}}  & \text{for } x\ne y
    \end{array}\right.
    & \forall x,y \in \Q
  \\
  \mc{4}{l}{\text{where the function $\ftheta$ is defined as}}
  \\
  \ftheta(x;p)  &=& n_i - m_i \qquad \text{where the value of index $i$ is such that } p=p_i.
\end{array}}
\end{example}

%======================================
\subsection{Metrics on n-tuples}
%======================================
%---------------------------------------
\begin{example}
%---------------------------------------
Let $\tuplexn{x_n}$ and $\tuplexn{y_n}$ be n-tuples over a set $\setX$.
Let $\fphi$ be a function in $\clF{\setX}{\R}$ on $\setX$.
\exbox{\begin{array}{L}
  \brb{\begin{array}{DM}
    1. & $\fphi$ is \prope{convex}\\
    2. & $\fphi$ is \prope{strictly monotonic}\\
    3. & $\fphi(0)=0$\\
    4. & $\log\circ\fphi\circ\exp$ is \prope{convex}\\
    5. & $\fphi(-x)=\fphi(x)$ (\prope{even})
    \end{array}}
  \quad\implies\quad
  \brb{\begin{array}{L}
    \metric{\tuplen{x_n}}{\tuplen{y_n}}\eqd \fphi^{-1}\brp{\sum_{n=1}^{\xN} \lambda_n \fphi\brp{x_n-y_n}}
    \\\text{ is a \prope{metric}.}
  \end{array}}
  \\
  \text{In the special case that $\fphi(x)\eqd\abs{x}$ such that}
  \\
  \qquad\metric{\tuplexn{x_n}}{\tuplexn{y_n}}\eqd \brp{\sum_{n=1}^{\xN} \lambda_n \abs{x_n-y_n}^r}^{\frac{1}{r}},
  \\
  \text{$\norm{x}\eqd\metric{x}{x}$ is a \prope{norm}.}
  \end{array}}
\end{example}
\begin{proof}
\begin{enumerate}
  \item Proof that $\tuplexn{x_n}=\tuplexn{y_n}\implies  \metric{\tuplexn{x_n}}{\tuplexn{y_n}}=0$: by definition of $\metricn$.
  \item Proof that $\tuplexn{x_n}=\tuplexn{y_n}\impliedby\metric{\tuplexn{x_n}}{\tuplexn{y_n}}=0$: by \prope{strictly monotonic} property.
  \item Proof that $\metric{\tuplexn{x_n}}{\tuplexn{y_n}}\le\metric{\tuplexn{z_n}}{\tuplexn{x_n}}\metric{\tuplexn{z_n}}{\tuplexn{y_n}}$:
    \begin{align*}
      \metric{\tuplen{x_n}}{\tuplen{y_n}}
          &=   \fphi^{-1}\brp{\sum_{n=1}^\xN \lambda_n \fphi\brp{x_n-y_n}}
          &&   \text{by definition of $\metricn$}
        \\&=   \fphi^{-1}\brp{\sum_{n=1}^\xN \lambda_n \fphi\brp{x_n-z_n+z_n-y_n}}
        \\&\le \fphi^{-1}\brp{\sum_{n=1}^\xN \lambda_n \fphi\brp{x_n-z_n}} + \fphi^{-1}\brp{\sum_{n=1}^\xN \lambda_n \fphi\brp{z_n-y_n}}
          &&   \text{by \prefp{thm:lp_wphi}}
        \\&=   \fphi^{-1}\brp{\sum_{n=1}^\xN \lambda_n \fphi\brp{z_n-x_n}} + \fphi^{-1}\brp{\sum_{n=1}^\xN \lambda_n \fphi\brp{z_n-y_n}}
          &&   \text{by \prope{even} property}
        \\&=   \metric{\tuplen{z_n}}{\tuplen{x_n}} + \metric{\tuplen{z_n}}{\tuplen{y_n}}
          &&   \text{by definition of $\metricn$}
    \end{align*}
  
  \item Therefore by \prefpp{thm:metric_equiv}, $\metricn$ is a \prope{metric}.
  \item $\normn$ is a \prope{norm} by \prefpp{prop:lp_norm}.
\end{enumerate}
\end{proof}

%======================================
%\ifdochas{metricex}{\subsection{More examples}}
%======================================
\ifdochas{metricex}{\input{../common/metricex}}


%======================================
\section{Literature}
%======================================
\begin{survey}
\begin{liste}
  \item general reference books about \structe{metric space}s:
    \\\citer{copson1968} 
    \\\citer{giles1987} 

  \item more sophisticated references:
    \\\citer{blumenthal1970}
    \\\citer{busemann1955}
    \\\indentdr\citer{busemann1955r}

  \item \structe{metric space}s and \prope{convexity}:\\
    \citer{khamsi2001}

  \item ``\structe{length spaces}":\\
    \citer{burago}

  \item spaces of \structe{metric space}s:\\
    \citer{burago}

  \item Very large collections of metric examples:\\
    \citerg{deza2006}{0444520872}\\
    \citerg{deza2009}{3642002331}

\end{liste}
\end{survey}

