%============================================================================
% LaTeX File
% Daniel J. Greenhoe
%============================================================================

%======================================
\chapter{Distance Spaces}
\label{chp:dspace}
\label{app:distance}
\label{app:dspace}
%======================================

A \structe{distance space} \xref{def:dspace} can be defined as a \structe{metric space} \xref{def:metric}
without the \prope{triangle inequality} constraint.
Much of the material in this chapter about \structe{distance space}s is
standard in \structe{metric space}s.
However, this chapter revisits what may commonly be associated with metric spaces 
to demonstrate ``how far we can go", and can't go, 
without the \prope{triangle inequality}.

%======================================
\section{Introduction}
%======================================
\structe{Metric space}s \xref{chp:metric} provide a framework for analysis and have several very useful properties.
Many of these properties follow in part from the \rele{triangle inequality} \xref{def:metric}.
However, there are several applications\footnote{references for applications in which the \rele{triangle inequality} may not hold:
  \citePpc{maligranda1987}{54}{``pseudonorm"},
  \citePc{lin1998}{``similarity measures", Table 6},
  \citePc{veltkamp2000}{``shape similarity measures"},
  \citePc{veltkamp2001}{``shape matching"},
  \citePc{costa2003}{``network distance estimation"},
  \citePpgc{burstein2005}{287}{3540258663}{distance matrices for ``genome phylogenies"},
  \citerpgc{jimenez2006}{224}{0387233946}{``statistical distances"},
  \citePpc{szirmai2007}{388}{``geodesic ball"},
  \citePpc{crammer2007}{326}{``decision-theoretic learning"},
  \citePpc{crammer2008}{1758}{``\emph{approximate} triangle inequality"},
  \citePpc{vitanyi2011}{2455}{``information distance"}
  }
in which the triangle inequality does not hold but in which we would still like to perform analysis.
So the questions that natually follow are:
\\\indentx$\begin{array}{FM}
    Q1. & What happens if we remove the \prope{triangle inequality} all together?
  \\Q2. & What happens if we replace the \prope{triangle inequality} with a generalized relation?
\end{array}$

A \structe{distance space} is a \structe{metric space} without the \structe{triangle inequality} constraint.
\pref{sec:dspace} introduces \structe{distance space}s and demonstrates that some properties 
commonly associated with \structe{metric space}s also hold in any \structe{distance space}:
%For example, the following are not only true in \structe{metric space}s, but in any \structe{distance space} $\dpspaceX$ as well:
\\\indentx$\begin{array}{FMM}
      D1. & $\emptyset$ and $\setX$ are \prope{open}                                          & \xref{thm:dspace_open}
    \\D2. & the intersection of a finite number of open sets is \prope{open}                  & \xref{thm:dspace_open}
    \\D3. & the union of an arbitrary    number of open sets is \prope{open}                  & \xref{thm:dspace_open}
    \\D4. & every \prop{Cauchy} sequence is \prope{bounded}                                   & \xref{prop:cauchy==>bounded}
    \\D5. & any subsequence of a \prope{Cauchy} sequence is also \prope{Cauchy}               & \xref{prop:cauchy_subseq}
    \\D6. & the \thme{Cantor Intersection Theorem} holds                                      & \xref{thm:cit}
\end{array}$

The following five properties (M1--M5) \emph{do} hold in any \structe{metric space}.
However, the examples from \pref{sec:dspace} listed below demonstrate that the five properties do \emph{not} 
hold in all \structe{distance spaces}: %\footnote{The examples referred to for M1--M5 can all in essense be found in \citerppgc{blumenthal1953}{8}{12}{0828402426}{6. Topology of semimetric spaces}}
\\\indentx$\begin{array}{FMDM}
      M1. & the \fncte{metric function} is \prope{continuous}                  &fails to hold in&\pref{ex:dspace_01}--\pref{ex:dspace_21}
    \\M2. & \structe{open ball}s are \prope{open}                              &fails to hold in&\pref{ex:dspace_01} and \pref{ex:dspace_1n}
    \\M3. & the \structe{open ball}s form a \structe{base} for a topology      &fails to hold in&\pref{ex:dspace_01} and \pref{ex:dspace_1n}
    \\M4. & the limits of \structe{convergent sequence}s are \prope{unique}    &fails to hold in&\pref{ex:dspace_01}
    \\M5. & \prope{convergent} sequences are \prope{Cauchy}                    &fails to hold in&\pref{ex:dspace_1n}
\end{array}$
\\
Hence, \pref{sec:dspace} answers question Q1.

\pref{app:trirel} begins to answer question Q2 by first introducing a new function, 
called the \fncte{power triangle function}
%\footnote{
%  A different but similar definition can be found in \citePp{bessenyei2014}{2}
%  where it is a special case of a function that the author calls a ``\fncte{triangle function}".
%  }
in a \structe{distance space} $\dspaceX$, as 
\quad$\ptfD\eqd 2\sigma\brs{\frac{1}{2}\distancen^p(x,z) + \frac{1}{2}\distancen^p(z,y)}^\frac{1}{p}$\quad
for some $\opair{p}{\sigma}\in\Rx\times\R$.
%\footnote{%
%  where $\Rx$ is the \structe{set of extended real numbers} and $\Rp$ is the 
%  \structe{set of positive real numbers} \xref{def:Rx}
%  }
\pref{app:trirel} then goes on to use this function to define a new relation, called the 
\rele{power triangle inequality} in $\dspaceX$, and defined as 
\\\indentx$\trirelD\eqd\set{\otriple{x}{y}{z}\in\setX^3}{\distance{x}{y}\le\ptfD}$.

The \rele{power triangle inequality} \xref{def:trirel} is a generalized form of the 
\prope{triangle inequality} in the sense that 
the two inequalities coincide at $\opair{p}{\sigma}=\opair{1}{1}$.
Other special values include $\opair{1}{\sigma}$ yielding the \rele{relaxed triangle inequality} 
(and its associated \structe{near metric space})
and $\opair{\infty}{\sigma}$ yielding the \rele{\txsigma-inframetric inequality} 
(and its associated \structe{\txsigma-inframetric space}).
Collectively, a distance space with a power triangle inequality is herein called a \structe{power distance space}
and denoted $\pdspaceX$.\footnote{
  \structe{power triangle inequality}: \prefp{def:trirels};
  \structe{power distance space}: \prefp{def:pdspace};
  examples of \structe{power distance space}: \prefp{def:pdspace_spaces};
  }

The \fncte{power triangle function}, at $\sigma=\frac{1}{2}$, is a special case of the \fncte{power mean} with $\xN=2$ 
and $\lambda_1=\lambda_2=\frac{1}{2}$.
\fncte{Power mean}s have the elegant properties of being \prope{continuous} and \prope{monontone} with respect
to a free parameter $p$.
From this it is easy to show that the \fncte{power triangle function} is also 
\prope{continuous} and \prope{monontone} with respect to both $p$ and $\sigma$.
Special values of $p$ yield operators coinciding with \ope{maximum}, \ope{minimum}, \ope{mean square}, \ope{arithmetic mean},
\ope{geometric mean}, and \ope{harmonic mean}.
\fncte{Power mean}s are briefly described in \pref{app:pmean}.\footnote{
  \fncte{power triangle function}: \prefpp{def:ptf};
  \fncte{power mean}: \prefpp{def:pmean};
  power mean is \prope{continuous} and \prope{monontone}: \prefpp{thm:pmean_continuous};
  power triangle function is \prope{continuous} and \prope{monontone}: \prefpp{cor:tri_mono};
  Special values of $p$: \prefpp{cor:ftri_means}, \prefpp{cor:means}
  }

\pref{sec:pdspace_prop} investigates the properties of \structe{power distance spaces}.
In particular, it shows for what values of $\opair{p}{\sigma}$ the properties M1--M5 hold. % in these spaces.
Here is a summary of the results
%for what values of $\opair{p}{\sigma}$ in $\Rx\times\Rp$
%the five basic properties listed earlier for metric spaces also hold 
in a \structe{power distance space} $\pdspaceX$, for all $x,y,z\in\setX$:
\\\indentx$\begin{array}{FMMM}
    (M1) & holds for any $\opair{p}{\sigma}\in(\Rx\setd\setn{0})\times\Rp$ such that $2\sigma =   2^{\frac{1}{p}}$ & \xref{thm:pdspace_continuous}
  \\(M2) & holds for any $\opair{p}{\sigma}\in(\Rx\setd\setn{0})\times\Rp$ such that $2\sigma \le 2^{\frac{1}{p}}$ & \xref{cor:oball_open}
  \\(M3) & holds for any $\opair{p}{\sigma}\in(\Rx\setd\setn{0})\times\Rp$ such that $2\sigma \le 2^{\frac{1}{p}}$ & \xref{cor:tspace_base}
  \\(M4) & holds for any $\opair{p}{\sigma}\in\Rx\times\Rp$                                                        & \xref{thm:xn_to_xy}
  \\(M5) & holds for any $\opair{p}{\sigma}\in\Rx\times\Rp$                                                        & \xref{thm:convergent==>cauchy}
\end{array}$

\pref{app:topology} briefly introduces \structe{topological space}s.
The \structe{open ball}s of any \structe{metric space} form a \structe{base} for a \structe{topology}.
This is largely due to the fact that in a metric space, open balls are \prope{open}.
Because of this, in metric spaces it is convenient to use topological structure to define and exploit
analytic concepts such as \prope{continuity}, \prope{convergence}, \structe{closed set}s, 
\structe{closure}, \structe{interior}, and \structe{accumulation point}. %, \structe{boundary}.
For example, in a metric space, the traditional definition of defining continuity using open balls
and the topological definition using open sets, coincide with each other.
Again, this is largely because the open balls of a metric space are open.\footnote{
  \structe{open ball}: \prefp{def:ball}; 
  \structe{metric space}: \prefp{def:mspace};
  \structe{base}: \prefp{def:base};
  \structe{topology}: \prefp{def:topology};
  \structe{open}: \prefp{def:dspace_open};
  %\prope{continuity} in \structe{distance space}: \prefp{def:dspace_continuous};
  \prope{continuity} in \structe{topological space}: \prefp{def:continuous};
  \prope{convergence} in \structe{distance space}: \prefp{def:dspace_converge};
  \prope{convergence} in \structe{topological space}: \prefp{def:converge};
  \prope{closed set}: \prefp{def:closedset};
  \structe{closure}, \structe{interior}, \structe{accumulation point}: \prefp{def:clsA};
 %\structe{boundary}: \prefp{def:bndA};
  coincidence in all \structe{metric space}s and some \structe{power distance space}s: \prefp{thm:ms_converge};
  }

However, this is not the case for all \structe{distance space}s. 
In general, the open balls of a distance space are not open, and they are not a base for a topology.
In fact, the open balls of a distance space are a base for a topology if and only if the open balls are open.
While the open sets in a distance space do 
induce a topology, it's open balls may not.%
%\ldots and distance space definitions using open balls and topological definitions using open sets may not coincide.
\footnote{
  %\structe{distance space}: \prefp{def:dspace};
  \emph{if and only if} statement: \prefp{thm:baseoball};
  open sets of a distance space induce a topology: \prefp{cor:dspace_open};
  }

%======================================
\section{Fundamental structure of distance spaces}
\label{sec:dspace}
%======================================
%======================================
%\subsection{Definitions}
%======================================
%---------------------------------------
\begin{definition}
\footnote{
  \citePpc{menger1928}{76}{``Abstand $a$ $b$ definiert ist\ldots" (distance from $a$ to $b$ is defined as\ldots")},
  \citePpc{wilson1931a}{361}{\textsection1., ``distance", ``semi-metric space"},
  \citePp{blumenthal1938}{38},
  \citerpgc{blumenthal1953}{7}{0828402426}{``{\scshape Definition 5.1.} A distance space is called semimetric provided\ldots"},
  \citePpc{galvin1984}{67}{``distance function"},
  \citerpgc{laos1998}{118}{9810231806}{``distance space"},
  \citerpgc{khamsi2001}{13}{0471418250}{``semimetric space"},
  \citePpc{bessenyei2014}{2}{``semimetric space"}, %{{\scshape Conventions And Basic Notions}},
  \citerpgc{deza2014}{3}{3662443422}{``\textbf{distance} (or \textbf{dissimilarity})"}
  }
\label{def:distance}
\label{def:dspace}
%---------------------------------------
%Let $\setX$ be a set and $\Rnn$ the set of non-negative real numbers.
\defboxt{
  A function $\hxs{\distancen}$ in the set $\clF{\setX\times\setX}{\R}$\ifsxref{relation}{def:clFxy} is a \fnctd{distance} if
  \\\indentx$\begin{array}{F rcl CDD}
        1. & \distance{x}{y} &\ge& 0               & \forall x,y   \in\setX & (\prope{non-negative})   & and 
      \\2. & \distance{x}{y} &=  & 0  \iff x=y     & \forall x,y   \in\setX & (\prope{nondegenerate})  & and 
      \\3. & \distance{x}{y} &=  & \distance{y}{x} & \forall x,y   \in\setX & (\prope{symmetric})      & 
    \end{array}$
  \\The pair $\dspaceX$ is a \structd{distance space} if $\distancen$ is a \fncte{distance} on a set $\setX$.
  \\A \fncte{distance} is also called a \fnctd{dissimilarity}.
  }
\end{definition}

In a \structe{metric space} \xref{def:metric}\index{space!metric},
it is sometimes useful to know the maximum distance between any two points in the set.
This maximum distance is called the \fncte{diameter} of the set (next definition).

%---------------------------------------
\begin{remark}
%---------------------------------------
The \fncte{diameter} is an example of a broader class of functions called 
\fncte{set functions}.\footnote{
  \citerpg{pap1995}{7}{0792336585},
  \citer{hahn1948},
  \citor{choquet1954}
  }
Some \structe{distance space}s \xref{def:distance} and all \structe{metric space}s \xref{def:metric} induce 
\structe{topological space}s \xref{def:topology}.
However the \fncte{set function} %\xref{def:setf}
\fncte{set diameter} %(next definition) 
and the related property of \prope{boundedness} \xref{def:bounded} 
are fundamentally \structe{distance space} concepts, 
not topological ones.\footnote{in \structe{metric space}: \citerpg{munkres2000}{121}{0131816292}}
\end{remark}

%---------------------------------------
\begin{definition}
\footnote{
  in \structe{metric space}:
  %\citerpg{davis2005}{28}{0071243399} \\
  \citerp{hausdorff1937e}{166},
  \citerp{copson1968}{23},
  \citerp{michel1993}{267},
  \citerpg{molchanov2005}{389}{185233892X}
  }
\label{def:diam}
%---------------------------------------
Let $\dspaceX$ be a \structe{distance space} and $\psetX$ be the \structe{power set} of $\setX$ \xref{def:pset}.
\defboxt{
  The \vald{diameter} $\diam\setA$ of a set $\setA\in\psetX$ is
  \quad$\ds
  \diam\setA \eqd
    \brbl{\begin{array}{ll}
      0                            & \text{for } \setA=\emptyset \\
      \sup\set{\distance{x}{y}}{x,y\in\setA} & \text{otherwise}
    \end{array}}$
  }
\end{definition}

%The \fncte{diameter} of a set is a special case of a  
%\prefpp{sec:topmetric} presents some topological properties of metric spaces.
%---------------------------------------
\begin{definition}
\footnote{
  in \structe{metric space}:
  \citerpc{thron1966}{154}{definition 19.5},
  \citerpg{bruckner1997}{356}{013458886X}
  }
\label{def:bounded}
%---------------------------------------
Let $\dspaceX$ be a \structe{distance space}.
Let $\psetX$ be the \structe{power set} of $\setX$.
\defboxt{
  A set $\setA$ is \propd{bounded} in $\dspaceX$ if
  \\\indentx$\setA\in\psetX$ and $\diam\setA<\infty$.
  }
\end{definition}

%%---------------------------------------
%\begin{remark}
%%---------------------------------------
%Although the function $\diam$ is a \fncte{set function}, it is not a \fncte{measure}.
%\end{remark}
%\begin{proof}
%Let $\setA$ and $\setB$ be sets that are \prope{disjoint} and \prope{disconnected}
%with respect to each other.
%\begin{align*}
%  \diam{\setA \setu \setB}
%    &= \diam\setA + \diam\setB + \inf\set{\distance{x}{y}}{x,y\in\setA}
%  \\&\ge \diam\setA + \diam\setB
%  \\\implies & \text{$\diam$ is not a measure}
%    && \text{by definition of measure \ifdochas{measure}{\prefpo{def:measure}}}
%\end{align*}
%\end{proof}


%%---------------------------------------
%\begin{definition}
%\label{def:ods}
%%---------------------------------------
%\defboxp{
%  The triple $\omsD$ is an \structd{ordered distance space} if
%  $\dspaceX$ is a \structe{distance space} \xref{def:dspace}
%  and $\osetX$ is an \structe{ordered set} \xref{def:poset}.
%  }
%\end{definition}

%=======================================
%\subsection{Properties}
%=======================================
%%---------------------------------------
%\begin{remark}
%\footnote{
%  \citePpc{heath1961}{810}{{\scshape Theorem}},
%  \citePpc{galvin1984}{71}{{\scshape 2.3 Lemma}}
%  }
%%---------------------------------------
%Although every \structe{metric space} \xref{def:metric} induces a \structe{topology} \xref{def:topology},
%a \structe{distance space} does \textbf{not} in general induce a topology.
%\end{remark}
%
%see next theorem%%---------------------------------------
%see next theorem%\begin{remark}
%see next theorem%%---------------------------------------
%see next theorem%%Let $\dspaceX$ be a \structb{distance space} \xref{def:dspace}.
%see next theorem%Let $\seqxZ{x_n}$ be a \fncte{sequence} in a \structe{distance space} $\dspaceX$.
%see next theorem%The \structe{distance space} $\dspaceX$ does not necessarily have all the nice properties that a 
%see next theorem%\structe{metric space} \xref{def:metric} has.
%see next theorem%In particular, note the following:
%see next theorem%\\\indentx\remboxp{$\begin{array}{FMcMM}
%see next theorem%  1. & $\distancen$   is a \fncte{distance} in $\dspaceX$ &\notimplies& $\distancen$ is \prope{continuous} in $\dspaceX$                  & \xref{ex:dspace_21}.\\
%see next theorem%  2. & $\balln$ is an \structe{open ball} in $\dspaceX$ &\notimplies& $\balln$ is \prope{open} in $\dspaceX$                              & \xref{ex:dspace_1n}.\\
%see next theorem%  3. & $\baseB$ is the set of all                                    &\notimplies& $\baseB$ is a \structe{base} for a                     & \xref{ex:dspace_1n}.\footnotemark\\
%see next theorem%     &                            \structe{open ball}s in $\dspaceX$ &           &                                    topology on $\setX$ & \\
%see next theorem%  4. & $\seqn{x_n}$ is \prope{convergent} in $\dspaceX$ &\notimplies& limit is \prope{unique}                                             & \xref{ex:dspace_01}.\\
%see next theorem%  5. & $\seqn{x_n}$ is \prope{convergent} in $\dspaceX$ &\notimplies& $\seqn{x_n}$ is \prope{Cauchy} in $\dspaceX$                        & \xref{ex:dspace_1n}.\\
%see next theorem%\end{array}$}
%see next theorem%%In a \structe{metric space} \xref{def:metric}, if a \fncte{sequence} has a limit, that limit is unique.
%see next theorem%%This is not true in general for \structe{distance space}s \xref{def:distance}.
%see next theorem%%See \prefpp{ex:dspace_01} for a distance space which converges to two distinct limits.
%see next theorem%\footnotetext{
%see next theorem%  \citePpc{heath1961}{810}{{\scshape Theorem}},
%see next theorem%  \citePpc{galvin1984}{71}{{\scshape 2.3 Lemma}}
%see next theorem%  }
%see next theorem%\end{remark}

%---------------------------------------
\begin{theorem}
\footnote{
  \citeP{greenhoe2015pds}
  }
\label{thm:dspacecost}
%---------------------------------------
%Let $\dspaceX$ be a \structb{distance space} \xref{def:dspace}.
Let $\seqxZ{x_n}$ be a \fncte{sequence} in a \structe{distance space} $\dspaceX$.
The \structe{distance space} $\dspaceX$ does not necessarily have all the nice properties that a 
\structe{metric space} \xref{def:metric} has.
In particular, note the following:
\\\thmbox{\begin{array}{FMcM}
  1. & $\distancen$   is a \fncte{distance} in $\dspaceX$ &\notimplies& $\distancen$ is \prope{continuous} in $\dspaceX$                  \\
  2. & $\balln$ is an \structe{open ball} in $\dspaceX$ &\notimplies& $\balln$ is \prope{open} in $\dspaceX$                              \\
  3. & $\baseB$ is the set of all \structe{open ball}s in $\dspaceX$ &\notimplies& $\baseB$ is a \structe{base} for a topology on $\setX$ \\
  4. & $\seqn{x_n}$ is \prope{convergent} in $\dspaceX$ &\notimplies& limit is \prope{unique}                                             \\
  5. & $\seqn{x_n}$ is \prope{convergent} in $\dspaceX$ &\notimplies& $\seqn{x_n}$ is \prope{Cauchy} in $\dspaceX$                        
\end{array}}
%In a \structe{metric space} \xref{def:metric}, if a \fncte{sequence} has a limit, that limit is unique.
%This is not true in general for \structe{distance space}s \xref{def:distance}.
%See \prefpp{ex:dspace_01} for a distance space which converges to two distinct limits.
\end{theorem}
\begin{proof}
\\$\begin{array}{FMM}
  1. & $\distancen$ is \prope{continuous} in $\dspaceX$                    & \prefp{ex:dspace_21}.\\
  2. & $\balln$ is \prope{open} in $\dspaceX$                              & \prefp{ex:dspace_1n}.\\
  3. & $\baseB$ is a \structe{base} for a topology on $\setX$              & \prefp{ex:dspace_1n}.\footnotemark\\
  4. & limit is \prope{unique}                                             & \prefp{ex:dspace_01}.\\
  5. & $\seqn{x_n}$ is \prope{Cauchy} in $\dspaceX$                        & \prefp{ex:dspace_1n}.
\end{array}$
\footnotetext{
  \citePpc{heath1961}{810}{{\scshape Theorem}},
  \citePpc{galvin1984}{71}{{\scshape 2.3 Lemma}}
  }
\end{proof}


%=======================================
\section{Open sets in distance spaces}
%=======================================
%=======================================
%\subsection{Definitions}
%=======================================
%\pref{def:ball} (next) defines the \structe{open ball}.
%In a \structe{metric space} \xref{def:metric}\index{space!metric}, 
%sets are often specified in terms of an \prope{open ball};
%and an open ball is specified in terms of a metric.
%---------------------------------------
\begin{definition}
\footnote{
  in \structe{metric space}:
  \citerp{ab}{35}
  }
\label{def:ball}
\label{def:ballc}
%---------------------------------------
Let $\dspaceX$ be a \structe{distance space} \xref{def:distance}.
Let $\Rp$ be the \structe{set of positive real numbers}\ifsxref{randprocess}{def:Rx}.
\\\defboxt{$\begin{array}{Mrcl}
  An \structd{open ball}   centered at $x$ with radius $r$ is the set & \ball{x}{r}  &\eqd& \set{y\in\setX}{\distance{x}{y}<r}.\\
  A  \structd{closed ball} centered at $x$ with radius $r$ is the set & \ballc{x}{r} &\eqd& \set{y\in\setX}{\distance{x}{y}\le r}.
\end{array}$}
\end{definition}

%Open balls will often ``appear" different in different metric spaces. 
%Some examples include the following \xref{ex:taxicab}:\\
%\setlength{\unitlength}{\tw/6000}
%\begin{tabular}{cll>{\footnotesize(}l<{\footnotesize)}}
%%\begin{tabular}{cl}%<{:}l>{\footnotesize(}l<{\footnotesize)}}
%  \begin{picture}(300,350)(-130,-130)
%    \thicklines
%    \color{axis}%
%      \put(-130,   0){\line(1,0){260} }%
%      \put(   0,-130){\line(0,1){260} }%
%    \color{blue}%
%      \qbezier( 100,0)( 50, 50)(0, 100)%
%      \qbezier(-100,0)(-50, 50)(0, 100)%
%      \qbezier(-100,0)(-50,-50)(0,-100)%
%      \qbezier( 100,0)( 50,-50)(0,-100)%
%  \end{picture}
%  & \prope{taxi-cab metric}%  & \pref{ex:ms_taxi} & \prefpo{ex:ms_taxi} 
%  \\
%  \begin{picture}(300,300)(-130,-130)
%    \thicklines
%    \color{axis}%
%      \put(-130,   0){\line(1,0){260} }%
%      \put(   0,-130){\line(0,1){260} }%
%    \color{blue}\input{../common/circle.inp}%
%  \end{picture}
%  & \prope{Euclidean metric}% & \pref{ex:ms_euclidean} & \prefpo{ex:ms_euclidean} 
%  \\
%  \begin{picture}(300,300)(-130,-130)
%    \thicklines
%    \color{axis}%
%      \put(-130,   0){\line(1,0){260} }%
%      \put(   0,-130){\line(0,1){260} }%
%    \color{blue}%
%      \put(-100,-100){\line( 1, 0){200} }%
%      \put(-100,-100){\line( 0, 1){200} }%
%      \put( 100, 100){\line(-1, 0){200} }%
%      \put( 100, 100){\line( 0,-1){200} }%
%  \end{picture}
%  & \prope{sup metric}% & \pref{ex:ms_sup} & \prefpo{ex:ms_sup} 
%%  \\
%%  \begin{picture}(300,300)(-130,-130)%
%%    %{\color{graphpaper}\graphpaper[10](-150,-150)(300,300)}%
%%    \thicklines%
%%    \color{axis}%
%%      \put(-130,   0){\line(1,0){260} }%
%%      \put(   0,-130){\line(0,1){260} }%
%%    \color{blue}%
%%      \qbezier( 100,0)(0,0)(0, 100)%
%%      \qbezier( 100,0)(0,0)(0,-100)%
%%      \qbezier(-100,0)(0,0)(0,-100)%
%%      \qbezier(-100,0)(0,0)(0, 100)%
%%  \end{picture}
%%  & \prope{parabolic metric} & \pref{ex:ms_parabolic} & \prefpo{ex:ms_parabolic}
%%  \\ 
%%  \begin{picture}(400,400)(-200,-200)%
%%    \thicklines%
%%    \color{axis}%
%%      \put(-200,   0){\line(1,0){400} }%
%%      \put(   0,-200){\line(0,1){400} }%
%%    \color{blue}%
%%      \qbezier( 100,0)(100,100)(0, 100)%
%%      \qbezier(-171,0)(-50,50)(0, 100)%
%%      \qbezier(-171,0)(-50,-50)(0,-171)%
%%      \qbezier( 100,0)(50,-50)(0,-171)%
%%  \end{picture}
%%  & \prope{exponential metric} & \pref{ex:ms_32x} & \prefpo{ex:ms_32x}
%%  \\ 
%%  \begin{picture}(300,300)(-150,-150)%
%%    \thicklines%
%%    \color{axis}%
%%      \put(-130,   0){\line(1,0){260} }%
%%      \put(   0,-130){\line(0,1){260} }%
%%    \color{blue}%
%%      \qbezier( 100,0)(70,70)(0, 100)%
%%      \qbezier(-100,0)(-70,70)(0, 100)%
%%      \qbezier(-100,0)(-70,-70)(0,-100)%
%%      \qbezier( 100,0)(70,-70)(0,-100)%
%%  \end{picture}
%%  & \prope{tangential metric} & \pref{ex:ms_tan} & \prefpo{ex:ms_tan}
%\end{tabular}

%%---------------------------------------
%\begin{theorem}
%\footnote{
%  \citerpp{isham1999}{10}{11} \\
%  \citor{birkhoff1933}
%  }
%%---------------------------------------
%\thmbox{\begin{array}{rc>{\ds}l}
%  \distancesub{1}{x}{y} \join \distancesub{2}{x}{y} 
%    &\eqd& \max\brb{\distancesub{1}{x}{y},\, \distancesub{2}{x}{y}} 
%    \\
%  \distancesub{1}{x}{y} \meet \distancesub{2}{x}{y} 
%    &\eqd& \inf_{\seqn{x=x_1,x_2,\ldots,x_n=y}} \sum_{i=1}^{n-1} \brb{\distancesub{1}{x_i}{x_{i+1}},\, \distancesub{2}{x_i}{x_{i+1}}}
%\end{array}}
%\end{theorem}

%\begin{figure}[h]
%  \centering%
%  \psset{unit=6mm}%
%  \input{../common/math/graphics/ballinopen.tex}
%  \caption{\structe{open set} \xref{def:dspace_open} \label{fig:ms_open}}
%\end{figure}
%---------------------------------------
\begin{definition}
\label{def:dspace_open}
%\label{def:dspace_closed}
%---------------------------------------
Let $\dspaceX$ be a \structe{distance space}. % \xref{def:dspace}.
Let $\setX\setd\setA$ be the \ope{set difference} of $\setX$ and a set $\setA$.
\defboxp{
  A set $\setU$ is \propd{open} in $\dspaceX$ if $\setU\in\psetX$ and 
  %\\\indentx$x\in\setU \qquad\implies\qquad$there exists $r\in\Rp$ such that $\ball{x}{r}\subseteq \setU$.
  for every $x$ in $\setU$ there exists $r\in\Rp$ such that $\ball{x}{r}\subseteq \setU$.
  A set $\setU$ is an \structd{open set} in $\dspaceX$ if $\setU$ is \prope{open} in $\dspaceX$. 
  A set $\setD$ is \propd{closed} in $\dspaceX$ if $\brp{\setX\setd\setD}$ is \prope{open}.
  A set $\setD$ is a \structd{closed set} in $\dspaceX$ if $\setD$ is \prope{closed} in $\dspaceX$. 
  }
\end{definition}

%=======================================
%\subsection{Properties}
%=======================================
%\pref{thm:dspace_open} (next) identifies four fundamental properties of open sets in
%distance spaces.
%These properties are the same as those defining a topology\ifsxref{topology}{def:topology}.
%---------------------------------------
\begin{theorem}
\footnote{
  in \structe{metric space}:
  \citerpp{dieudonne1969}{33}{34},
  \citerpg{rosenlicht}{39}{0486650383}
  %\citerp{giles1987}{215} \\
  %\citerpg{davis2005}{19}{0071243399}
  %\citerpg{ab}{35}{0120502577}
  }
\label{thm:dspace_open}
\index{space!metric}
%---------------------------------------
Let $\dspaceX$ be a \structe{distance space}. % \xref{def:dspace}.
Let $\xN$ be any (finite) positive integer.
Let $\Gamma$ be a \structe{set} possibly with an uncountable number of elements.
\thmbox{\begin{array}{F Mll>{\ds}l l}
    1. &                                                                &                         &          & \setX                                   & \text{is \prope{open}.}\\
    2. &                                                                &                         &          & \emptyset                               & \text{is \prope{open}.}\\
    3. & each element in $\setxn{\setU_n}$                              & \text{is \prope{open}} & \implies & \setopi_{n=1}^\xN \setU_n               & \text{is \prope{open}.}\\
    4. & each element in $\set{\setU_\gamma\in\psetX}{\gamma\in\Gamma}$ & \text{is \prope{open}} & \implies & \setopu_{\gamma\in\Gamma} \setU_\gamma  & \text{is \prope{open}.} 
  \end{array}}
\end{theorem}
\begin{proof}
\begin{enumerate}
  \item Proof that $\setX$ is \prope{open} in $\dspaceX$:
    \begin{enumerate}
      \item By definition of \structe{open set} \xref{def:dspace_open}, 
            $\setX$ is \prope{open} $\iff \forall x\in\setX \quad\exists r \st \ball{x}{r}\subseteq \setX$.
      \item By definition of \structe{open ball} \xref{def:ball}, it is always true that $\ball{x}{r}\subseteq\setX$ in $\dspaceX$.
      \item Therefore, $\setX$ is \prope{open} in $\dspaceX$.
    \end{enumerate}

  \item Proof that $\emptyset$ is \prope{open} in $\dspaceX$:
    \begin{enumerate}
      \item By definition of \structe{open set} \xref{def:dspace_open}, 
            $\emptyset$ is \prope{open} $\iff \forall x\in\setX \quad\exists r \st \ball{x}{r}\subseteq \emptyset$.
      \item By definition of \structe{empty set} $\emptyset$, %\xref{def:emptyset}, 
            this is always true because no $x$ is in $\emptyset$.
      \item Therefore, $\emptyset$ is \prope{open} in $\dspaceX$.
    \end{enumerate}

  \item Proof that $\setopu\setU_\gamma$ is \prope{open} in $\dspaceX$:
    \begin{enumerate}
      \item By definition of \structe{open set} \xref{def:dspace_open}, 
            $\setopu\setU_\gamma$ is \prope{open} $\iff \forall x\in\setopu\setU_\gamma \quad\exists r \st \ball{x}{r}\subseteq\setopu\setU_\gamma$.
      \item If $x\in\setopu\setU_\gamma$, then there is at least one $\setU\in\setopu\setU_\gamma$ that contains $x$.
      \item By the left hypothesis in (4), that set $\setU$ is open and so for that $x$,
            $\exists r \st \ball{x}{r}\subseteq\setU\subseteq\setopu\setU_\gamma$.
      \item Therefore, $\setopu\setU_\gamma$ is \prope{open} in $\dspaceX$.
    \end{enumerate}

  \item Proof that $\setU_1$ and $\setU_2$ are \prope{open} $\implies$ $\setU_1\seti\setU_2$ is \prope{open}: \label{ilem:ms_open_seti}
    \begin{enumerate}
      \item By definition of \structe{open set} \xref{def:dspace_open}, 
            $\setU_1\seti\setU_2$ is \prope{open} $\iff \forall x\in\setU_1\seti\setU_2\quad\exists r \st \ball{x}{r}\subseteq\setU_1\seti\setU_2$.
      \item By the left hypothesis above, $\setU_1$ and $\setU_2$ are \prope{open};
            and by the definition of \structe{open set}s \xref{def:dspace_open}, 
            there exists $r_1$ and $r_2$ such that
            $\ball{x}{r_1}\subseteq\setU_1$ and $\ball{x}{r_2}\subseteq\setU_2$.
      \item Let $r\eqd\min\setn{r_1,r_2}$. Then $\ball{x}{r}\subseteq\setU_1$ and $\ball{x}{r}\subseteq\setU_2$.
      \item By definition of \ope{set intersection} $\seti$ then, $\ball{x}{r}\subseteq\setU_1\seti\setU_2$.
      \item By definition of \ope{open set} \xref{def:dspace_open}, $\setU_1\seti\setU_2$ is \prope{open}.
    \end{enumerate}

  \item Proof that $\setopi_{n=1}^\xN\setU_n$ is \prope{open} (by induction):
    \begin{enumerate}
      \item Proof for $\xN=1$ case: $\setopi_{n=1}^\xN\setU_n=\setopi_{n=1}^1\setU_n=\setU_1$ is \prope{open} by hypothesis.
      \item Proof that $\xN$ case $\implies$ $\xN+1$ case: 
        \begin{align*} 
          \setopi_{n=1}^{\xN+1}\setU_n
            &= \brp{\setopi_{n=1}^{\xN}\setU_n}\seti\setU_{\xN+1}
            && \text{by property of $\setopi$}
          \\&\implies \text{\prope{open}} 
            && \text{by ``$\xN$ case" hypothesis and \prefp{ilem:ms_open_seti}}
        \end{align*}
    \end{enumerate}
\end{enumerate}
\end{proof}

%---------------------------------------
\begin{corollary}
\label{cor:dspace_open}
%---------------------------------------
Let $\dspaceX$ be a \structe{distance space}.
%Let an $\prope{open}$ set in $\psetX$ be defined as in \prefpp{def:dspace_open}.
\corboxt{
  The set 
  \quad$\topT\eqd\set{\setU\in\psetX}{\text{$\setU$ is \prope{open} in $\dspaceX$}}$\quad
  is a \structe{topology} on $\setX$, 
  \\and $\topspaceX$ is a \structe{topologogical space}.
  }
\end{corollary}
\begin{proof}
This follows directly from the definition of an \prope{open} set \xref{def:dspace_open},
\prefpp{thm:dspace_open}, and the definition of \structe{topology} \xref{def:topology}.
\end{proof}

%%---------------------------------------
%\begin{corollary}
%\label{cor:dspace_open}
%%---------------------------------------
%Let $\dspaceX$ be a \structe{distance space} \xref{def:dspace}.
%Let $\Gamma$ be a \structe{set} possibly with an uncountable number of elements.
%Let $\baseU\eqd\set{\setU_\gamma\in\psetX}{\gamma\in\Gamma}$.
%Let $\baseB$ be a family of sets such that $\baseB\subseteq\psetX$.
%\corbox{
%  \brb{\begin{array}{FMD}
%    1. & each set in $\baseU$ is \prope{open} in $\dspaceX$ & and
%  \\2. & $\baseU\subseteq\baseB$ &and 
%  \\3. & $\setX\in\baseB$ & and
%  \\4. & $\setU_1,\setU_2\in\baseU\implies\setU_1\seti\setU_2\in\baseB$ & and
%  \end{array}}
%  \quad\implies\quad
%  \brb{\begin{array}{M}
%    $\baseB$ is a \structe{base} for a\\\structe{topology} \xref{def:topology} on $\setX$
%  \end{array}}
%  }
%\end{corollary}
%\begin{proof}
%This follows directly from \prefpp{thm:dspace_open}, the definition of \structe{topology} \xref{def:topology},
%and the definition of \structe{base} \xref{def:base}.
%\end{proof}

Of course it is possible to define a very large number of topologies even on a finite set with just a handful of elements;\footnote{
  For a finite set $\setX$ with $n$ elements, there are 
  29 topologies on $\setX$ if $n=3$, 
  6942 topologies on $\setX$ if $n=5$, and
  and 8,977,053,873,043 (almost 9 trillion) topologies on $\setX$ if $n=10$.
  References:  \citeoeis{A000798},
  \citerp{brown1996}{31},
  \citerpg{comtet1974}{229}{9027704414},
  \citer{comtet1966},
  \citerp{chatterji1967}{7},
  \citer{evans1967},
  \citerp{krishnamurthy1966}{157}
  }
and it is possible to define an infinite number of topologies even on a \prope{linearly ordered} infinite set
like the \structe{real line} $\osetR$.\footnote{%
  For examples of topologies on the real line, see the following:
      \citerpgc{adams2008}{31}{0131848690}{"six topologies on the real line"},
      \citerppgc{salzmann2007}{64}{70}{0521865166}{Weird topologies on the real line},
      \citerpgc{murdeshwar1990}{53}{8122402461}{``often used topologies on the real line"},
      \citerppgc{joshi1983}{85}{91}{0852264445}{\textsection4.2 Examples of Topological Spaces}
  }
Be that as it may, \pref{def:dspacetop} (next definition) defines a single but convenient 
\structe{topological space} in terms of a \structe{distance space}.
Note that every \structe{metric space} conveniently and naturally induces a \structe{topological space}
because the \structe{open ball}s of the metric space form a \structe{base} for the \structe{topology}.
This is not the case for all {distance space}s.
But if the open balls of a \structe{distance space} are all \prope{open}, 
then those open balls induce a topology (next theorem).\footnote{
  \structe{metric space}: \prefp{def:metric}; 
  \structe{open ball}: \prefp{def:ball};
  \structe{base}: \prefp{def:base};  
  \structe{topology}: \prefp{def:topology};
  not all open balls are open in a distance space: \prefpp{ex:dspace_01} and \prefpp{ex:dspace_1n};
  }
%---------------------------------------
\begin{definition}
\label{def:dspacetop}
%---------------------------------------
Let $\dspaceX$ be a \structe{distance space}. % \xref{def:dspace}.
%Let $\psetX$ be the \structe{power set} \xref{def:psetx} of $\setX$.
\defboxt{
  The set 
  \quad$\topT\eqd\set{\setU\in\psetX}{\text{$\setU$ is \prope{open} in $\dspaceX$}}$\quad
  is the \structd{topology induced by $\dspaceX$ on $\setX$}. 
  \\The pair $\topspaceX$ is called the \structd{topological space induced by $\dspaceX$}. 
  }
\end{definition}

For any \structe{distance space} $\dspaceX$, no matter how strange, 
there is guaranteed to be at least one \structe{topological space induced by $\dspaceX$}---and that 
is the \structe{indiscrete topological space} \xref{ex:idts} because for any distance space $\dspaceX$, 
$\emptyset$ and $\setX$ are \prope{open set}s in $\dspaceX$ \xref{thm:dspace_open}.



%In a \structe{metric space}, the set of all \structe{open ball}s 
%is a \structe{base} for a \structe{topology}.
%This is largely due to the fact that in a \structe{metric space}, all \structe{open ball}s are \prope{open}.
%However, in a \structe{distance space}, \structe{open ball}s are not always \prope{open} \xref{ex:dspace_1n}.
%But if they all are, then the open balls induce a topology (next theorem).\footnote{
%  \structe{metric space}: \prefp{def:metric}; 
%  \structe{open ball}: \prefp{def:ball};
%  \structe{base}: \prefp{def:base};  
%  \structe{topology}: \prefp{def:topology};
%  not all \structe{open ball}s are \prope{open} in a \structe{distance space}: \prefp{ex:dspace_1n};
%  }
%---------------------------------------
\begin{theorem}
\label{thm:baseoball}
%---------------------------------------
Let $\baseB$ be the set of all \structe{open ball}s in a \structe{distance space}
$\dspaceX$. % \xref{def:dspace}.
\thmbox{
  \brb{\text{every \structe{open ball} in $\baseB$ is \prope{open}}}
  \quad\iff\quad
  \brb{\text{$\baseB$ is a \structe{base} for a \structe{topology}}}
  }
\end{theorem}
\begin{proof}
    \begin{align*}
      \mathrlap{\boxed{\text{every \structe{open ball} in $\baseB$ is \prope{open}}}}
      \\&\implies\text{for every $x$ in $\setB_y\in\baseB$ there exists $r\in\Rp$ such that $\ball{x}{r}\subseteq \setB_y$}
        && \text{by definition of \prope{open} \xref{def:dspace_open}}
      \\&\implies \brb{\begin{array}{M}
                    for every $x\in\setX$ and for every $\setB_y\in\baseB$ containing $x$,\\
                    there exists $\setB_x\in\baseB$ such that\qquad $x\in\setB_x\subseteq\setB_y$.
                  \end{array}}
        && \text{because $\forall\opair{x}{r}\in\setX\times\Rp$, $\ball{x}{r}\subseteq\setX$}
      \\&\implies \boxed{\text{$\baseB$ is a \structe{base} for $\topT$}}
        && \text{by \prefp{thm:basex}}
      %
      \\&\implies \brb{\begin{array}{M}
                    for every $x\in\setX$ and for every $\setU\subseteq\topT$ containing $x$,\\
                    there exists $\setB_x\in\baseB$ such that\qquad $x\in\setB_x\subseteq\setU$.
                  \end{array}}
        && \text{by \prefp{thm:basex}}
      \\&\implies \brb{\begin{array}{M}
                    for every $x\in\setX$ and for every $\setB_y\in\baseB\subseteq\topT$ containing $x$,\\
                    there exists $\setB_x\in\baseB$ such that\qquad $x\in\setB_x\subseteq\setB_y$.
                  \end{array}}
        && \text{by definition of \structe{base} \xref{def:base}}
      \\&\implies \brb{\begin{array}{M}
                    for every $x\in\setB_y\in\baseB\subseteq\topT$,\\
                    there exists $\setB_x\in\baseB$ such that\qquad $x\in\setB_x\subseteq\setB_y$.
                  \end{array}}
      \\&\implies \boxed{\text{every \structe{open ball} in $\baseB$ is \prope{open}}}
        && \text{by definition of \prope{open} \xref{def:dspace_open}}
    \end{align*}
\end{proof}

%%---------------------------------------
%\begin{remark}
%\label{rem:dspace_tspace}
%%---------------------------------------
%In a \structe{metric space} \xref{def:metric}, the set of all \structe{open ball}s \xref{def:ball} 
%is a \structe{base} \xref{def:base} for a \structe{topology} \xref{def:topology}.
%That is, the open balls induce a topology on the base set.
%In a \structe{distance space} \xref{def:dspace}, however, this is \emph{not} the case \xxref{thm:baseoball}{ex:dspace_1n}.
%But this by no means implies that all the beautiful structure of topological spaces is unavailable to us in a distance space.
%Rather, any set of \structe{open set}s \xref{def:dspace_open} in a \structe{distance space} $\dspaceX$ that
%satifies the four relations in \prefpp{thm:dspace_open} \emph{is}, by \prefpp{def:topology}, a \structe{topology} on $\setX$.
%For example, regardless of how strange the \fncte{distance function} $\distancen$ may be, 
%of course the \structe{discrete topology} $\psetX$
%and \structe{indiscrete topology} $\setn{\emptyset,\setX}$ \xref{ex:discretetop}
%are still legitimate topologies on $\setX$.
%And in any \structe{topological space} we may construct on a distance space, 
%all the structure of topological space, such as \structe{derived sets} \xxref{def:clsA}{def:bndA},
%and fundamental properties, such as the \thme{closed set theorem} \xref{thm:cst}, 
%is still available to us.
%\end{remark}

