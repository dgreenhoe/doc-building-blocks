%============================================================================
% Daniel J. Greenhoe
% XeLaTeX file
% nominal unit = 10mm
% see pst-node package: https://ctan.org/pkg/pst-node
%                    _____
%           A       |     |                 Q
%   P ---->o------->|  T  |--->------------o
%          |        |_____|                |
%          |         _____                 |
%          |B       |  ^  |                |
%          o------->|  G  |---> R          |
%          |        |_____|                |
%   U --->(+)        _____          V --->(+)
%          |C       |  ^  |                |
%          o------->|  H  |---> S          |
%          |        |_____|                |
%          v                               v
%          X                               Y
%============================================================================
\begin{pspicture}(-3.2,-3.5)(3.5,0.55)
  %-------------------------------------
  % settings
  %-------------------------------------
  \psset{%
    radius=2.25mm,  % radius of adder circles
    framesize=10mm,% width and height of transfer function boxes
    labelsep=2pt
    }%
  %-------------------------------------
  % transfer function boxes
  %-------------------------------------
  \fnodeput{0}{ 0}{+0.000}{T}{$\opT$}%
  \fnodeput{0}{ 0}{-1.250}{G}{$\estGls$}%
  \fnodeput{0}{ 0}{-2.500}{H}{$\estHls$}%
    %       |   |   |      |    |____ label in box
    %       |   |   |      |_________ node name
    %       |   |   |________________ y location
    %       |   |____________________ x location
    %       |________________________ angle
  %--------------------------------------------------------------------------
  % ADDERS: circles with $+$ inside
  %--------------------------------------------------------------------------
  \cnodeput{0}(-1.5,-1.875){addU}{$+$}%
  \cnodeput{0}( 3.0,-1.875){addV}{$+$}%
    % |     |   |    |      |      |____ $+$ in circle
    % |     |   |    |      |___________ node label
    % |     |   |    |__________________ y location
    % |     |   |_______________________ x location
    % |     |___________________________ angle of + in circle
    % |_________________________________ circle node put
  %-------------------------------------
  % node locations
  %-------------------------------------
  \pnode(-1.35, 0.000){P}%
  \pnode(-2.50,-1.875){U}%
  %
  \nnode{-1.50}{ 0.000}{A}%
  \nnode{-1.50}{-1.250}{B}%
  \nnode{-1.50}{-2.500}{C}%
  \pnode(-1.50, -3.000){X}%
  %
  \pnode( 1.00,-1.250){R}%
  \pnode( 1.00,-2.500){S}%
  %
  \pnode( 1.00, 0.250){Qlabel}%
  \pnode( 3.00, 0.000){Q}%
  \pnode( 2.00,-1.875){V}%
  \pnode( 3.00,-3.000){Y}%
  %
  \pnode( 2.00,-1.250){Crq}%
  \pnode( 2.00,-2.500){Csy}%
    %     |     |     |_________________ node name
    %     |     |_______________________ y location
    %     |_____________________________ x location
  %-------------------------------------
  % label text
  %-------------------------------------
  \uput[180](P) {$\rvp(n)$}%
  \uput[-90](X) {$\rvx(n)$}%
  \uput[-90](Y) {$\rvy(n)$}%
  \uput[180](V) {$\rvv(n)$}%
  \uput[180](U) {$\rvu(n)$}%
  \uput[  0](R) {$\rvr(n)$}%
  \uput[  0](S) {$\rvs(n)$}%
  \uput[  0](Qlabel){$\rvq(n)$}%
  %-------------------------------------
  % system connections
  %-------------------------------------
  \ncline{->}{P}{T}%
  \ncline{->}{B}{G}%
  \ncline{->}{A}{addU}%
  \ncline{->}{U}{addU}%
  \ncline{->}{addU}{X}%
  \ncline{->}{C}{H}%
  %
  \ncline    {T}{Q}%
  \ncline{->}{G}{R}%
  \ncline{->}{H}{S}%
  %
  \ncline{->}{V}{addV}%
  \ncline{->}{Q}{addV}%
  \ncline{->}{addV}{Y}%
  %-------------------------------------
  % Cost functions
  %-------------------------------------
  %\rput(Crq){%
  %  \rput(0,0){$\fCostrq$}
  %  }%
  %\rput(Csy){%
  %  \rput(0,0){$\fCostsy$}
  %  }%
  %-------------------------------------
  % development support--comment out before final version
  %-------------------------------------
  \psset{linecolor=red,linewidth=0.50pt}%
  %\psline(-0.25, 0.00)(0.25,0.00)% __|__ centered at (0,0)
  %\psline( 0.00,-0.25)(0.00,0.25)%   |
\end{pspicture}%